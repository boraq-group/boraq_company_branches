
/* /web/static/src/js/services/session.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.session',function(require){"use strict";var Session=require('web.Session');var modules=odoo._modules;var session=new Session(undefined,undefined,{modules:modules,use_cors:false});session.is_bound=session.session_bind();return session;});;

/* /web/static/src/js/public/public_crash_manager.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.PublicCrashManager',function(require){"use strict";const core=require('web.core');const CrashManager=require('web.CrashManager').CrashManager;const PublicCrashManager=CrashManager.extend({_displayWarning(message,title,options){this.displayNotification(Object.assign({},options,{title,message,sticky:true,}));},});core.serviceRegistry.add('crash_manager',PublicCrashManager);return{CrashManager:PublicCrashManager,};});;

/* /web/static/src/js/public/public_notification.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.Notification',function(require){'use strict';var Notification=require('web.Notification');Notification.include({xmlDependencies:['/web/static/src/xml/notification.xml'],});});;

/* /web/static/src/js/public/public_root.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.root',function(require){'use strict';var ajax=require('web.ajax');var dom=require('web.dom');var ServiceProviderMixin=require('web.ServiceProviderMixin');var session=require('web.session');var utils=require('web.utils');var publicWidget=require('web.public.widget');var publicRootRegistry=new publicWidget.RootWidgetRegistry();function getLang(){var html=document.documentElement;return(html.getAttribute('lang')||'en_US').replace('-','_');}
var lang=utils.get_cookie('frontend_lang')||getLang();var localeDef=ajax.loadJS('/web/webclient/locale/'+lang.replace('-','_'));window.addEventListener('unhandledrejection',function(ev){if(!ev.reason||!(ev.reason instanceof Error)){ev.stopPropagation();ev.stopImmediatePropagation();ev.preventDefault();}});var PublicRoot=publicWidget.RootWidget.extend(ServiceProviderMixin,{events:_.extend({},publicWidget.RootWidget.prototype.events||{},{'submit .js_website_submit_form':'_onWebsiteFormSubmit','click .js_disable_on_click':'_onDisableOnClick',}),custom_events:_.extend({},publicWidget.RootWidget.prototype.custom_events||{},{'context_get':'_onContextGet','main_object_request':'_onMainObjectRequest','widgets_start_request':'_onWidgetsStartRequest','widgets_stop_request':'_onWidgetsStopRequest',}),init:function(){this._super.apply(this,arguments);ServiceProviderMixin.init.call(this);this.publicWidgets=[];},willStart:function(){return Promise.all([this._super.apply(this,arguments),session.is_bound,localeDef]);},start:function(){var defs=[this._super.apply(this,arguments),this._startWidgets()];this.$(".o_image[data-mimetype^='image']").each(function(){var $img=$(this);if(/gif|jpe|jpg|png/.test($img.data('mimetype'))&&$img.data('src')){$img.css('background-image',"url('"+$img.data('src')+"')");}});if(window.location.hash.indexOf("scrollTop=")>-1){this.el.scrollTop=+window.location.hash.match(/scrollTop=([0-9]+)/)[1];}
if($.fn.placeholder){$('input, textarea').placeholder();}
return Promise.all(defs);},_call_service:function(ev){if(ev.data.service==='ajax'&&ev.data.method==='rpc'){var route=ev.data.args[0];if(_.str.startsWith(route,'/web/dataset/call_kw/')){var params=ev.data.args[1];var options=ev.data.args[2];params.kwargs.context=_.extend({},this._getContext(),params.kwargs.context||{});if(options){params.kwargs.context=_.omit(params.kwargs.context,options.noContextKeys);ev.data.args[2]=_.omit(options,'noContextKeys');}
params.kwargs.context=JSON.parse(JSON.stringify(params.kwargs.context));}}
return ServiceProviderMixin._call_service.apply(this,arguments);},_getContext:function(context){return _.extend({'lang':getLang(),},context||{});},_getExtraContext:function(context){return this._getContext(context);},_getPublicWidgetsRegistry:function(options){return publicWidget.registry;},_getRegistry:function(){return publicRootRegistry;},_startWidgets:function($from,options){var self=this;if($from===undefined){$from=this.$('#wrapwrap');if(!$from.length){$from=this.$el;}}
if(options===undefined){options={};}
this._stopWidgets($from);var defs=_.map(this._getPublicWidgetsRegistry(options),function(PublicWidget){var selector=PublicWidget.prototype.selector||'';var $target=dom.cssFind($from,selector,true);var defs=_.map($target,function(el){var widget=new PublicWidget(self,options);self.publicWidgets.push(widget);return widget.attachTo($(el));});return Promise.all(defs);});return Promise.all(defs);},_stopWidgets:function($from){var removedWidgets=_.map(this.publicWidgets,function(widget){if(!$from||$from.filter(widget.el).length||$from.find(widget.el).length){widget.destroy();return widget;}
return null;});this.publicWidgets=_.difference(this.publicWidgets,removedWidgets);},_onContextGet:function(ev){if(ev.data.extra){ev.data.callback(this._getExtraContext(ev.data.context));}else{ev.data.callback(this._getContext(ev.data.context));}},_onMainObjectRequest:function(ev){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);ev.data.callback({model:m[1],id:m[2]|0,});},_onWidgetsStartRequest:function(ev){this._startWidgets(ev.data.$target,ev.data.options).then(ev.data.onSuccess).guardedCatch(ev.data.onFailure);},_onWidgetsStopRequest:function(ev){this._stopWidgets(ev.data.$target);},_onWebsiteFormSubmit:function(ev){var $buttons=$(ev.currentTarget).find('button[type="submit"], a.a-submit');_.each($buttons,function(btn){var $btn=$(btn);$btn.html('<i class="fa fa-spinner fa-spin"></i> '+$btn.text());$btn.prop('disabled',true);});},_onDisableOnClick:function(ev){$(ev.currentTarget).addClass('disabled');},});return{PublicRoot:PublicRoot,publicRootRegistry:publicRootRegistry,};});;

/* /website/static/src/js/content/website_root_instance.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('root.widget',function(require){'use strict';var lazyloader=require('web.public.lazyloader');var websiteRootData=require('website.root');var websiteRoot=new websiteRootData.WebsiteRoot(null);return lazyloader.allScriptsLoaded.then(function(){return websiteRoot.attachTo(document.body).then(function(){return websiteRoot;});});});;

/* /web/static/src/js/public/public_widget.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.widget',function(require){'use strict';var Class=require('web.Class');var dom=require('web.dom');var mixins=require('web.mixins');var session=require('web.session');var Widget=require('web.Widget');var RootWidget=Widget.extend({custom_events:_.extend({},Widget.prototype.custom_events||{},{'registry_update':'_onRegistryUpdate','get_session':'_onGetSession',}),init:function(){this._super.apply(this,arguments);this._widgets=[];this._listenToUpdates=false;this._getRegistry().setParent(this);},start:function(){var defs=[this._super.apply(this,arguments)];defs.push(this._attachComponents());this._listenToUpdates=true;return Promise.all(defs);},_attachComponent:function(childInfo,$from){var self=this;var $elements=dom.cssFind($from||this.$el,childInfo.selector);var defs=_.map($elements,function(element){var w=new childInfo.Widget(self);self._widgets.push(w);return w.attachTo(element);});return Promise.all(defs);},_attachComponents:function($from){var self=this;var childInfos=this._getRegistry().get();var defs=_.map(childInfos,function(childInfo){return self._attachComponent(childInfo,$from);});return Promise.all(defs);},_getRegistry:function(){},_onGetSession:function(event){if(event.data.callback){event.data.callback(session);}},_onRegistryUpdate:function(ev){ev.stopPropagation();if(this._listenToUpdates){this._attachComponent(ev.data);}},});var RootWidgetRegistry=Class.extend(mixins.EventDispatcherMixin,{init:function(){mixins.EventDispatcherMixin.init.call(this);this._registry=[];},add:function(Widget,selector){var registryInfo={Widget:Widget,selector:selector,};this._registry.push(registryInfo);this.trigger_up('registry_update',registryInfo);},get:function(){return this._registry;},});var PublicWidget=Widget.extend({selector:false,events:{},init:function(parent,options){this._super.apply(this,arguments);this.options=options||{};},destroy:function(){if(this.selector){var $oldel=this.$el;this.setElement(null);}
this._super.apply(this,arguments);if(this.selector){this.$el=$oldel;this.el=$oldel[0];this.$target=this.$el;this.target=this.el;}},setElement:function(){this._super.apply(this,arguments);if(this.selector){this.$target=this.$el;this.target=this.el;}},_delegateEvents:function(){var self=this;var originalEvents=this.events;var events={};_.each(this.events,function(method,event){if(typeof method!=='string'){events[event]=method;return;}
var methodOptions=method.split(' ');if(methodOptions.length<=1){events[event]=method;return;}
var isAsync=_.contains(methodOptions,'async');if(!isAsync){events[event]=method;return;}
method=self.proxy(methodOptions[methodOptions.length-1]);if(_.str.startsWith(event,'click')){method=dom.makeButtonHandler(method);}else{method=dom.makeAsyncHandler(method);}
events[event]=method;});this.events=events;this._super.apply(this,arguments);this.events=originalEvents;},_getContext:function(extra,extraContext){var context;this.trigger_up('context_get',{extra:extra||false,context:extraContext,callback:function(ctx){context=ctx;},});return context;},});var registry={};registry._fixAppleCollapse=PublicWidget.extend({selector:'div[data-toggle="collapse"]',events:{'click':function(){},},});return{RootWidget:RootWidget,RootWidgetRegistry:RootWidgetRegistry,Widget:PublicWidget,registry:registry,};});;

/* /web_editor/static/src/js/frontend/loader.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_editor.loader',function(require){'use strict';var Wysiwyg=require('web_editor.wysiwyg.root');function load(parent,textarea,options){var loading=textarea.nextElementSibling;if(loading&&!loading.classList.contains('o_wysiwyg_loading')){loading=null;}
if(!textarea.value.match(/\S/)){textarea.value='<p><br/></p>';}
var wysiwyg=new Wysiwyg(parent,options);return wysiwyg.attachTo(textarea).then(()=>{if(loading){loading.parentNode.removeChild(loading);}
return wysiwyg;});}
return{load:load,};});;

/* /portal/static/src/js/portal.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.portal',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.portalDetails=publicWidget.Widget.extend({selector:'.o_portal_details',events:{'change select[name="country_id"]':'_onCountryChange',},start:function(){var def=this._super.apply(this,arguments);this.$state=this.$('select[name="state_id"]');this.$stateOptions=this.$state.filter(':enabled').find('option:not(:first)');this._adaptAddressForm();return def;},_adaptAddressForm:function(){var $country=this.$('select[name="country_id"]');var countryID=($country.val()||0);this.$stateOptions.detach();var $displayedState=this.$stateOptions.filter('[data-country_id='+countryID+']');var nb=$displayedState.appendTo(this.$state).show().length;this.$state.parent().toggle(nb>=1);},_onCountryChange:function(){this._adaptAddressForm();},});publicWidget.registry.portalSearchPanel=publicWidget.Widget.extend({selector:'.o_portal_search_panel',events:{'click .search-submit':'_onSearchSubmitClick','click .dropdown-item':'_onDropdownItemClick','keyup input[name="search"]':'_onSearchInputKeyup',},start:function(){var def=this._super.apply(this,arguments);this._adaptSearchLabel(this.$('.dropdown-item.active'));return def;},_adaptSearchLabel:function(elem){var $label=$(elem).clone();$label.find('span.nolabel').remove();this.$('input[name="search"]').attr('placeholder',$label.text().trim());},_search:function(){var search=$.deparam(window.location.search.substring(1));search['search_in']=this.$('.dropdown-item.active').attr('href').replace('#','');search['search']=this.$('input[name="search"]').val();window.location.search=$.param(search);},_onSearchSubmitClick:function(){this._search();},_onDropdownItemClick:function(ev){ev.preventDefault();var $item=$(ev.currentTarget);$item.closest('.dropdown-menu').find('.dropdown-item').removeClass('active');$item.addClass('active');this._adaptSearchLabel(ev.currentTarget);},_onSearchInputKeyup:function(ev){if(ev.keyCode===$.ui.keyCode.ENTER){this._search();}},});});;

/* /portal/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.chatter',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var time=require('web.time');var portalComposer=require('portal.composer');var qweb=core.qweb;var _t=core._t;var PortalChatter=publicWidget.Widget.extend({template:'portal.Chatter',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml'],events:{"click .o_portal_chatter_pager_btn":'_onClickPager',},init:function(parent,options){var self=this;this.options={};this._super.apply(this,arguments);_.each(options,function(val,key){self.options[_.str.underscored(key)]=val;});this.options=_.defaults(this.options,{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'message_count':0,'pager_step':10,'pager_scope':5,'pager_start':1,'is_user_public':true,'is_user_publisher':false,'hash':false,'pid':false,'domain':[],});this.set('messages',[]);this.set('message_count',this.options['message_count']);this.set('pager',{});this.set('domain',this.options['domain']);this._currentPage=this.options['pager_start'];},willStart:function(){return Promise.all([this._super.apply(this,arguments),this._chatterInit()]);},start:function(){this.on("change:messages",this,this._renderMessages);this.on("change:message_count",this,function(){this._renderMessageCount();this.set('pager',this._pager(this._currentPage));});this.on("change:pager",this,this._renderPager);this.on("change:domain",this,this._onChangeDomain);this.set('message_count',this.options['message_count']);this.set('messages',this.preprocessMessages(this.result['messages']));var defs=[];defs.push(this._super.apply(this,arguments));if(this.options['display_composer']){this._composer=new portalComposer.PortalComposer(this,this.options);defs.push(this._composer.replace(this.$('.o_portal_chatter_composer')));}
return Promise.all(defs);},messageFetch:function(domain){var self=this;return this._rpc({route:'/mail/chatter_fetch',params:self._messageFetchPrepareParams(),}).then(function(result){self.set('messages',self.preprocessMessages(result['messages']));self.set('message_count',result['message_count']);});},preprocessMessages:function(messages){_.each(messages,function(m){m['author_avatar_url']=_.str.sprintf('/web/image/%s/%s/author_avatar/50x50','mail.message',m.id);m['published_date_str']=_.str.sprintf(_t('Published on %s'),moment(time.str_to_datetime(m.date)).format('MMMM Do YYYY, h:mm:ss a'));});return messages;},_chatterInit:function(){var self=this;return this._rpc({route:'/mail/chatter_init',params:this._messageFetchPrepareParams()}).then(function(result){self.result=result;self.options=_.extend(self.options,self.result['options']||{});return result;});},_changeCurrentPage:function(page,domain){this._currentPage=page;var d=domain?domain:_.clone(this.get('domain'));this.set('domain',d);},_messageFetchPrepareParams:function(){var self=this;var data={'res_model':this.options['res_model'],'res_id':this.options['res_id'],'limit':this.options['pager_step'],'offset':(this._currentPage-1)*this.options['pager_step'],'allow_composer':this.options['allow_composer'],};if(self.options['token']){data['token']=self.options['token'];}
if(this.get('domain')){data['domain']=this.get('domain');}
return data;},_pager:function(page){page=page||1;var total=this.get('message_count');var scope=this.options['pager_scope'];var step=this.options['pager_step'];var pageCount=Math.ceil(parseFloat(total)/step);page=Math.max(1,Math.min(parseInt(page),pageCount));scope-=1;var pmin=Math.max(page-parseInt(Math.floor(scope/2)),1);var pmax=Math.min(pmin+scope,pageCount);if(pmax-scope>0){pmin=pmax-scope;}else{pmin=1;}
var pages=[];_.each(_.range(pmin,pmax+1),function(index){pages.push(index);});return{"page_count":pageCount,"offset":(page-1)*step,"page":page,"page_start":pmin,"page_previous":Math.max(pmin,page-1),"page_next":Math.min(pmax,page+1),"page_end":pmax,"pages":pages};},_renderMessages:function(){this.$('.o_portal_chatter_messages').html(qweb.render("portal.chatter_messages",{widget:this}));},_renderMessageCount:function(){this.$('.o_message_counter').replaceWith(qweb.render("portal.chatter_message_count",{widget:this}));},_renderPager:function(){this.$('.o_portal_chatter_pager').replaceWith(qweb.render("portal.pager",{widget:this}));},_onChangeDomain:function(){var self=this;this.messageFetch().then(function(){var p=self._currentPage;self.set('pager',self._pager(p));});},_onClickPager:function(ev){ev.preventDefault();var page=$(ev.currentTarget).data('page');this._changeCurrentPage(page);},});publicWidget.registry.portalChatter=publicWidget.Widget.extend({selector:'.o_portal_chatter',start:function(){var self=this;var defs=[this._super.apply(this,arguments)];var chatter=new PortalChatter(this,this.$el.data());defs.push(chatter.appendTo(this.$el));return Promise.all(defs).then(function(){if(window.location.hash==='#'+self.$el.attr('id')){$('html, body').scrollTop(self.$el.offset().top);}});},});return{PortalChatter:PortalChatter,};});;

/* /portal/static/src/js/portal_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.composer',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var publicWidget=require('web.public.widget');var qweb=core.qweb;var _t=core._t;var PortalComposer=publicWidget.Widget.extend({template:'portal.Composer',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml'],events:{'change .o_portal_chatter_file_input':'_onFileInputChange','click .o_portal_chatter_attachment_btn':'_onAttachmentButtonClick','click .o_portal_chatter_attachment_delete':'async _onAttachmentDeleteClick','click .o_portal_chatter_composer_btn':'async _onSubmitButtonClick',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.defaults(options||{},{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'token':false,'res_model':false,'res_id':false,});this.attachments=[];},start:function(){var self=this;this.$attachmentButton=this.$('.o_portal_chatter_attachment_btn');this.$fileInput=this.$('.o_portal_chatter_file_input');this.$sendButton=this.$('.o_portal_chatter_composer_btn');this.$attachments=this.$('.o_portal_chatter_composer_form .o_portal_chatter_attachments');this.$attachmentIds=this.$('.o_portal_chatter_attachment_ids');this.$attachmentTokens=this.$('.o_portal_chatter_attachment_tokens');return this._super.apply(this,arguments).then(function(){if(self.options.default_attachment_ids){self.attachments=self.options.default_attachment_ids||[];_.each(self.attachments,function(attachment){attachment.state='done';});self._updateAttachments();}
return Promise.resolve();});},_onAttachmentButtonClick:function(){this.$fileInput.click();},_onAttachmentDeleteClick:function(ev){var self=this;var attachmentId=$(ev.currentTarget).closest('.o_portal_chatter_attachment').data('id');var accessToken=_.find(this.attachments,{'id':attachmentId}).access_token;ev.preventDefault();ev.stopPropagation();this.$sendButton.prop('disabled',true);return this._rpc({route:'/portal/attachment/remove',params:{'attachment_id':attachmentId,'access_token':accessToken,},}).then(function(){self.attachments=_.reject(self.attachments,{'id':attachmentId});self._updateAttachments();self.$sendButton.prop('disabled',false);});},_onFileInputChange:function(){var self=this;this.$sendButton.prop('disabled',true);return Promise.all(_.map(this.$fileInput[0].files,function(file){return new Promise(function(resolve,reject){var data={'name':file.name,'file':file,'res_id':self.options.res_id,'res_model':self.options.res_model,'access_token':self.options.token,};ajax.post('/portal/attachment/add',data).then(function(attachment){attachment.state='pending';self.attachments.push(attachment);self._updateAttachments();resolve();}).guardedCatch(function(error){self.displayNotification({title:_t("Something went wrong."),message:_.str.sprintf(_t("The file <strong>%s</strong> could not be saved."),_.escape(file.name)),type:'warning',sticky:true,});resolve();});});})).then(function(){self.$sendButton.prop('disabled',false);});},_onSubmitButtonClick:function(){return new Promise(function(resolve,reject){});},_updateAttachments:function(){this.$attachmentIds.val(_.pluck(this.attachments,'id'));this.$attachmentTokens.val(_.pluck(this.attachments,'access_token'));this.$attachments.html(qweb.render('portal.Chatter.Attachments',{attachments:this.attachments,showDelete:true,}));},});return{PortalComposer:PortalComposer,};});;

/* /portal/static/src/js/portal_signature.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.signature_form',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var NameAndSignature=require('web.name_and_signature').NameAndSignature;var qweb=core.qweb;var _t=core._t;var SignatureForm=publicWidget.Widget.extend({template:'portal.portal_signature',xmlDependencies:['/portal/static/src/xml/portal_signature.xml'],events:{'click .o_portal_sign_submit':'async _onClickSignSubmit',},custom_events:{'signature_changed':'_onChangeSignature',},init:function(parent,options){this._super.apply(this,arguments);this.csrf_token=odoo.csrf_token;this.callUrl=options.callUrl||'';this.rpcParams=options.rpcParams||{};this.sendLabel=options.sendLabel||_t("Accept & Sign");this.nameAndSignature=new NameAndSignature(this,options.nameAndSignatureOptions||{});},start:function(){var self=this;this.$confirm_btn=this.$('.o_portal_sign_submit');this.$controls=this.$('.o_portal_sign_controls');var subWidgetStart=this.nameAndSignature.replace(this.$('.o_web_sign_name_and_signature'));return Promise.all([subWidgetStart,this._super.apply(this,arguments)]).then(function(){self.nameAndSignature.resetSignature();});},focusName:function(){this.nameAndSignature.focusName();},resetSignature:function(){return this.nameAndSignature.resetSignature();},_onClickSignSubmit:function(ev){var self=this;ev.preventDefault();if(!this.nameAndSignature.validateSignature()){return;}
var name=this.nameAndSignature.getName();var signature=this.nameAndSignature.getSignatureImage()[1];return this._rpc({route:this.callUrl,params:_.extend(this.rpcParams,{'name':name,'signature':signature,}),}).then(function(data){if(data.error){self.$('.o_portal_sign_error_msg').remove();self.$controls.prepend(qweb.render('portal.portal_signature_error',{widget:data}));}else if(data.success){var $success=qweb.render('portal.portal_signature_success',{widget:data});self.$el.empty().append($success);}
if(data.force_refresh){if(data.redirect_url){window.location=data.redirect_url;}else{window.location.reload();}
return new Promise(function(){});}});},_onChangeSignature:function(){var isEmpty=this.nameAndSignature.isSignatureEmpty();this.$confirm_btn.prop('disabled',isEmpty);},});publicWidget.registry.SignatureForm=publicWidget.Widget.extend({selector:'.o_portal_signature_form',start:function(){var hasBeenReset=false;var callUrl=this.$el.data('call-url');var nameAndSignatureOptions={defaultName:this.$el.data('default-name'),mode:this.$el.data('mode'),displaySignatureRatio:this.$el.data('signature-ratio'),signatureType:this.$el.data('signature-type'),};var sendLabel=this.$el.data('send-label');var form=new SignatureForm(this,{callUrl:callUrl,nameAndSignatureOptions:nameAndSignatureOptions,sendLabel:sendLabel,});this.$el.closest('.modal').on('shown.bs.modal',function(ev){if(!hasBeenReset){hasBeenReset=true;form.resetSignature();}else{form.focusName();}});return Promise.all([this._super.apply(this,arguments),form.appendTo(this.$el)]);},});return{SignatureForm:SignatureForm,};});;

/* /portal/static/src/js/portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.PortalSidebar',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var time=require('web.time');var _t=core._t;var PortalSidebar=publicWidget.Widget.extend({start:function(){this._setDelayLabel();return this._super.apply(this,arguments);},_setDelayLabel:function(){var $sidebarTimeago=this.$el.find('.o_portal_sidebar_timeago');_.each($sidebarTimeago,function(el){var dateTime=moment(time.auto_str_to_date($(el).attr('datetime'))),today=moment().startOf('day'),diff=dateTime.diff(today,'days',true),displayStr;if(diff===0){displayStr=_t('Due today');}else if(diff>0){displayStr=_.str.sprintf(_t('Due in %d days'),Math.abs(diff));}else{displayStr=_.str.sprintf(_t('%d days overdue'),Math.abs(diff));}
$(el).text(displayStr);});},_printIframeContent:function(href){if($.browser.mozilla){window.open(href,'_blank');return;}
if(!this.printContent){this.printContent=$('<iframe id="print_iframe_content" src="'+href+'" style="display:none"></iframe>');this.$el.append(this.printContent);this.printContent.on('load',function(){$(this).get(0).contentWindow.print();});}else{this.printContent.get(0).contentWindow.print();}},});return PortalSidebar;});;

/* /website/static/src/js/set_view_track.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.set_view_track',function(require){"use strict";var CustomizeMenu=require('website.customizeMenu');var Widget=require('web.Widget');var TrackPage=Widget.extend({template:'website.track_page',xmlDependencies:['/website/static/src/xml/track_page.xml'],events:{'change #switch-track-page':'_onTrackChange',},start:function(){this.$input=this.$('#switch-track-page');this._isTracked().then((data)=>{if(data[0]['track']){this.track=true;this.$input.attr('checked','checked');}else{this.track=false;}});},_isTracked:function(val){var viewid=$('html').data('viewid');if(!viewid){return Promise.reject();}else{return this._rpc({model:'ir.ui.view',method:'read',args:[[viewid],['track']],});}},_onTrackChange:function(ev){var checkboxValue=this.$input.is(':checked');if(checkboxValue!==this.track){this.track=checkboxValue;this._trackPage(checkboxValue);}},_trackPage:function(val){var viewid=$('html').data('viewid');if(!viewid){return Promise.reject();}else{return this._rpc({model:'ir.ui.view',method:'write',args:[[viewid],{track:val}],});}},});CustomizeMenu.include({_loadCustomizeOptions:function(){var self=this;var def=this._super.apply(this,arguments);return def.then(function(){if(!self.__trackpageLoaded){self.__trackpageLoaded=true;self.trackPage=new TrackPage(self);self.trackPage.appendTo(self.$el.children('.dropdown-menu'));}});},});});;

/* /website/static/lib/jstz.min.js defined in bundle 'web.assets_frontend_lazy' */
!function(e){var a=function(){"use strict";var e="s",s={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},i=function(e){var a=-e.getTimezoneOffset();return null!==a?a:0},r=function(){var a=i(new Date(s.BASELINE_YEAR,0,2)),r=i(new Date(s.BASELINE_YEAR,5,2)),n=a-r;return 0>n?a+",1":n>0?r+",1,"+e:a+",0"},n=function(){var e,a;if("undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat&&(e=Intl.DateTimeFormat(),"undefined"!=typeof e&&"undefined"!=typeof e.resolvedOptions))return a=e.resolvedOptions().timeZone,a&&(a.indexOf("/")>-1||"UTC"===a)?a:void 0},o=function(e){for(var a=new Date(e,0,1,0,0,1,0).getTime(),s=new Date(e,12,31,23,59,59).getTime(),i=a,r=new Date(i).getTimezoneOffset(),n=null,o=null;s-864e5>i;){var t=new Date(i),A=t.getTimezoneOffset();A!==r&&(r>A&&(n=t),A>r&&(o=t),r=A),i+=864e5}return n&&o?{s:u(n).getTime(),e:u(o).getTime()}:!1},u=function l(e,a,i){"undefined"==typeof a&&(a=s.DAY,i=s.HOUR);for(var r=new Date(e.getTime()-a).getTime(),n=e.getTime()+a,o=new Date(r).getTimezoneOffset(),u=r,t=null;n-i>u;){var A=new Date(u),c=A.getTimezoneOffset();if(c!==o){t=A;break}u+=i}return a===s.DAY?l(t,s.HOUR,s.MINUTE):a===s.HOUR?l(t,s.MINUTE,s.SECOND):t},t=function(e,a,s,i){if("N/A"!==s)return s;if("Asia/Beirut"===a){if("Africa/Cairo"===i.name&&13983768e5===e[6].s&&14116788e5===e[6].e)return 0;if("Asia/Jerusalem"===i.name&&13959648e5===e[6].s&&14118588e5===e[6].e)return 0}else if("America/Santiago"===a){if("America/Asuncion"===i.name&&14124816e5===e[6].s&&1397358e6===e[6].e)return 0;if("America/Campo_Grande"===i.name&&14136912e5===e[6].s&&13925196e5===e[6].e)return 0}else if("America/Montevideo"===a){if("America/Sao_Paulo"===i.name&&14136876e5===e[6].s&&1392516e6===e[6].e)return 0}else if("Pacific/Auckland"===a&&"Pacific/Fiji"===i.name&&14142456e5===e[6].s&&13961016e5===e[6].e)return 0;return s},A=function(e,i){for(var r=function(a){for(var r=0,n=0;n<e.length;n++)if(a.rules[n]&&e[n]){if(!(e[n].s>=a.rules[n].s&&e[n].e<=a.rules[n].e)){r="N/A";break}if(r=0,r+=Math.abs(e[n].s-a.rules[n].s),r+=Math.abs(a.rules[n].e-e[n].e),r>s.MAX_SCORE){r="N/A";break}}return r=t(e,i,r,a)},n={},o=a.olson.dst_rules.zones,u=o.length,A=s.AMBIGUITIES[i],c=0;u>c;c++){var m=o[c],l=r(o[c]);"N/A"!==l&&(n[m.name]=l)}for(var f in n)if(n.hasOwnProperty(f))for(var d=0;d<A.length;d++)if(A[d]===f)return f;return i},c=function(e){var s=function(){for(var e=[],s=0;s<a.olson.dst_rules.years.length;s++){var i=o(a.olson.dst_rules.years[s]);e.push(i)}return e},i=function(e){for(var a=0;a<e.length;a++)if(e[a]!==!1)return!0;return!1},r=s(),n=i(r);return n?A(r,e):e},m=function(){var e=n();return e||(e=a.olson.timezones[r()],"undefined"!=typeof s.AMBIGUITIES[e]&&(e=c(e))),{name:function(){return e}}};return{determine:m}}();a.olson=a.olson||{},a.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},a.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],function(){return a}):"undefined"==typeof e?window.jstz=a:e.jstz=a}();;

/* /website/static/src/js/utils.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.utils',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var qweb=core.qweb;function loadAnchors(url){return new Promise(function(resolve,reject){if(url!==window.location.pathname&&url[0]!=='#'){$.get(window.location.origin+url).then(resolve,reject);}else{resolve(document.body.outerHTML);}}).then(function(response){return _.map($(response).find('[id][data-anchor=true]'),function(el){return'#'+el.id;});});}
function autocompleteWithPages(self,$input){$input.autocomplete({source:function(request,response){if(request.term[0]==='#'){loadAnchors(request.term).then(function(anchors){response(anchors);});}else{return self._rpc({model:'website',method:'search_pages',args:[null,request.term],kwargs:{limit:15,},}).then(function(exists){var rs=_.map(exists,function(r){return r.loc;});response(rs.sort());});}},close:function(){self.trigger_up('website_url_chosen');},});}
function onceAllImagesLoaded($element){var defs=_.map($element.find('img').addBack('img'),function(img){if(img.complete){return;}
var def=new Promise(function(resolve,reject){$(img).one('load',function(){resolve();});});return def;});return Promise.all(defs);}
function prompt(options,_qweb){if(typeof options==='string'){options={text:options};}
var xmlDef;if(_.isUndefined(_qweb)){_qweb='website.prompt';xmlDef=ajax.loadXML('/website/static/src/xml/website.xml',core.qweb);}
options=_.extend({window_title:'',field_name:'','default':'',init:function(){},},options||{});var type=_.intersection(Object.keys(options),['input','textarea','select']);type=type.length?type[0]:'input';options.field_type=type;options.field_name=options.field_name||options[type];var def=new Promise(function(resolve,reject){Promise.resolve(xmlDef).then(function(){var dialog=$(qweb.render(_qweb,options)).appendTo('body');options.$dialog=dialog;var field=dialog.find(options.field_type).first();field.val(options['default']);field.fillWith=function(data){if(field.is('select')){var select=field[0];data.forEach(function(item){select.options[select.options.length]=new window.Option(item[1],item[0]);});}else{field.val(data);}};var init=options.init(field,dialog);Promise.resolve(init).then(function(fill){if(fill){field.fillWith(fill);}
dialog.modal('show');field.focus();dialog.on('click','.btn-primary',function(){var backdrop=$('.modal-backdrop');resolve({val:field.val(),field:field,dialog:dialog});dialog.modal('hide').remove();backdrop.remove();});});dialog.on('hidden.bs.modal',function(){var backdrop=$('.modal-backdrop');reject();dialog.remove();backdrop.remove();});if(field.is('input[type="text"], select')){field.keypress(function(e){if(e.which===13){e.preventDefault();dialog.find('.btn-primary').trigger('click');}});}});});return def;}
function websiteDomain(self){var websiteID;self.trigger_up('context_get',{callback:function(ctx){websiteID=ctx['website_id'];},});return['|',['website_id','=',false],['website_id','=',websiteID]];}
return{loadAnchors:loadAnchors,autocompleteWithPages:autocompleteWithPages,onceAllImagesLoaded:onceAllImagesLoaded,prompt:prompt,websiteDomain:websiteDomain,};});;

/* /website/static/src/js/content/website_root.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.root',function(require){'use strict';var core=require('web.core');var Dialog=require('web.Dialog');var publicRootData=require('web.public.root');require("web.zoomodoo");var _t=core._t;var websiteRootRegistry=publicRootData.publicRootRegistry;var WebsiteRoot=publicRootData.PublicRoot.extend({events:_.extend({},publicRootData.PublicRoot.prototype.events||{},{'click .js_change_lang':'_onLangChangeClick','click .js_publish_management .js_publish_btn':'_onPublishBtnClick','click .js_multi_website_switch':'_onWebsiteSwitch','shown.bs.modal':'_onModalShown',}),custom_events:_.extend({},publicRootData.PublicRoot.prototype.custom_events||{},{'ready_to_clean_for_save':'_onWidgetsStopRequest',seo_object_request:'_onSeoObjectRequest',}),start:function(){if(!this.$('.js_change_lang').length){var $links=this.$('ul.js_language_selector li a:not([data-oe-id])');var m=$(_.min($links,function(l){return $(l).attr('href').length;})).attr('href');$links.each(function(){var $link=$(this);var t=$link.attr('href');var l=(t===m)?"default":t.split('/')[1];$link.data('lang',l).addClass('js_change_lang');});}
this.$('.zoomable img[data-zoom]').zoomOdoo();return this._super.apply(this,arguments);},_getContext:function(context){var html=document.documentElement;return _.extend({'website_id':html.getAttribute('data-website-id')|0,},this._super.apply(this,arguments));},_getExtraContext:function(context){var html=document.documentElement;return _.extend({'editable':!!(html.dataset.editable||$('[data-oe-model]').length),'translatable':!!html.dataset.translatable,'edit_translations':!!html.dataset.edit_translations,},this._super.apply(this,arguments));},_getPublicWidgetsRegistry:function(options){var registry=this._super.apply(this,arguments);if(options.editableMode){return _.pick(registry,function(PublicWidget){return!PublicWidget.prototype.disabledInEditableMode;});}
return registry;},_onWidgetsStartRequest:function(ev){ev.data.options=_.clone(ev.data.options||{});ev.data.options.editableMode=ev.data.editableMode;this._super.apply(this,arguments);},_onLangChangeClick:function(ev){ev.preventDefault();var $target=$(ev.target);var redirect={lang:$target.data('url_code'),url:encodeURIComponent($target.attr('href').replace(/[&?]edit_translations[^&?]+/,'')),hash:encodeURIComponent(window.location.hash)};window.location.href=_.str.sprintf("/website/lang/%(lang)s?r=%(url)s%(hash)s",redirect);},_onSeoObjectRequest:function(ev){var res=this._unslugHtmlDataObject('seo-object');ev.data.callback(res);},_unslugHtmlDataObject:function(dataAttr){var repr=$('html').data(dataAttr);var match=repr&&repr.match(/(.+)\((\d+),(.*)\)/);if(!match){return null;}
return{model:match[1],id:match[2]|0,};},_onPublishBtnClick:function(ev){ev.preventDefault();var self=this;var $data=$(ev.currentTarget).parents(".js_publish_management:first");this._rpc({route:$data.data('controller')||'/website/publish',params:{id:+$data.data('id'),object:$data.data('object'),},}).then(function(result){$data.toggleClass("css_unpublished css_published");$data.find('input').prop("checked",result);$data.parents("[data-publish]").attr("data-publish",+result?'on':'off');}).guardedCatch(function(err,data){data=data||{statusText:err.message.message};return new Dialog(self,{title:data.data?data.data.arguments[0]:"",$content:$('<div/>',{html:(data.data?data.data.arguments[1]:data.statusText)
+'<br/>'
+_.str.sprintf(_t('It might be possible to edit the relevant items or fix the issue in <a href="%s">the classic Odoo interface</a>'),'/web#model='+$data.data('object')+'&id='+$data.data('id')),}),}).open();});},_onWebsiteSwitch:function(ev){var websiteId=ev.currentTarget.getAttribute('website-id');var websiteDomain=ev.currentTarget.getAttribute('domain');var url=window.location.href;if(websiteDomain&&window.location.hostname!==websiteDomain){var path=window.location.pathname+window.location.search+window.location.hash;url=websiteDomain+path;}
window.location.href=$.param.querystring(url,{'fw':websiteId});},_onModalShown:function(ev){$(ev.target).addClass('modal_shown');},});return{WebsiteRoot:WebsiteRoot,websiteRootRegistry:websiteRootRegistry,};});;

/* /website/static/src/js/content/compatibility.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.compatibility',function(require){'use strict';require('web.dom_ready');var browser=_.findKey($.browser,function(v){return v===true;});if($.browser.mozilla&&+$.browser.version.replace(/^([0-9]+\.[0-9]+).*/,'\$1')<20){browser='msie';}
browser+=(','+$.browser.version);var mobileRegex=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;if(mobileRegex.test(window.navigator.userAgent.toLowerCase())){browser+=',mobile';}
document.documentElement.setAttribute('data-browser',browser);var htmlStyle=document.documentElement.style;var isFlexSupported=(('flexWrap'in htmlStyle)||('WebkitFlexWrap'in htmlStyle)||('msFlexWrap'in htmlStyle));if(!isFlexSupported){document.documentElement.setAttribute('data-no-flex','');}
return{browser:browser,isFlexSupported:isFlexSupported,};});;

/* /website/static/src/js/content/lazy_template_call.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.lazy_template_call',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.LazyTemplateRenderer=publicWidget.Widget.extend({selector:'#wrapwrap:has([data-oe-call])',start:function(){var def=this._super.apply(this,arguments);var $oeCalls=this.$('[data-oe-call]');var oeCalls=_.uniq($oeCalls.map(function(){return $(this).data('oe-call');}).get());if(!oeCalls.length){return def;}
var renderDef=this._rpc({route:'/website/multi_render',params:{'ids_or_xml_ids':oeCalls,},}).then(function(data){_.each(data,function(d,k){var $data=$(d).addClass('o_block_'+k);$oeCalls.filter('[data-oe-call="'+k+'"]').each(function(){$(this).replaceWith($data.clone());});});});return Promise.all([def,renderDef]);},});});;

/* /website/static/src/js/content/menu.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.menu',function(require){'use strict';var dom=require('web.dom');var publicWidget=require('web.public.widget');var wUtils=require('website.utils');publicWidget.registry.affixMenu=publicWidget.Widget.extend({selector:'header.o_affix_enabled',start:function(){var def=this._super.apply(this,arguments);var self=this;this.$headerClone=this.$target.clone().addClass('o_header_affix affix').removeClass('o_affix_enabled').removeAttr('id');this.$headerClone.insertAfter(this.$target);this.$headers=this.$target.add(this.$headerClone);this.$dropdowns=this.$headers.find('.dropdown');this.$dropdownMenus=this.$headers.find('.dropdown-menu');this.$navbarCollapses=this.$headers.find('.navbar-collapse');this._adaptDefaultOffset();wUtils.onceAllImagesLoaded(this.$headerClone).then(function(){self._adaptDefaultOffset();});_.each(this.$headerClone.find('[data-toggle="collapse"]'),function(el){var $source=$(el);var targetIDSelector=$source.attr('data-target');var $target=self.$headerClone.find(targetIDSelector);$source.attr('data-target',targetIDSelector+'_clone');$target.attr('id',targetIDSelector.substr(1)+'_clone');});this.$headerClone.find('div.navbar-collapse').on('show.bs.collapse',function(){$(document.body).addClass('overflow-hidden');}).on('hide.bs.collapse',function(){$(document.body).removeClass('overflow-hidden');});$(window).on('resize.affixMenu scroll.affixMenu',_.throttle(this._onWindowUpdate.bind(this),200));setTimeout(this._onWindowUpdate.bind(this),0);return def.then(function(){self.trigger_up('widgets_start_request',{$target:self.$headerClone,});});},destroy:function(){if(this.$headerClone){this.$headerClone.remove();$(window).off('.affixMenu');}
this._super.apply(this,arguments);},_adaptDefaultOffset:function(){var bottom=this.$target.offset().top+this._getHeaderHeight();this.$headerClone.css('margin-top',Math.min(-200,-bottom)+'px');},_getHeaderHeight:function(){return this.$headerClone.outerHeight();},_onWindowUpdate:function(){if(this.$navbarCollapses.hasClass('show')){return;}
var wOffset=$(window).scrollTop();var hOffset=this.$target.scrollTop();this.$headerClone.toggleClass('affixed',wOffset>(hOffset+300));this.$dropdowns.add(this.$dropdownMenus).removeClass('show');this.$navbarCollapses.removeClass('show').attr('aria-expanded',false);},});publicWidget.registry.autohideMenu=publicWidget.Widget.extend({selector:'header #top_menu',start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.noAutohide=this.$el.closest('.o_no_autohide_menu').length;if(!this.noAutohide){var $navbar=this.$el.closest('.navbar');defs.push(wUtils.onceAllImagesLoaded($navbar));var $window=$(window);$window.on('load.autohideMenu',function(){$window.trigger('resize');});}
return Promise.all(defs).then(function(){if(!self.noAutohide){dom.initAutoMoreMenu(self.$el,{unfoldable:'.divider, .divider ~ li'});}
self.$el.removeClass('o_menu_loading');});},destroy:function(){this._super.apply(this,arguments);if(!this.noAutohide){$(window).off('.autohideMenu');dom.destroyAutoMoreMenu(this.$el);}},});publicWidget.registry.menuDirection=publicWidget.Widget.extend({selector:'header .navbar .nav',events:{'show.bs.dropdown':'_onDropdownShow',},start:function(){this.defaultAlignment=this.$el.is('.ml-auto, .ml-auto ~ *')?'right':'left';return this._super.apply(this,arguments);},_checkOpening:function(alignment,liOffset,liWidth,menuWidth,windowWidth){if(alignment==='left'){return(liOffset+menuWidth<=windowWidth);}else{return(liOffset+liWidth-menuWidth>=0);}},_onDropdownShow:function(ev){var $li=$(ev.target);var $menu=$li.children('.dropdown-menu');var liOffset=$li.offset().left;var liWidth=$li.outerWidth();var menuWidth=$menu.outerWidth();var windowWidth=$(window).outerWidth();$menu.removeClass('dropdown-menu-left dropdown-menu-right');var alignment=this.defaultAlignment;if($li.nextAll(':visible').length===0){alignment='right';}
for(var i=0;i<2;i++){if(!this._checkOpening(alignment,liOffset,liWidth,menuWidth,windowWidth)){alignment=(alignment==='left'?'right':'left');}}
$menu.addClass('dropdown-menu-'+alignment);},});});;

/* /website/static/src/js/content/snippets.animation.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.snippets.animation',function(require){'use strict';var Class=require('web.Class');var config=require('web.config');var core=require('web.core');var mixins=require('web.mixins');var publicWidget=require('web.public.widget');var utils=require('web.utils');var qweb=core.qweb;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame;if(!window.performance||!window.performance.now){window.performance={now:function(){return Date.now();}};}
publicWidget.Widget.include({disabledInEditableMode:true,edit_events:null,read_events:null,init:function(parent,options){this._super.apply(this,arguments);this.editableMode=this.options.editableMode||false;var extraEvents=this.editableMode?this.edit_events:this.read_events;if(extraEvents){this.events=_.extend({},this.events||{},extraEvents);}},});var AnimationEffect=Class.extend(mixins.ParentedMixin,{init:function(parent,updateCallback,startEvents,$startTarget,options){mixins.ParentedMixin.init.call(this);this.setParent(parent);options=options||{};this._minFrameTime=1000/(options.maxFPS||100);this._updateCallback=updateCallback;this.startEvents=startEvents||'scroll';this.$startTarget=$($startTarget||window);if(options.getStateCallback){this._getStateCallback=options.getStateCallback;}else if(this.startEvents==='scroll'&&this.$startTarget[0]===window){this._getStateCallback=function(){return window.pageYOffset;};}else if(this.startEvents==='resize'&&this.$startTarget[0]===window){this._getStateCallback=function(){return{width:window.innerWidth,height:window.innerHeight,};};}else{this._getStateCallback=function(){return undefined;};}
this.endEvents=options.endEvents||false;this.$endTarget=options.$endTarget?$(options.$endTarget):this.$startTarget;this._updateCallback=this._updateCallback.bind(parent);this._getStateCallback=this._getStateCallback.bind(parent);this._uid='_animationEffect'+_.uniqueId();this.startEvents=_processEvents(this.startEvents,this._uid);if(this.endEvents){this.endEvents=_processEvents(this.endEvents,this._uid);}
function _processEvents(events,namespace){events=events.split(' ');return _.each(events,function(e,index){events[index]+=('.'+namespace);}).join(' ');}},destroy:function(){mixins.ParentedMixin.destroy.call(this);this.stop();},start:function(){this._paused=false;this._rafID=window.requestAnimationFrame((function(t){this._update(t);this._paused=true;}).bind(this));if(this.endEvents){this.$startTarget.on(this.startEvents,(function(e){if(this._paused){_.defer(this.play.bind(this,e));}}).bind(this));this.$endTarget.on(this.endEvents,(function(){if(!this._paused){_.defer(this.pause.bind(this));}}).bind(this));}else{var pauseTimer=null;this.$startTarget.on(this.startEvents,_.throttle((function(e){this.play(e);clearTimeout(pauseTimer);pauseTimer=_.delay((function(){this.pause();pauseTimer=null;}).bind(this),2000);}).bind(this),250,{trailing:false}));}},stop:function(){this.$startTarget.off(this.startEvents);if(this.endEvents){this.$endTarget.off(this.endEvents);}
this.pause();},play:function(e){this._newEvent=e;if(!this._paused){return;}
this._paused=false;this._rafID=window.requestAnimationFrame(this._update.bind(this));this._lastUpdateTimestamp=undefined;},pause:function(){if(this._paused){return;}
this._paused=true;window.cancelAnimationFrame(this._rafID);this._lastUpdateTimestamp=undefined;},_update:function(timestamp){if(this._paused){return;}
this._rafID=window.requestAnimationFrame(this._update.bind(this));var elapsedTime=0;if(this._lastUpdateTimestamp){elapsedTime=timestamp-this._lastUpdateTimestamp;if(elapsedTime<this._minFrameTime){return;}}
var animationState=this._getStateCallback(elapsedTime,this._newEvent);if(!this._newEvent&&animationState!==undefined&&_.isEqual(animationState,this._animationLastState)){return;}
this._animationLastState=animationState;this._updateCallback(this._animationLastState,elapsedTime,this._newEvent);this._lastUpdateTimestamp=timestamp;this._newEvent=undefined;},});var Animation=publicWidget.Widget.extend({maxFPS:100,effects:[],start:function(){this._prepareEffects();_.each(this._animationEffects,function(effect){effect.start();});return this._super.apply(this,arguments);},_prepareEffects:function(){this._animationEffects=[];var self=this;_.each(this.effects,function(desc){self._addEffect(self[desc.update],desc.startEvents,_findTarget(desc.startTarget),{getStateCallback:desc.getState&&self[desc.getState],endEvents:desc.endEvents||undefined,$endTarget:_findTarget(desc.endTarget),maxFPS:self.maxFPS,});function _findTarget(selector){if(selector){if(selector==='selector'){return self.$target;}
return self.$(selector);}
return undefined;}});},_addEffect:function(updateCallback,startEvents,$startTarget,options){this._animationEffects.push(new AnimationEffect(this,updateCallback,startEvents,$startTarget,options));},});var registry=publicWidget.registry;registry.slider=publicWidget.Widget.extend({selector:'.carousel',disabledInEditableMode:false,edit_events:{'slid.bs.carousel':'_onEditionSlide',},start:function(){if(!this.editableMode){this.$('img').on('load.slider',this._onImageLoaded.bind(this));this._computeHeights();}
this.$target.carousel();return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$('img').off('.slider');this.$target.carousel('pause');this.$target.removeData('bs.carousel');_.each(this.$('.carousel-item'),function(el){$(el).css('min-height','');});},_computeHeights:function(){var maxHeight=0;var $items=this.$('.carousel-item');_.each($items,function(el){var $item=$(el);var isActive=$item.hasClass('active');$item.addClass('active');var height=$item.outerHeight();if(height>maxHeight){maxHeight=height;}
$item.toggleClass('active',isActive);});_.each($items,function(el){$(el).css('min-height',maxHeight);});},_onEditionSlide:function(){this._computeHeights();},_onImageLoaded:function(){this._computeHeights();},});registry.parallax=Animation.extend({selector:'.parallax',disabledInEditableMode:false,effects:[{startEvents:'scroll',update:'_onWindowScroll',}],start:function(){this._rebuild();$(window).on('resize.animation_parallax',_.debounce(this._rebuild.bind(this),500));return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);$(window).off('.animation_parallax');},_rebuild:function(){if(!this.$bg||!this.$bg.length){this.$bg=this.$('> .s_parallax_bg');if(!this.$bg.length){this.$bg=$('<span/>',{class:'s_parallax_bg'+(this.$target.hasClass('oe_custom_bg')?' oe_custom_bg':''),}).prependTo(this.$target);}}
var urlTarget=this.$target.css('background-image');if(urlTarget!=='none'){this.$bg.css('background-image',urlTarget);}
this.$target.css('background-image','none');this.speed=parseFloat(this.$target.attr('data-scroll-background-ratio')||0);this.$target.toggleClass('s_parallax_is_fixed',this.speed===1);var noParallaxSpeed=(this.speed===0||this.speed===1);this.$target.toggleClass('s_parallax_no_overflow_hidden',noParallaxSpeed);if(noParallaxSpeed){this.$bg.css({transform:'',top:'',bottom:'',});return;}
this.viewport=document.body.clientHeight-$('#wrapwrap').position().top;this.visibleArea=[this.$target.offset().top];this.visibleArea.push(this.visibleArea[0]+this.$target.innerHeight()+this.viewport);this.ratio=this.speed*(this.viewport/10);this.$bg.css({top:-this.ratio,bottom:-this.ratio,});},_onWindowScroll:function(scrollOffset){if(this.speed===0||this.speed===1){return;}
var vpEndOffset=scrollOffset+this.viewport;if(vpEndOffset>=this.visibleArea[0]&&vpEndOffset<=this.visibleArea[1]){this.$bg.css('transform','translateY('+_getNormalizedPosition.call(this,vpEndOffset)+'px)');}
function _getNormalizedPosition(pos){var r=(pos-this.visibleArea[1])/(this.visibleArea[0]-this.visibleArea[1]);return Math.round(this.ratio*(2*r-1));}},});registry.share=publicWidget.Widget.extend({selector:'.s_share, .oe_share',start:function(){var urlRegex=/(\?(?:|.*&)(?:u|url|body)=)(.*?)(&|#|$)/;var titleRegex=/(\?(?:|.*&)(?:title|text|subject)=)(.*?)(&|#|$)/;var url=encodeURIComponent(window.location.href);var title=encodeURIComponent($('title').text());this.$('a').each(function(){var $a=$(this);$a.attr('href',function(i,href){return href.replace(urlRegex,function(match,a,b,c){return a+url+c;}).replace(titleRegex,function(match,a,b,c){return a+title+c;});});if($a.attr('target')&&$a.attr('target').match(/_blank/i)&&!$a.closest('.o_editable').length){$a.on('click',function(){window.open(this.href,'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=550,width=600');return false;});}});return this._super.apply(this,arguments);},});registry.mediaVideo=publicWidget.Widget.extend({selector:'.media_iframe_video',start:function(){var def=this._super.apply(this,arguments);if(this.$target.children('iframe').length){return def;}
this.$target.empty();this.$target.append('<div class="css_editable_mode_display">&nbsp;</div>'+'<div class="media_iframe_video_size">&nbsp;</div>');this.$target.append($('<iframe/>',{src:_.escape(this.$target.data('oe-expression')||this.$target.data('src')),frameborder:'0',allowfullscreen:'allowfullscreen',sandbox:'allow-scripts allow-same-origin',}));return def;},});registry.backgroundVideo=publicWidget.Widget.extend({selector:'.o_background_video',xmlDependencies:['/website/static/src/xml/website.background.video.xml'],disabledInEditableMode:false,start:function(){var proms=[this._super(...arguments)];this.videoSrc=this.el.dataset.bgVideoSrc;this.iframeID=_.uniqueId('o_bg_video_iframe_');this.isYoutubeVideo=this.videoSrc.indexOf('youtube')>=0;this.isMobileEnv=config.device.size_class<=config.device.SIZES.LG&&config.device.touch;if(this.isYoutubeVideo&&this.isMobileEnv){this.videoSrc=this.videoSrc+"&enablejsapi=1";if(!window.YT){var oldOnYoutubeIframeAPIReady=window.onYouTubeIframeAPIReady;proms.push(new Promise(resolve=>{window.onYouTubeIframeAPIReady=()=>{if(oldOnYoutubeIframeAPIReady){oldOnYoutubeIframeAPIReady();}
return resolve();};}));$('<script/>',{src:'https://www.youtube.com/iframe_api',}).appendTo('head');}}
var throttledUpdate=_.throttle(()=>this._adjustIframe(),50);var $dropdownMenu=this.$el.closest('.dropdown-menu');if($dropdownMenu.length){this.$dropdownParent=$dropdownMenu.parent();this.$dropdownParent.on('shown.bs.dropdown.backgroundVideo',throttledUpdate);}
$(window).on('resize.'+this.iframeID,throttledUpdate);return Promise.all(proms).then(()=>this._appendBgVideo());},destroy:function(){this._super.apply(this,arguments);if(this.$dropdownParent){this.$dropdownParent.off('.backgroundVideo');}
$(window).off('resize.'+this.iframeID);if(this.$bgVideoContainer){this.$bgVideoContainer.remove();}},_adjustIframe:function(){if(!this.$iframe){return;}
this.$iframe.removeClass('show');var wrapperWidth=this.$target.innerWidth();var wrapperHeight=this.$target.innerHeight();var relativeRatio=(wrapperWidth/wrapperHeight)/(16/9);var style={};if(relativeRatio>=1.0){style['width']='100%';style['height']=(relativeRatio*100)+'%';style['left']='0';style['top']=(-(relativeRatio-1.0)/2*100)+'%';}else{style['width']=((1/relativeRatio)*100)+'%';style['height']='100%';style['left']=(-((1/relativeRatio)-1.0)/2*100)+'%';style['top']='0';}
this.$iframe.css(style);void this.$iframe[0].offsetWidth;this.$iframe.addClass('show');},_appendBgVideo:function(){var $oldContainer=this.$bgVideoContainer||this.$('> .o_bg_video_container');this.$bgVideoContainer=$(qweb.render('website.background.video',{videoSrc:this.videoSrc,iframeID:this.iframeID,}));this.$iframe=this.$bgVideoContainer.find('.o_bg_video_iframe');this.$iframe.one('load',()=>{this.$bgVideoContainer.find('.o_bg_video_loading').remove();});this.$bgVideoContainer.prependTo(this.$target);$oldContainer.remove();this._adjustIframe();if(this.isMobileEnv&&this.isYoutubeVideo){new window.YT.Player(this.iframeID,{events:{onReady:ev=>ev.target.playVideo(),}});}},});registry.ul=publicWidget.Widget.extend({selector:'ul.o_ul_folded, ol.o_ul_folded',events:{'click .o_ul_toggle_next':'_onToggleNextClick','click .o_ul_toggle_self':'_onToggleSelfClick',},_onToggleNextClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').next().toggleClass('o_close');},_onToggleSelfClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').find('ul,ol').toggleClass('o_close');},});registry.gallery=publicWidget.Widget.extend({selector:'.o_gallery:not(.o_slideshow)',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],events:{'click img':'_onClickImg',},_onClickImg:function(ev){var self=this;var $cur=$(ev.currentTarget);var urls=[];var idx=undefined;var milliseconds=undefined;var params=undefined;var $images=$cur.closest('.o_gallery').find('img');var size=0.8;var dimensions={min_width:Math.round(window.innerWidth*size*0.9),min_height:Math.round(window.innerHeight*size),max_width:Math.round(window.innerWidth*size*0.9),max_height:Math.round(window.innerHeight*size),width:Math.round(window.innerWidth*size*0.9),height:Math.round(window.innerHeight*size)};$images.each(function(){urls.push($(this).attr('src'));});var $img=($cur.is('img')===true)?$cur:$cur.closest('img');idx=urls.indexOf($img.attr('src'));milliseconds=$cur.closest('.o_gallery').data('interval')||false;var $modal=$(qweb.render('website.gallery.slideshow.lightbox',{srcs:urls,index:idx,dim:dimensions,interval:milliseconds,id:_.uniqueId('slideshow_'),}));$modal.modal({keyboard:true,backdrop:true,});$modal.on('hidden.bs.modal',function(){$(this).hide();$(this).siblings().filter('.modal-backdrop').remove();$(this).remove();});$modal.find('.modal-content, .modal-body.o_slideshow').css('height','100%');$modal.appendTo(document.body);$modal.one('shown.bs.modal',function(){self.trigger_up('widgets_start_request',{editableMode:false,$target:$modal.find('.modal-body.o_slideshow'),});});},});registry.gallerySlider=publicWidget.Widget.extend({selector:'.o_slideshow',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],disabledInEditableMode:false,start:function(){var self=this;this.$carousel=this.$target.is('.carousel')?this.$target:this.$target.find('.carousel');this.$indicator=this.$carousel.find('.carousel-indicators');this.$prev=this.$indicator.find('li.o_indicators_left').css('visibility','');this.$next=this.$indicator.find('li.o_indicators_right').css('visibility','');var $lis=this.$indicator.find('li[data-slide-to]');var nbPerPage=Math.floor(this.$indicator.width()/$lis.first().outerWidth(true))-3;var realNbPerPage=nbPerPage||1;var nbPages=Math.ceil($lis.length/realNbPerPage);var index;var page;update();function hide(){$lis.each(function(i){$(this).toggleClass('d-none',i<page*nbPerPage||i>=(page+1)*nbPerPage);});if(self.editableMode){return;}
if(page<=0){self.$prev.detach();}else{self.$prev.prependTo(self.$indicator);}
if(page>=nbPages-1){self.$next.detach();}else{self.$next.appendTo(self.$indicator);}}
function update(){index=$lis.index($lis.filter('.active'))||0;page=Math.floor(index/realNbPerPage);hide();}
this.$carousel.on('slide.bs.carousel.gallery_slider',function(){setTimeout(function(){var $item=self.$carousel.find('.carousel-inner .carousel-item-prev, .carousel-inner .carousel-item-next');var index=$item.index();$lis.removeClass('active').filter('[data-slide-to="'+index+'"]').addClass('active');},0);});this.$indicator.on('click.gallery_slider','> li:not([data-slide-to])',function(){page+=($(this).hasClass('o_indicators_left')?-1:1);page=Math.max(0,Math.min(nbPages-1,page));self.$carousel.carousel(page*realNbPerPage);hide();});this.$carousel.on('slid.bs.carousel.gallery_slider',update);return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);if(!this.$indicator){return;}
this.$prev.prependTo(this.$indicator);this.$next.appendTo(this.$indicator);this.$carousel.off('.gallery_slider');this.$indicator.off('.gallery_slider');},});registry.socialShare=publicWidget.Widget.extend({selector:'.oe_social_share',xmlDependencies:['/website/static/src/xml/website.share.xml'],events:{'mouseenter':'_onMouseEnter',},_bindSocialEvent:function(){this.$('.oe_social_facebook').click($.proxy(this._renderSocial,this,'facebook'));this.$('.oe_social_twitter').click($.proxy(this._renderSocial,this,'twitter'));this.$('.oe_social_linkedin').click($.proxy(this._renderSocial,this,'linkedin'));},_render:function(){this.$el.popover({content:qweb.render('website.social_hover',{medias:this.socialList}),placement:'bottom',container:this.$el,html:true,trigger:'manual',animation:false,}).popover("show");this.$el.off('mouseleave.socialShare').on('mouseleave.socialShare',function(){var self=this;setTimeout(function(){if(!$(".popover:hover").length){$(self).popover('dispose');}},200);});},_renderSocial:function(social){var url=this.$el.data('urlshare')||document.URL.split(/[?#]/)[0];url=encodeURIComponent(url);var title=document.title.split(" | ")[0];var hashtags=' #'+document.title.split(" | ")[1].replace(' ','')+' '+this.hashtags;var socialNetworks={'facebook':'https://www.facebook.com/sharer/sharer.php?u='+url,'twitter':'https://twitter.com/intent/tweet?original_referer='+url+'&text='+encodeURIComponent(title+hashtags+' - ')+url,'linkedin':'https://www.linkedin.com/shareArticle?mini=true&url='+url+'&title='+encodeURIComponent(title),};if(!_.contains(_.keys(socialNetworks),social)){return;}
var wHeight=500;var wWidth=500;window.open(socialNetworks[social],'','menubar=no, toolbar=no, resizable=yes, scrollbar=yes, height='+wHeight+',width='+wWidth);},_onMouseEnter:function(){var social=this.$el.data('social');this.socialList=social?social.split(','):['facebook','twitter','linkedin'];this.hashtags=this.$el.data('hashtags')||'';this._render();this._bindSocialEvent();},});registry.facebookPage=publicWidget.Widget.extend({selector:'.o_facebook_page',disabledInEditableMode:false,start:function(){var def=this._super.apply(this,arguments);var params=_.pick(this.$el.data(),'href','height','tabs','small_header','hide_cover','show_facepile');if(!params.href){return def;}
params.width=utils.confine(Math.floor(this.$el.width()),180,500);var src=$.param.querystring('https://www.facebook.com/plugins/page.php',params);this.$iframe=$('<iframe/>',{src:src,class:'o_temp_auto_element',width:params.width,height:params.height,css:{border:'none',overflow:'hidden',},scrolling:'no',frameborder:'0',allowTransparency:'true',});this.$el.append(this.$iframe);return def;},destroy:function(){this._super.apply(this,arguments);if(this.$iframe){this.$iframe.remove();}},});registry.anchorSlide=publicWidget.Widget.extend({selector:'a[href^="/"][href*="#"], a[href^="#"]',events:{'click':'_onAnimateClick',},_onAnimateClick:function(ev){if(this.$target[0].pathname!==window.location.pathname){return;}
var hash=this.$target[0].hash;if(!utils.isValidAnchor(hash)){return;}
var $anchor=$(hash);if(!$anchor.length||!$anchor.attr('data-anchor')){return;}
ev.preventDefault();$('html, body').animate({scrollTop:$anchor.offset().top,},500);},});return{Widget:publicWidget.Widget,Animation:Animation,registry:registry,Class:Animation,};});;

/* /website/static/src/js/menu/navbar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.navbar',function(require){'use strict';var core=require('web.core');var dom=require('web.dom');var publicWidget=require('web.public.widget');var concurrency=require('web.concurrency');var Widget=require('web.Widget');var websiteRootData=require('website.root');var qweb=core.qweb;var websiteNavbarRegistry=new publicWidget.RootWidgetRegistry();var WebsiteNavbar=publicWidget.RootWidget.extend({xmlDependencies:['/website/static/src/xml/website.xml'],events:_.extend({},publicWidget.RootWidget.prototype.events||{},{'click [data-action]':'_onActionMenuClick','mouseover > ul > li.dropdown:not(.show)':'_onMenuHovered','click .o_mobile_menu_toggle':'_onMobileMenuToggleClick','mouseover #oe_applications:not(:has(.dropdown-item))':'_onOeApplicationsHovered',}),custom_events:_.extend({},publicWidget.RootWidget.prototype.custom_events||{},{'action_demand':'_onActionDemand','edit_mode':'_onEditMode','readonly_mode':'_onReadonlyMode','ready_to_save':'_onSave',}),init:function(){this._super.apply(this,arguments);var self=this;var initPromise=new Promise(function(resolve){self.resolveInit=resolve;});this._widgetDefs=[initPromise];},start:function(){var self=this;dom.initAutoMoreMenu(this.$('ul.o_menu_sections'),{maxWidth:function(){return self.$el.width()
-(self.$('.o_menu_systray').outerWidth(true)||0)
-(self.$('ul#oe_applications').outerWidth(true)||0)
-(self.$('.o_menu_toggle').outerWidth(true)||0)
-(self.$('.o_menu_brand').outerWidth(true)||0);},});return this._super.apply(this,arguments).then(function(){self.resolveInit();});},_attachComponent:function(){var def=this._super.apply(this,arguments);this._widgetDefs.push(def);return def;},_getRegistry:function(){return websiteNavbarRegistry;},_handleAction:function(actionName,params,_i){var self=this;return this._whenReadyForActions().then(function(){var defs=[];_.each(self._widgets,function(w){if(!w.handleAction){return;}
var def=w.handleAction(actionName,params);if(def!==null){defs.push(def);}});if(!defs.length){if(_i>50){console.warn(_.str.sprintf("Action '%s' was not able to be handled.",actionName));return Promise.reject();}
return concurrency.delay(100).then(function(){return self._handleAction(actionName,params,(_i||0)+1);});}
return Promise.all(defs).then(function(values){if(values.length===1){return values[0];}
return values;});});},_whenReadyForActions:function(){return Promise.all(this._widgetDefs);},_onOeApplicationsHovered:function(ev){var self=this;this._rpc({model:'ir.ui.menu',method:'load_menus_root',args:[],}).then(function(result){self.$('#oe_applications .dropdown-menu').html($(qweb.render('website.oe_applications_menu',{menu_data:result})));});},_onActionMenuClick:function(ev){var $button=$(ev.currentTarget);$button.prop('disabled',true);var always=function(){$button.prop('disabled',false);};this._handleAction($button.data('action')).then(always).guardedCatch(always);},_onActionDemand:function(ev){var def=this._handleAction(ev.data.actionName,ev.data.params);if(ev.data.onSuccess){def.then(ev.data.onSuccess);}
if(ev.data.onFailure){def.guardedCatch(ev.data.onFailure);}},_onEditMode:function(){this.$el.addClass('editing_mode');this.do_hide();},_onMenuHovered:function(ev){var $opened=this.$('> ul > li.dropdown.show');if($opened.length){$opened.find('.dropdown-toggle').dropdown('toggle');$(ev.currentTarget).find('.dropdown-toggle').dropdown('toggle');}},_onMobileMenuToggleClick:function(){this.$el.parent().toggleClass('o_mobile_menu_opened');},_onReadonlyMode:function(){this.$el.removeClass('editing_mode');this.do_show();},_onSave:function(ev){ev.data.defs.push(this._handleAction('on_save'));},});var WebsiteNavbarActionWidget=Widget.extend({actions:{},handleAction:function(actionName,params){var action=this[this.actions[actionName]];if(action){return Promise.resolve(action.apply(this,params||[]));}
return null;},});websiteRootData.websiteRootRegistry.add(WebsiteNavbar,'#oe_main_menu_navbar');return{WebsiteNavbar:WebsiteNavbar,websiteNavbarRegistry:websiteNavbarRegistry,WebsiteNavbarActionWidget:WebsiteNavbarActionWidget,};});;

/* /website/static/src/js/visitor_timezone.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.visitor_timezone',function(require){'use strict';var ajax=require('web.ajax');var utils=require('web.utils');var publicWidget=require('web.public.widget');publicWidget.registry.visitorTimezone=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(){if(!localStorage.getItem('website.found_visitor_timezone')){var timezone=jstz.determine().name();this._rpc({route:'/website/update_visitor_timezone',params:{'timezone':timezone,},}).then(function(result){if(result){localStorage.setItem('website.found_visitor_timezone',true);}});}
return this._super.apply(this,arguments);},});return publicWidget.registry.visitorTimezone;});;

/* /website/static/src/js/user_custom_javascript.js defined in bundle 'web.assets_frontend_lazy' */
;

/* /website_mail/static/src/js/follow.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_mail.follow',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.follow=publicWidget.Widget.extend({selector:'.js_follow',disabledInEditableMode:false,start:function(){var self=this;this.is_user=false;var always=function(data){self.is_user=data.is_user;self.email=data.email;self.toggle_subscription(data.is_follower,data.email);self.$target.removeClass('d-none');};this._rpc({route:'/website_mail/is_follower',params:{model:this.$target.data('object'),res_id:this.$target.data('id'),},}).then(always).guardedCatch(always);if(!this.editableMode){$('.js_follow > .input-group-append.d-none').removeClass('d-none');this.$target.find('.js_follow_btn, .js_unfollow_btn').on('click',function(event){event.preventDefault();self._onClick();});}
return this._super.apply(this,arguments);},_onClick:function(){var self=this;var $email=this.$target.find(".js_follow_email");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var email=$email.length?$email.val():false;if(email||this.is_user){this._rpc({route:'/website_mail/follow',params:{'id':+this.$target.data('id'),'object':this.$target.data('object'),'message_is_follower':this.$target.attr("data-follow")||"off",'email':email,},}).then(function(follow){self.toggle_subscription(follow,email);});}},toggle_subscription:function(follow,email){follow=follow||(!email&&this.$target.attr('data-unsubscribe'));if(follow){this.$target.find(".js_follow_btn").addClass('d-none');this.$target.find(".js_unfollow_btn").removeClass('d-none');}
else{this.$target.find(".js_follow_btn").removeClass('d-none');this.$target.find(".js_unfollow_btn").addClass('d-none');}
this.$target.find('input.js_follow_email').val(email||"").attr("disabled",email&&(follow||this.is_user)?"disabled":false);this.$target.attr("data-follow",follow?'on':'off');},});});;

/* /website_mail/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_mail.thread',function(require){'use strict';var portalChatter=require('portal.chatter');portalChatter.PortalChatter.include({xmlDependencies:(portalChatter.PortalChatter.prototype.xmlDependencies||[]).concat(['/website_mail/static/src/xml/portal_chatter.xml']),});});;

/* /website_links/static/src/js/website_links.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.website_links',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;var SelectBox=publicWidget.Widget.extend({events:{'change':'_onChange',},init:function(parent,obj,placeholder){this._super.apply(this,arguments);this.obj=obj;this.placeholder=placeholder;},willStart:function(){var self=this;var defs=[this._super.apply(this,arguments)];defs.push(this._rpc({model:this.obj,method:'search_read',params:{fields:['id','name'],},}).then(function(result){self.objects=_.map(result,function(val){return{id:val.id,text:val.name};});}));return Promise.all(defs);},start:function(){var self=this;this.$el.select2({placeholder:self.placeholder,allowClear:true,createSearchChoice:function(term){if(self._objectExists(term)){return null;}
return{id:term,text:_.str.sprintf("Create '%s'",term)};},createSearchChoicePosition:'bottom',multiple:false,data:self.objects,});},_objectExists:function(query){return _.find(this.objects,function(val){return val.text.toLowerCase()===query.toLowerCase();})!==undefined;},_createObject:function(name){var self=this;var args={name:name};if(this.obj==="utm.campaign"){args.is_website=true;}
return this._rpc({model:this.obj,method:'create',args:[args],}).then(function(record){self.$el.attr('value',record);self.objects.push({'id':record,'text':name});});},_onChange:function(ev){if(!ev.added||!_.isString(ev.added.id)){return;}
this._createObject(ev.added.id);},});var RecentLinkBox=publicWidget.Widget.extend({template:'website_links.RecentLink',xmlDependencies:['/website_links/static/src/xml/recent_link.xml'],events:{'click .btn_shorten_url_clipboard':'_toggleCopyButton','click .o_website_links_edit_code':'_editCode','click .o_website_links_ok_edit':'_onLinksOkClick','click .o_website_links_cancel_edit':'_onLinksCancelClick','submit #o_website_links_edit_code_form':'_onSubmitCode',},init:function(parent,obj){this._super.apply(this,arguments);this.link_obj=obj;this.animating_copy=false;},start:function(){new ClipboardJS(this.$('.btn_shorten_url_clipboard').get(0));return this._super.apply(this,arguments);},_toggleCopyButton:function(){if(this.animating_copy){return;}
var self=this;this.animating_copy=true;var top=this.$('.o_website_links_short_url').position().top;this.$('.o_website_links_short_url').clone().css('position','absolute').css('left',15).css('top',top-2).css('z-index',2).removeClass('o_website_links_short_url').addClass('animated-link').insertAfter(this.$('.o_website_links_short_url')).animate({opacity:0,top:'-=20',},500,function(){self.$('.animated-link').remove();self.animating_copy=false;});},_notification:function(message){this.$('.notification').append('<strong>'+message+'</strong>');},_editCode:function(){var initCode=this.$('#o_website_links_code').html();this.$('#o_website_links_code').html('<form style="display:inline;" id="o_website_links_edit_code_form"><input type="hidden" id="init_code" value="'+initCode+'"/><input type="text" id="new_code" value="'+initCode+'"/></form>');this.$('.o_website_links_edit_code').hide();this.$('.copy-to-clipboard').hide();this.$('.o_website_links_edit_tools').show();},_cancelEdit:function(){this.$('.o_website_links_edit_code').show();this.$('.copy-to-clipboard').show();this.$('.o_website_links_edit_tools').hide();this.$('.o_website_links_code_error').hide();var oldCode=this.$('#o_website_links_edit_code_form #init_code').val();this.$('#o_website_links_code').html(oldCode);this.$('#code-error').remove();this.$('#o_website_links_code form').remove();},_submitCode:function(){var self=this;var initCode=this.$('#o_website_links_edit_code_form #init_code').val();var newCode=this.$('#o_website_links_edit_code_form #new_code').val();if(newCode===''){self.$('.o_website_links_code_error').html(_t("The code cannot be left empty"));self.$('.o_website_links_code_error').show();return;}
function showNewCode(newCode){self.$('.o_website_links_code_error').html('');self.$('.o_website_links_code_error').hide();self.$('#o_website_links_code form').remove();var host=self.$('#o_website_links_host').html();self.$('#o_website_links_code').html(newCode);self.$('.btn_shorten_url_clipboard').attr('data-clipboard-text',host+newCode);self.$('.o_website_links_edit_code').show();self.$('.copy-to-clipboard').show();self.$('.o_website_links_edit_tools').hide();}
if(initCode===newCode){showNewCode(newCode);}else{this._rpc({route:'/website_links/add_code',params:{init_code:initCode,new_code:newCode,},}).then(function(result){showNewCode(result[0].code);},function(){self.$('.o_website_links_code_error').show();self.$('.o_website_links_code_error').html(_t("This code is already taken"));});}},_onLinksOkClick:function(ev){ev.preventDefault();this._submitCode();},_onLinksCancelClick:function(ev){ev.preventDefault();this._cancelEdit();},_onSubmitCode:function(ev){ev.preventDefault();this._submitCode();},});var RecentLinks=publicWidget.Widget.extend({getRecentLinks:function(filter){var self=this;return this._rpc({route:'/website_links/recent_links',params:{filter:filter,limit:20,},}).then(function(result){_.each(result.reverse(),function(link){self._addLink(link);});self._updateNotification();},function(){var message=_t("Unable to get recent links");self.$el.append('<div class="alert alert-danger">'+message+'</div>');});},_addLink:function(link){var nbLinks=this.getChildren().length;var recentLinkBox=new RecentLinkBox(this,link);recentLinkBox.prependTo(this.$el);$('.link-tooltip').tooltip();if(nbLinks===0){this._updateNotification();}},removeLinks:function(){_.invoke(this.getChildren(),'destroy');},_updateNotification:function(){if(this.getChildren().length===0){var message=_t("You don't have any recent links.");$('.o_website_links_recent_links_notification').html('<div class="alert alert-info">'+message+'</div>');}else{$('.o_website_links_recent_links_notification').empty();}},});publicWidget.registry.websiteLinks=publicWidget.Widget.extend({selector:'.o_website_links_create_tracked_url',events:{'click #filter-newest-links':'_onFilterNewestLinksClick','click #filter-most-clicked-links':'_onFilterMostClickedLinksClick','click #filter-recently-used-links':'_onFilterRecentlyUsedLinksClick','click #generated_tracked_link a':'_onGeneratedTrackedLinkClick','keyup #url':'_onUrlKeyUp','click #btn_shorten_url':'_onShortenUrlButtonClick','submit #o_website_links_link_tracker_form':'_onFormSubmit',},start:function(){var defs=[this._super.apply(this,arguments)];var campaignSelect=new SelectBox(this,'utm.campaign',_t("e.g. Promotion of June, Winter Newsletter, .."));defs.push(campaignSelect.attachTo($('#campaign-select')));var mediumSelect=new SelectBox(this,'utm.medium',_t("e.g. Newsletter, Social Network, .."));defs.push(mediumSelect.attachTo($('#channel-select')));var sourceSelect=new SelectBox(this,'utm.source',_t("e.g. Search Engine, Website page, .."));defs.push(sourceSelect.attachTo($('#source-select')));this.recentLinks=new RecentLinks(this);defs.push(this.recentLinks.appendTo($('#o_website_links_recent_links')));this.recentLinks.getRecentLinks('newest');new ClipboardJS($('#btn_shorten_url').get(0));this.url_copy_animating=false;$('[data-toggle="tooltip"]').tooltip();return Promise.all(defs);},_onFilterNewestLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('newest');},_onFilterMostClickedLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('most-clicked');},_onFilterRecentlyUsedLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('recently-used');},_onGeneratedTrackedLinkClick:function(){$('#generated_tracked_link a').text(_t("Copied")).removeClass('btn-primary').addClass('btn-success');setTimeout(function(){$('#generated_tracked_link a').text(_t("Copy")).removeClass('btn-success').addClass('btn-primary');},5000);},_onUrlKeyUp:function(ev){if(!$('#btn_shorten_url').hasClass('btn-copy')||ev.which===13){return;}
$('#btn_shorten_url').removeClass('btn-success btn-copy').addClass('btn-primary').html('Get tracked link');$('#generated_tracked_link').css('display','none');$('.o_website_links_utm_forms').show();},_onShortenUrlButtonClick:function(){if(!$('#btn_shorten_url').hasClass('btn-copy')||this.url_copy_animating){return;}
var self=this;this.url_copy_animating=true;$('#generated_tracked_link').clone().css('position','absolute').css('left','78px').css('bottom','8px').css('z-index',2).removeClass('#generated_tracked_link').addClass('url-animated-link').appendTo($('#generated_tracked_link')).animate({opacity:0,bottom:'+=20',},500,function(){$('.url-animated-link').remove();self.url_copy_animating=false;});},_onFormSubmit:function(ev){var self=this;ev.preventDefault();if($('#btn_shorten_url').hasClass('btn-copy')){return;}
ev.stopPropagation();var campaignID=$('#campaign-select').attr('value');var mediumID=$('#channel-select').attr('value');var sourceID=$('#source-select').attr('value');var params={};params.url=$('#url').val();if(campaignID!==''){params.campaign_id=parseInt(campaignID);}
if(mediumID!==''){params.medium_id=parseInt(mediumID);}
if(sourceID!==''){params.source_id=parseInt(sourceID);}
$('#btn_shorten_url').text(_t("Generating link..."));this._rpc({route:'/website_links/new',params:params,}).then(function(result){if('error'in result){if(result.error==='empty_url'){$('.notification').html('<div class="alert alert-danger">The URL is empty.</div>');}else if(result.error==='url_not_found'){$('.notification').html('<div class="alert alert-danger">URL not found (404)</div>');}else{$('.notification').html('<div class="alert alert-danger">An error occur while trying to generate your link. Try again later.</div>');}}else{var link=result[0];$('#btn_shorten_url').removeClass('btn-primary').addClass('btn-success btn-copy').html('Copy');$('#btn_shorten_url').attr('data-clipboard-text',link.short_url);$('.notification').html('');$('#generated_tracked_link').html(link.short_url);$('#generated_tracked_link').css('display','inline');self.recentLinks._addLink(link);$('#campaign-select').select2('val','');$('#channel-select').select2('val','');$('#source-select').select2('val','');$('.o_website_links_utm_forms').hide();}});},});return{SelectBox:SelectBox,RecentLinkBox:RecentLinkBox,RecentLinks:RecentLinks,};});;

/* /website_links/static/src/js/website_links_code_editor.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.code_editor',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.websiteLinksCodeEditor=publicWidget.Widget.extend({selector:'#wrapwrap:has(.o_website_links_edit_code)',events:{'click .o_website_links_edit_code':'_onEditCodeClick','click .o_website_links_cancel_edit':'_onCancelEditClick','submit #edit-code-form':'_onEditCodeFormSubmit','click .o_website_links_ok_edit':'_onEditCodeFormSubmit',},_showNewCode:function(newCode){$('.o_website_links_code_error').html('');$('.o_website_links_code_error').hide();$('#o_website_links_code form').remove();var host=$('#short-url-host').html();$('#o_website_links_code').html(newCode);$('.copy-to-clipboard').attr('data-clipboard-text',host+newCode);$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();},_submitCode:function(){var initCode=$('#edit-code-form #init_code').val();var newCode=$('#edit-code-form #new_code').val();var self=this;if(newCode===''){self.$('.o_website_links_code_error').html(_t("The code cannot be left empty"));self.$('.o_website_links_code_error').show();return;}
this._showNewCode(newCode);if(initCode===newCode){this._showNewCode(newCode);}else{return this._rpc({route:'/website_links/add_code',params:{init_code:initCode,new_code:newCode,},}).then(function(result){self._showNewCode(result[0].code);},function(){$('.o_website_links_code_error').show();$('.o_website_links_code_error').html(_t("This code is already taken"));});}
return Promise.resolve();},_onEditCodeClick:function(){var initCode=$('#o_website_links_code').html();$('#o_website_links_code').html('<form style="display:inline;" id="edit-code-form"><input type="hidden" id="init_code" value="'+initCode+'"/><input type="text" id="new_code" value="'+initCode+'"/></form>');$('.o_website_links_edit_code').hide();$('.copy-to-clipboard').hide();$('.o_website_links_edit_tools').show();},_onCancelEditClick:function(ev){ev.preventDefault();$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();$('.o_website_links_code_error').hide();var oldCode=$('#edit-code-form #init_code').val();$('#o_website_links_code').html(oldCode);$('#code-error').remove();$('#o_website_links_code form').remove();},_onEditCodeFormSubmit:function(ev){ev.preventDefault();this._submitCode();},});});;

/* /website_links/static/src/js/website_links_charts.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.charts',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;var BarChart=publicWidget.Widget.extend({jsLibs:['/web/static/lib/Chart/Chart.js',],init:function(parent,beginDate,endDate,dates){this._super.apply(this,arguments);this.beginDate=beginDate;this.endDate=endDate;this.number_of_days=this.endDate.diff(this.beginDate,'days')+2;this.dates=dates;},start:function(){var clicksArray=[];var beginDateCopy=this.beginDate;for(var i=0;i<this.number_of_days;i++){var dateKey=beginDateCopy.format('YYYY-MM-DD');clicksArray.push([dateKey,(dateKey in this.dates)?this.dates[dateKey]:0]);beginDateCopy.add(1,'days');}
var nbClicks=0;var data=[];var labels=[];clicksArray.forEach(function(pt){labels.push(pt[0]);nbClicks+=pt[1];data.push(pt[1]);});this.$('.title').html(nbClicks+_t(' clicks'));var config={type:'line',data:{labels:labels,datasets:[{data:data,fill:'start',label:_t('# of clicks'),backgroundColor:'#ebf2f7',borderColor:'#6aa1ca',}],},};var canvas=this.$('canvas')[0];var context=canvas.getContext('2d');new Chart(context,config);},});var PieChart=publicWidget.Widget.extend({jsLibs:['/web/static/lib/Chart/Chart.js',],init:function(parent,data){this._super.apply(this,arguments);this.data=data;},start:function(){var labels=[];var data=[];for(var i=0;i<this.data.length;i++){var countryName=this.data[i]['country_id']?this.data[i]['country_id'][1]:_t('Undefined');labels.push(countryName+' ('+this.data[i]['country_id_count']+')');data.push(this.data[i]['country_id_count']);}
this.$('.title').html(this.data.length+_t(' countries'));var config={type:'pie',data:{labels:labels,datasets:[{data:data,label:this.data[0].key,}]},};var canvas=this.$('canvas')[0];var context=canvas.getContext('2d');new Chart(context,config);},});publicWidget.registry.websiteLinksCharts=publicWidget.Widget.extend({selector:'.o_website_links_chart',events:{'click .graph-tabs li a':'_onGraphTabClick','click .copy-to-clipboard':'_onCopyToClipboardClick',},start:function(){var self=this;this.charts={};var linkID=parseInt($('#link_id').val());this.links_domain=['link_id','=',linkID];var defs=[];defs.push(this._totalClicks());defs.push(this._clicksByDay());defs.push(this._clicksByCountry());defs.push(this._lastWeekClicksByCountry());defs.push(this._lastMonthClicksByCountry());defs.push(this._super.apply(this,arguments));new ClipboardJS($('.copy-to-clipboard')[0]);this.animating_copy=false;return Promise.all(defs).then(function(results){var _totalClicks=results[0];var _clicksByDay=results[1];var _clicksByCountry=results[2];var _lastWeekClicksByCountry=results[3];var _lastMonthClicksByCountry=results[4];if(!_totalClicks){$('#all_time_charts').prepend(_t("There is no data to show"));$('#last_month_charts').prepend(_t("There is no data to show"));$('#last_week_charts').prepend(_t("There is no data to show"));return;}
var formattedClicksByDay={};var beginDate;for(var i=0;i<_clicksByDay.length;i++){var date=moment(_clicksByDay[i]['create_date:day'],'DD MMMM YYYY');if(i===0){beginDate=date;}
formattedClicksByDay[date.format('YYYY-MM-DD')]=_clicksByDay[i]['create_date_count'];}
var now=moment();self.charts.all_time_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.all_time_bar.attachTo($('#all_time_clicks_chart'));beginDate=moment().subtract(30,'days');self.charts.last_month_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.last_month_bar.attachTo($('#last_month_clicks_chart'));beginDate=moment().subtract(7,'days');self.charts.last_week_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.last_week_bar.attachTo($('#last_week_clicks_chart'));self.charts.all_time_pie=new PieChart(self,_clicksByCountry);self.charts.all_time_pie.attachTo($('#all_time_countries_charts'));self.charts.last_month_pie=new PieChart(self,_lastMonthClicksByCountry);self.charts.last_month_pie.attachTo($('#last_month_countries_charts'));self.charts.last_week_pie=new PieChart(self,_lastWeekClicksByCountry);self.charts.last_week_pie.attachTo($('#last_week_countries_charts'));var rowWidth=$('#all_time_countries_charts').parent().width();var $chartCanvas=$('#all_time_countries_charts,last_month_countries_charts,last_week_countries_charts').find('canvas');$chartCanvas.height(Math.max(_clicksByCountry.length*(rowWidth>750?1:2),20)+'em');});},_totalClicks:function(){return this._rpc({model:'link.tracker.click',method:'search_count',args:[[this.links_domain]],});},_clicksByDay:function(){return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain],['create_date']],kwargs:{groupby:'create_date:day'},});},_clicksByCountry:function(){return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain],['country_id']],kwargs:{groupby:'country_id'},});},_lastWeekClicksByCountry:function(){var interval=moment().subtract(7,'days').format('YYYY-MM-DD');return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},});},_lastMonthClicksByCountry:function(){var interval=moment().subtract(30,'days').format('YYYY-MM-DD');return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},});},_onGraphTabClick:function(ev){ev.preventDefault();$('.graph-tabs li a').tab('show');},_onCopyToClipboardClick:function(ev){ev.preventDefault();if(this.animating_copy){return;}
this.animating_copy=true;$('.o_website_links_short_url').clone().css('position','absolute').css('left','15px').css('bottom','10px').css('z-index',2).removeClass('.o_website_links_short_url').addClass('animated-link').appendTo($('.o_website_links_short_url')).animate({opacity:0,bottom:'+=20',},500,function(){$('.animated-link').remove();this.animating_copy=false;});},});return{BarChart:BarChart,PieChart:PieChart,};});;

/* /website_blog/static/src/js/contentshare.js defined in bundle 'web.assets_frontend_lazy' */
(function(){$.fn.share=function(options){var option=$.extend($.fn.share.defaults,options);var selected_text="";$.extend($.fn.share,{init:function(shareable){var self=this;$.fn.share.defaults.shareable=shareable;$.fn.share.defaults.shareable.on('mouseup',function(){if($(this).parents('body.editor_enable').length===0){self.popOver();}});$.fn.share.defaults.shareable.on('mousedown',function(){self.destroy();});},getContent:function(){var $popover_content=$('<div class="h4 m-0"/>');if($('.o_wblog_title, .o_wblog_post_content_field').hasClass('js_comment')){selected_text=this.getSelection('string');var $btn_c=$('<a class="o_share_comment btn btn-link px-2" href="#"/>').append($('<i class="fa fa-lg fa-comment"/>'));$popover_content.append($btn_c);}
if($('.o_wblog_title, .o_wblog_post_content_field').hasClass('js_tweet')){var tweet='"%s" - %s';var baseLength=tweet.replace(/%s/g,'').length;var selectedText=this.getSelection('string').substring(0,option.maxLength-baseLength-23);var text=encodeURIComponent(_.str.sprintf(tweet,selectedText,window.location.href));var $btn_t=$('<a class="px-2 btn btn-link" onclick="window.open(\''+option.shareLink+text+'\',\'_'+option.target+'\',\'location=yes,height=570,width=520,scrollbars=yes,status=yes\')" href="#"/>');$btn_t.append($('<i class="fa fa-lg fa-twitter"/>'));$popover_content.append($btn_t);}
return $popover_content;},commentEdition:function(){var positionComment=($('#o_wblog_post_comments').position()).top-50;$(".o_portal_chatter_composer_form textarea").val('"'+selected_text+'" ').focus();$('html, body').stop().animate({'scrollTop':positionComment},500,'swing',function(){window.location.hash='blog_post_comment_quote';});},getSelection:function(share){if(window.getSelection){var selection=window.getSelection();if(!selection||selection.rangeCount===0){return"";}
if(share==='string'){return String(selection.getRangeAt(0)).replace(/\s{2,}/g,' ');}else{return selection.getRangeAt(0);}}
else if(document.selection){if(share==='string'){return document.selection.createRange().text.replace(/\s{2,}/g,' ');}else{return document.selection.createRange();}}},popOver:function(){this.destroy();if(this.getSelection('string').length<option.minLength)
return;var data=this.getContent();var range=this.getSelection();var newNode=document.createElement("span");range.insertNode(newNode);newNode.className=option.className;var $pop=$(newNode);$pop.popover({trigger:'manual',placement:option.placement,html:true,content:function(){return data;}}).popover('show');$('.o_share_comment').on('click',this.commentEdition);},destroy:function(){var $span=$('span.'+option.className);$span.popover('hide');$span.remove();}});$.fn.share.init(this);};$.fn.share.defaults={shareLink:"http://twitter.com/intent/tweet?text=",minLength:5,maxLength:140,target:"blank",className:"share",placement:"top",};}());;

/* /website_blog/static/src/js/website_blog.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_blog.website_blog',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.websiteBlog=publicWidget.Widget.extend({selector:'.website_blog',events:{'click #o_wblog_next_container':'_onNextBlogClick','click #o_wblog_post_content_jump':'_onContentAnchorClick','click .o_twitter, .o_facebook, .o_linkedin, .o_google, .o_twitter_complete, .o_facebook_complete, .o_linkedin_complete, .o_google_complete':'_onShareArticle',},start:function(){$('.js_tweet, .js_comment').share({});return this._super.apply(this,arguments);},_onNextBlogClick:function(ev){ev.preventDefault();var self=this;var $el=$(ev.currentTarget);var nexInfo=$el.find('#o_wblog_next_post_info').data();$el.css('height',$(window).height()).find('.o_record_cover_container').addClass(nexInfo.size+' '+nexInfo.text).end().find('.o_wblog_toggle').toggleClass('d-none');_.defer(function(){self._forumScrollAction($el,300,function(){window.location.href=nexInfo.url;});});},_onContentAnchorClick:function(ev){ev.preventDefault();ev.stopImmediatePropagation();var $el=$(ev.currentTarget.hash);this._forumScrollAction($el,500,function(){window.location.hash='blog_content';});},_onShareArticle:function(ev){ev.preventDefault();var url='';var $element=$(ev.currentTarget);var blogPostTitle=encodeURIComponent($('#o_wblog_post_name').html()||'');var articleURL=encodeURIComponent(window.location.href);if($element.hasClass('o_twitter')){url='https://twitter.com/intent/tweet?tw_p=tweetbutton&text=Amazing blog article : '+blogPostTitle+"! "+articleURL;}else if($element.hasClass('o_facebook')){url='https://www.facebook.com/sharer/sharer.php?u='+articleURL;}else if($element.hasClass('o_linkedin')){url='https://www.linkedin.com/shareArticle?mini=true&url='+articleURL+'&title='+blogPostTitle;}
window.open(url,'','menubar=no, width=500, height=400');},_forumScrollAction:function($el,duration,callback){var $mainNav=$('#wrapwrap > header');var gap=$mainNav.height()+$mainNav.offset().top;$('html, body').stop().animate({scrollTop:$el.offset().top-gap},duration,'swing',function(){callback();});},});});;

/* /website_blog/static/src/js/s_latest_posts_frontend.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_blog.s_latest_posts_frontend',function(require){'use strict';var core=require('web.core');var wUtils=require('website.utils');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.js_get_posts=publicWidget.Widget.extend({selector:'.js_get_posts',disabledInEditableMode:false,start:function(){var self=this;var limit=self.$target.data('postsLimit')||3;var blogID=self.$target.data('filterByBlogId');var template=self.$target.data('template')||'website_blog.s_latest_posts_list_template';var loading=self.$target.data('loading');var domain=[];this.$target.empty();this.$target.attr('contenteditable','False');if(blogID){domain.push(['blog_id','=',parseInt(blogID)]);}
var prom=new Promise(function(resolve){self._rpc({route:'/blog/render_latest_posts',params:{template:template,domain:domain,limit:limit,},}).then(function(posts){var $posts=$(posts).filter('.s_latest_posts_post');if(!$posts.length){self.$target.append($('<div/>',{class:'col-md-6 offset-md-3'}).append($('<div/>',{class:'alert alert-warning alert-dismissible text-center',text:_t("No blog post was found. Make sure your posts are published."),})));return;}
if(loading&&loading===true){self._showLoading($posts);}else{self.$target.html($posts);}
resolve();}).guardedCatch(function(){if(self.editableMode){self.$target.append($('<p/>',{class:'text-danger',text:_t("An error occured with this latest posts block. If the problem persists, please consider deleting it and adding a new one"),}));}
resolve();});});return Promise.all([this._super.apply(this,arguments),prom]);},destroy:function(){this.$target.empty();this._super.apply(this,arguments);},_showLoading:function($posts){var self=this;_.each($posts,function(post,i){var $post=$(post);var $progress=$post.find('.s_latest_posts_loader');var bgUrl=$post.find('.o_record_cover_image').css('background-image').replace('url(','').replace(')','').replace(/\"/gi,"")||'none';$post.appendTo(self.$target);if(bgUrl==='none'){$post.addClass('s_latest_posts_loader_no_cover');$progress.remove();return;}
$progress.find('> div').removeClass('d-none').css('animation-delay',i*200+'ms');var $dummyImg=$('<img/>',{src:bgUrl});var timer=setTimeout(function(){$post.find('.o_record_cover_image').addClass('bg-200');$progress.remove();},10000);wUtils.onceAllImagesLoaded($dummyImg).then(function(){$progress.fadeOut(500,function(){$progress.removeClass('d-flex');});$dummyImg.remove();clearTimeout(timer);});});},});});;

/* /sale/static/src/js/variant_mixin.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale.VariantMixin',function(require){'use strict';var concurrency=require('web.concurrency');var core=require('web.core');var utils=require('web.utils');var ajax=require('web.ajax');var _t=core._t;var VariantMixin={events:{'change .css_attribute_color input':'_onChangeColorAttribute','change .main_product:not(.in_cart) input.js_quantity':'onChangeAddQuantity','change [data-attribute_exclusions]':'onChangeVariant'},onChangeVariant:function(ev){var $parent=$(ev.target).closest('.js_product');if(!$parent.data('uniqueId')){$parent.data('uniqueId',_.uniqueId());}
this._throttledGetCombinationInfo($parent.data('uniqueId'))(ev);},_getCombinationInfo:function(ev){var self=this;if($(ev.target).hasClass('variant_custom_value')){return Promise.resolve();}
var $parent=$(ev.target).closest('.js_product');var qty=$parent.find('input[name="add_qty"]').val();var combination=this.getSelectedVariantValues($parent);var parentCombination=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions').parent_combination;var productTemplateId=parseInt($parent.find('.product_template_id').val());self._checkExclusions($parent,combination);return ajax.jsonRpc(this._getUri('/sale/get_combination_info'),'call',{'product_template_id':productTemplateId,'product_id':this._getProductId($parent),'combination':combination,'add_qty':parseInt(qty),'pricelist_id':this.pricelistId||false,'parent_combination':parentCombination,}).then(function(combinationData){self._onChangeCombination(ev,$parent,combinationData);});},handleCustomValues:function($target){var $variantContainer;var $customInput=false;if($target.is('input[type=radio]')&&$target.is(':checked')){$variantContainer=$target.closest('ul').closest('li');$customInput=$target;}else if($target.is('select')){$variantContainer=$target.closest('li');$customInput=$target.find('option[value="'+$target.val()+'"]');}
if($variantContainer){if($customInput&&$customInput.data('is_custom')==='True'){var attributeValueId=$customInput.data('value_id');var attributeValueName=$customInput.data('value_name');if($variantContainer.find('.variant_custom_value').length===0||$variantContainer.find('.variant_custom_value').data('custom_product_template_attribute_value_id')!==parseInt(attributeValueId)){$variantContainer.find('.variant_custom_value').remove();var $input=$('<input>',{type:'text','data-custom_product_template_attribute_value_id':attributeValueId,'data-attribute_value_name':attributeValueName,class:'variant_custom_value form-control'});var isRadioInput=$target.is('input[type=radio]')&&$target.closest('label.css_attribute_color').length===0;if(isRadioInput&&$customInput.data('is_single_and_custom')!=='True'){$input.addClass('custom_value_radio');$target.closest('div').after($input);}else{$input.attr('placeholder',attributeValueName);$input.addClass('custom_value_own_line');$variantContainer.append($input);}}}else{$variantContainer.find('.variant_custom_value').remove();}}},onClickAddCartJSON:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $input=$link.closest('.input-group').find("input");var min=parseFloat($input.data("min")||0);var max=parseFloat($input.data("max")||Infinity);var previousQty=parseFloat($input.val()||0,10);var quantity=($link.has(".fa-minus").length?-1:1)+previousQty;var newQty=quantity>min?(quantity<max?quantity:max):min;if(newQty!==previousQty){$input.val(newQty).trigger('change');}
return false;},onChangeAddQuantity:function(ev){var $parent;if($(ev.currentTarget).closest('.oe_optional_products_modal').length>0){$parent=$(ev.currentTarget).closest('.oe_optional_products_modal');}else if($(ev.currentTarget).closest('form').length>0){$parent=$(ev.currentTarget).closest('form');}else{$parent=$(ev.currentTarget).closest('.o_product_configurator');}
this.triggerVariantChange($parent);},triggerVariantChange:function($container){var self=this;$container.find('ul[data-attribute_exclusions]').trigger('change');$container.find('input.js_variant_change:checked, select.js_variant_change').each(function(){self.handleCustomValues($(this));});},getCustomVariantValues:function($container){var variantCustomValues=[];$container.find('.variant_custom_value').each(function(){var $variantCustomValueInput=$(this);if($variantCustomValueInput.length!==0){variantCustomValues.push({'custom_product_template_attribute_value_id':$variantCustomValueInput.data('custom_product_template_attribute_value_id'),'attribute_value_name':$variantCustomValueInput.data('attribute_value_name'),'custom_value':$variantCustomValueInput.val(),});}});return variantCustomValues;},getNoVariantAttributeValues:function($container){var noVariantAttributeValues=[];var variantsValuesSelectors=['input.no_variant.js_variant_change:checked','select.no_variant.js_variant_change'];$container.find(variantsValuesSelectors.join(',')).each(function(){var $variantValueInput=$(this);if($variantValueInput.is('select')){$variantValueInput=$variantValueInput.find('option[value='+$variantValueInput.val()+']');}
if($variantValueInput.length!==0){noVariantAttributeValues.push({'custom_product_template_attribute_value_id':$variantValueInput.data('value_id'),'attribute_value_name':$variantValueInput.data('value_name'),'value':$variantValueInput.val(),'attribute_name':$variantValueInput.data('attribute_name'),'is_custom':$variantValueInput.data('is_custom')});}});return noVariantAttributeValues;},getSelectedVariantValues:function($container){var values=[];var unchangedValues=$container.find('div.oe_unchanged_value_ids').data('unchanged_value_ids')||[];var variantsValuesSelectors=['input.js_variant_change:checked','select.js_variant_change'];_.each($container.find(variantsValuesSelectors.join(', ')),function(el){values.push(+$(el).val());});return values.concat(unchangedValues);},selectOrCreateProduct:function($container,productId,productTemplateId,useAjax){var self=this;productId=parseInt(productId);productTemplateId=parseInt(productTemplateId);var productReady=Promise.resolve();if(productId){productReady=Promise.resolve(productId);}else{var params={product_template_id:productTemplateId,product_template_attribute_value_ids:JSON.stringify(self.getSelectedVariantValues($container)),};var route='/sale/create_product_variant';if(useAjax){productReady=ajax.jsonRpc(route,'call',params);}else{productReady=this._rpc({route:route,params:params});}}
return productReady;},_checkExclusions:function($parent,combination){var self=this;var combinationData=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions');$parent.find('option, input, label').removeClass('css_not_available').attr('title','').data('excluded-by','');if(combinationData.exclusions){_.each(combination,function(current_ptav){if(combinationData.exclusions.hasOwnProperty(current_ptav)){_.each(combinationData.exclusions[current_ptav],function(excluded_ptav){self._disableInput($parent,excluded_ptav,current_ptav,combinationData.mapped_attribute_names);});}});}
_.each(combinationData.parent_exclusions,function(exclusions,excluded_by){_.each(exclusions,function(ptav){self._disableInput($parent,ptav,excluded_by,combinationData.mapped_attribute_names,combinationData.parent_product_name);});});},_getProductId:function($parent){return parseInt($parent.find('.product_id').val());},_disableInput:function($parent,attributeValueId,excludedBy,attributeNames,productName){var $input=$parent.find('option[value='+attributeValueId+'], input[value='+attributeValueId+']');$input.addClass('css_not_available');$input.closest('label').addClass('css_not_available');if(excludedBy&&attributeNames){var $target=$input.is('option')?$input:$input.closest('label').add($input);var excludedByData=[];if($target.data('excluded-by')){excludedByData=JSON.parse($target.data('excluded-by'));}
var excludedByName=attributeNames[excludedBy];if(productName){excludedByName=productName+' ('+excludedByName+')';}
excludedByData.push(excludedByName);$target.attr('title',_.str.sprintf(_t('Not available with %s'),excludedByData.join(', ')));$target.data('excluded-by',JSON.stringify(excludedByData));}},_onChangeCombination:function(ev,$parent,combination){var self=this;var $price=$parent.find(".oe_price:first .oe_currency_value");var $default_price=$parent.find(".oe_default_price:first .oe_currency_value");var $optional_price=$parent.find(".oe_optional:first .oe_currency_value");$price.text(self._priceToStr(combination.price));$default_price.text(self._priceToStr(combination.list_price));var isCombinationPossible=true;if(!_.isUndefined(combination.is_combination_possible)){isCombinationPossible=combination.is_combination_possible;}
this._toggleDisable($parent,isCombinationPossible);if(combination.has_discounted_price){$default_price.closest('.oe_website_sale').addClass("discount");$optional_price.closest('.oe_optional').removeClass('d-none').css('text-decoration','line-through');$default_price.parent().removeClass('d-none');}else{$default_price.closest('.oe_website_sale').removeClass("discount");$optional_price.closest('.oe_optional').addClass('d-none');$default_price.parent().addClass('d-none');}
var rootComponentSelectors=['tr.js_product','.oe_website_sale','.o_product_configurator'];if(!combination.product_id||!this.last_product_id||combination.product_id!==this.last_product_id){this.last_product_id=combination.product_id;self._updateProductImage($parent.closest(rootComponentSelectors.join(', ')),combination.display_image,combination.product_id,combination.product_template_id,combination.carousel,isCombinationPossible);}
$parent.find('.product_id').first().val(combination.product_id||0).trigger('change');$parent.find('.product_display_name').first().text(combination.display_name);$parent.find('.js_raw_price').first().text(combination.price).trigger('change');this.handleCustomValues($(ev.target));},_priceToStr:function(price){var l10n=_t.database.parameters;var precision=2;if($('.decimal_precision').length){precision=parseInt($('.decimal_precision').last().data('precision'));}
var formatted=_.str.sprintf('%.'+precision+'f',price).split('.');formatted[0]=utils.insert_thousand_seps(formatted[0]);return formatted.join(l10n.decimal_point);},_throttledGetCombinationInfo:_.memoize(function(uniqueId){var dropMisordered=new concurrency.DropMisordered();var _getCombinationInfo=_.throttle(this._getCombinationInfo.bind(this),500);return function(ev,params){return dropMisordered.add(_getCombinationInfo(ev,params));};}),_toggleDisable:function($parent,isCombinationPossible){$parent.toggleClass('css_not_available',!isCombinationPossible);},_updateProductImage:function($productContainer,displayImage,productId,productTemplateId){var model=productId?'product.product':'product.template';var modelId=productId||productTemplateId;var imageUrl='/web/image/{0}/{1}/'+(this._productImageField?this._productImageField:'image_1024');var imageSrc=imageUrl.replace("{0}",model).replace("{1}",modelId);var imagesSelectors=['span[data-oe-model^="product."][data-oe-type="image"] img:first','img.product_detail_img','span.variant_image img','img.variant_image',];var $img=$productContainer.find(imagesSelectors.join(', '));if(displayImage){$img.removeClass('invisible').attr('src',imageSrc);}else{$img.addClass('invisible');}},_onChangeColorAttribute:function(ev){var $parent=$(ev.target).closest('.js_product');$parent.find('.css_attribute_color').removeClass("active").filter(':has(input:checked)').addClass("active");},_getUri:function(uri){return uri;}};return VariantMixin;});;

/* /website_sale/static/src/js/variant_mixin.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.VariantMixin',function(require){'use strict';var VariantMixin=require('sale.VariantMixin');VariantMixin._getUri=function(uri){if(this.isWebsite){return uri+'_website';}else{return uri;}};return VariantMixin;});;

/* /website_sale/static/src/js/website_sale.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.cart',function(require){'use strict';var publicWidget=require('web.public.widget');var core=require('web.core');var _t=core._t;var timeout;publicWidget.registry.websiteSaleCartLink=publicWidget.Widget.extend({selector:'#top_menu a[href$="/shop/cart"]',events:{'mouseenter':'_onMouseEnter','mouseleave':'_onMouseLeave','click':'_onClick',},init:function(){this._super.apply(this,arguments);this._popoverRPC=null;},start:function(){this.$el.popover({trigger:'manual',animation:true,html:true,title:function(){return _t("My Cart");},container:'body',placement:'auto',template:'<div class="popover mycart-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'});return this._super.apply(this,arguments);},_onMouseEnter:function(ev){var self=this;clearTimeout(timeout);$(this.selector).not(ev.currentTarget).popover('hide');timeout=setTimeout(function(){if(!self.$el.is(':hover')||$('.mycart-popover:visible').length){return;}
self._popoverRPC=$.get("/shop/cart",{type:'popover',}).then(function(data){self.$el.data("bs.popover").config.content=data;self.$el.popover("show");$('.popover').on('mouseleave',function(){self.$el.trigger('mouseleave');});});},300);},_onMouseLeave:function(ev){var self=this;setTimeout(function(){if($('.popover:hover').length){return;}
if(!self.$el.is(':hover')){self.$el.popover('hide');}},1000);},_onClick:function(ev){clearTimeout(timeout);if(this._popoverRPC&&this._popoverRPC.state()==='pending'){ev.preventDefault();var href=ev.currentTarget.href;this._popoverRPC.then(function(){window.location.href=href;});}},});});odoo.define('website_sale.website_sale_category',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.websiteSaleCategory=publicWidget.Widget.extend({selector:'#o_shop_collapse_category',events:{'click .fa-chevron-right':'_onOpenClick','click .fa-chevron-down':'_onCloseClick',},_onOpenClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().siblings().find('.fa-chevron-down:first').click();$fa.parents('li').find('ul:first').show('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},_onCloseClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().find('ul:first').hide('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},});});odoo.define('website_sale.website_sale',function(require){'use strict';var core=require('web.core');var config=require('web.config');var concurrency=require('web.concurrency');var publicWidget=require('web.public.widget');var VariantMixin=require('sale.VariantMixin');var wSaleUtils=require('website_sale.utils');require("web.zoomodoo");var qweb=core.qweb;publicWidget.registry.WebsiteSale=publicWidget.Widget.extend(VariantMixin,{selector:'.oe_website_sale',events:_.extend({},VariantMixin.events||{},{'change form .js_product:first input[name="add_qty"]':'_onChangeAddQuantity','mouseup .js_publish':'_onMouseupPublish','touchend .js_publish':'_onMouseupPublish','change .oe_cart input.js_quantity[data-product-id]':'_onChangeCartQuantity','click .oe_cart a.js_add_suggested_products':'_onClickSuggestedProduct','click a.js_add_cart_json':'_onClickAddCartJSON','click .a-submit':'_onClickSubmit','change form.js_attributes input, form.js_attributes select':'_onChangeAttribute','mouseup form.js_add_cart_json label':'_onMouseupAddCartLabel','touchend form.js_add_cart_json label':'_onMouseupAddCartLabel','click .show_coupon':'_onClickShowCoupon','submit .o_wsale_products_searchbar_form':'_onSubmitSaleSearch','change select[name="country_id"]':'_onChangeCountry','change #shipping_use_same':'_onChangeShippingUseSame','click .toggle_summary':'_onToggleSummary','click #add_to_cart, #buy_now, #products_grid .o_wsale_product_btn .a-submit':'async _onClickAdd','click input.js_product_change':'onChangeVariant','change .js_main_product [data-attribute_exclusions]':'onChangeVariant','change oe_optional_products_modal [data-attribute_exclusions]':'onChangeVariant',}),init:function(){this._super.apply(this,arguments);this._changeCartQuantity=_.debounce(this._changeCartQuantity.bind(this),500);this._changeCountry=_.debounce(this._changeCountry.bind(this),500);this.isWebsite=true;delete this.events['change .main_product:not(.in_cart) input.js_quantity'];delete this.events['change [data-attribute_exclusions]'];},start:function(){var self=this;var def=this._super.apply(this,arguments);this._applyHash();_.each(this.$('div.js_product'),function(product){$('input.js_product_change',product).first().trigger('change');});this.triggerVariantChange(this.$el);this.$('select[name="country_id"]').change();core.bus.on('resize',this,function(){if(config.device.size_class===config.device.SIZES.XL){$('.toggle_summary_div').addClass('d-none d-xl-block');}});this._startZoom();window.addEventListener('hashchange',function(e){self._applyHash();self.triggerVariantChange($(self.el));});return def;},getSelectedVariantValues:function($container){var combination=$container.find('input.js_product_change:checked').data('combination');if(combination){return combination;}
return VariantMixin.getSelectedVariantValues.apply(this,arguments);},_applyHash:function(){var hash=window.location.hash.substring(1);if(hash){var params=$.deparam(hash);if(params['attr']){var attributeIds=params['attr'].split(',');var $inputs=this.$('input.js_variant_change, select.js_variant_change option');_.each(attributeIds,function(id){var $toSelect=$inputs.filter('[data-value_id="'+id+'"]');if($toSelect.is('input[type="radio"]')){$toSelect.prop('checked',true);}else if($toSelect.is('option')){$toSelect.prop('selected',true);}});this._changeColorAttribute();}}},_setUrlHash:function($parent){var $attributes=$parent.find('input.js_variant_change:checked, select.js_variant_change option:selected');var attributeIds=_.map($attributes,function(elem){return $(elem).data('value_id');});history.replaceState(undefined,undefined,'#attr='+attributeIds.join(','));},_changeColorAttribute:function(){$('.css_attribute_color').removeClass("active").filter(':has(input:checked)').addClass("active");},_changeCartQuantity:function($input,value,$dom_optional,line_id,productIDs){_.each($dom_optional,function(elem){$(elem).find('.js_quantity').text(value);productIDs.push($(elem).find('span[data-product-id]').data('product-id'));});$input.data('update_change',true);this._rpc({route:"/shop/cart/update_json",params:{line_id:line_id,product_id:parseInt($input.data('product-id'),10),set_qty:value},}).then(function(data){$input.data('update_change',false);var check_value=parseInt($input.val()||0,10);if(isNaN(check_value)){check_value=1;}
if(value!==check_value){$input.trigger('change');return;}
if(!data.cart_quantity){return window.location='/shop/cart';}
wSaleUtils.updateCartNavBar(data);$input.val(data.quantity);$('.js_quantity[data-line-id='+line_id+']').val(data.quantity).html(data.quantity);if(data.warning){var cart_alert=$('.oe_cart').parent().find('#data_warning');if(cart_alert.length===0){$('.oe_cart').prepend('<div class="alert alert-danger alert-dismissable" role="alert" id="data_warning">'+'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+data.warning+'</div>');}
else{cart_alert.html('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+data.warning);}
$input.val(data.quantity);}});},_changeCountry:function(){if(!$("#country_id").val()){return;}
this._rpc({route:"/shop/country_infos/"+$("#country_id").val(),params:{mode:'shipping',},}).then(function(data){var selectStates=$("select[name='state_id']");if(selectStates.data('init')===0||selectStates.find('option').length===1){if(data.states.length){selectStates.html('');_.each(data.states,function(x){var opt=$('<option>').text(x[1]).attr('value',x[0]).attr('data-code',x[2]);selectStates.append(opt);});selectStates.parent('div').show();}else{selectStates.val('').parent('div').hide();}
selectStates.data('init',0);}else{selectStates.data('init',0);}
if(data.fields){if($.inArray('zip',data.fields)>$.inArray('city',data.fields)){$(".div_zip").before($(".div_city"));}else{$(".div_zip").after($(".div_city"));}
var all_fields=["street","zip","city","country_name"];_.each(all_fields,function(field){$(".checkout_autoformat .div_"+field.split('_')[0]).toggle($.inArray(field,data.fields)>=0);});}});},_getProductId:function($parent){if($parent.find('input.js_product_change').length!==0){return parseInt($parent.find('input.js_product_change:checked').val());}
else{return VariantMixin._getProductId.apply(this,arguments);}},_startZoom:function(){if(!config.device.isMobile){var autoZoom=$('.ecom-zoomable').data('ecom-zoom-auto')||false,attach='#o-carousel-product';_.each($('.ecom-zoomable img[data-zoom]'),function(el){onImageLoaded(el,function(){var $img=$(el);$img.zoomOdoo({event:autoZoom?'mouseenter':'click',attach:attach});$img.attr('data-zoom',1);});});}
function onImageLoaded(img,callback){$(img).on('load',function(){callback();});if(img.complete){callback();}}},_updateProductImage:function($productContainer,displayImage,productId,productTemplateId,newCarousel,isCombinationPossible){var $carousel=$productContainer.find('#o-carousel-product');if(window.location.search.indexOf('enable_editor')===-1){var $newCarousel=$(newCarousel);$carousel.after($newCarousel);$carousel.remove();$carousel=$newCarousel;$carousel.carousel(0);this._startZoom();this.trigger_up('widgets_start_request',{$target:$carousel});}
$carousel.toggleClass('css_not_available',!isCombinationPossible);},_onClickAdd:function(ev){ev.preventDefault();this.isBuyNow=$(ev.currentTarget).attr('id')==='buy_now';return this._handleAdd($(ev.currentTarget).closest('form'));},_handleAdd:function($form){var self=this;this.$form=$form;var productSelector=['input[type="hidden"][name="product_id"]','input[type="radio"][name="product_id"]:checked'];var productReady=this.selectOrCreateProduct($form,parseInt($form.find(productSelector.join(', ')).first().val(),10),$form.find('.product_template_id').val(),false);return productReady.then(function(productId){$form.find(productSelector.join(', ')).val(productId);self.rootProduct={product_id:productId,quantity:parseFloat($form.find('input[name="add_qty"]').val()||1),product_custom_attribute_values:self.getCustomVariantValues($form.find('.js_product')),variant_values:self.getSelectedVariantValues($form.find('.js_product')),no_variant_attribute_values:self.getNoVariantAttributeValues($form.find('.js_product'))};return self._onProductReady();});},_onProductReady:function(){return this._submitForm();},_submitForm:function(){var $productCustomVariantValues=$('<input>',{name:'product_custom_attribute_values',type:"hidden",value:JSON.stringify(this.rootProduct.product_custom_attribute_values)});this.$form.append($productCustomVariantValues);var $productNoVariantAttributeValues=$('<input>',{name:'no_variant_attribute_values',type:"hidden",value:JSON.stringify(this.rootProduct.no_variant_attribute_values)});this.$form.append($productNoVariantAttributeValues);if(this.isBuyNow){this.$form.append($('<input>',{name:'express',type:"hidden",value:true}));}
this.$form.trigger('submit',[true]);return new Promise(function(){});},_onClickAddCartJSON:function(ev){this.onClickAddCartJSON(ev);},_onChangeAddQuantity:function(ev){this.onChangeAddQuantity(ev);},_onMouseupPublish:function(ev){$(ev.currentTarget).parents('.thumbnail').toggleClass('disabled');},_onChangeCartQuantity:function(ev){var $input=$(ev.currentTarget);if($input.data('update_change')){return;}
var value=parseInt($input.val()||0,10);if(isNaN(value)){value=1;}
var $dom=$input.closest('tr');var $dom_optional=$dom.nextUntil(':not(.optional_product.info)');var line_id=parseInt($input.data('line-id'),10);var productIDs=[parseInt($input.data('product-id'),10)];this._changeCartQuantity($input,value,$dom_optional,line_id,productIDs);},_onClickSuggestedProduct:function(ev){$(ev.currentTarget).prev('input').val(1).trigger('change');},_onClickSubmit:function(ev,forceSubmit){if($(ev.currentTarget).is('#add_to_cart, #products_grid .a-submit')&&!forceSubmit){return;}
var $aSubmit=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$aSubmit.is(".disabled")){ev.preventDefault();$aSubmit.closest('form').submit();}
if($aSubmit.hasClass('a-submit-disable')){$aSubmit.addClass("disabled");}
if($aSubmit.hasClass('a-submit-loading')){var loading='<span class="fa fa-cog fa-spin"/>';var fa_span=$aSubmit.find('span[class*="fa"]');if(fa_span.length){fa_span.replaceWith(loading);}else{$aSubmit.append(loading);}}},_onChangeAttribute:function(ev){if(!ev.isDefaultPrevented()){ev.preventDefault();$(ev.currentTarget).closest("form").submit();}},_onMouseupAddCartLabel:function(ev){var $label=$(ev.currentTarget);var $price=$label.parents("form:first").find(".oe_price .oe_currency_value");if(!$price.data("price")){$price.data("price",parseFloat($price.text()));}
var value=$price.data("price")+parseFloat($label.find(".badge span").text()||0);var dec=value%1;$price.html(value+(dec<0.01?".00":(dec<1?"0":"")));},_onClickShowCoupon:function(ev){$(ev.currentTarget).hide();$('.coupon_form').removeClass('d-none');},_onSubmitSaleSearch:function(ev){if(!this.$('.dropdown_sorty_by').length){return;}
var $this=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$this.is(".disabled")){ev.preventDefault();var oldurl=$this.attr('action');oldurl+=(oldurl.indexOf("?")===-1)?"?":"";var search=$this.find('input.search-query');window.location=oldurl+'&'+search.attr('name')+'='+encodeURIComponent(search.val());}},_onChangeCountry:function(ev){if(!this.$('.checkout_autoformat').length){return;}
this._changeCountry();},_onChangeShippingUseSame:function(ev){$('.ship_to_other').toggle(!$(ev.currentTarget).prop('checked'));},_toggleDisable:function($parent,isCombinationPossible){VariantMixin._toggleDisable.apply(this,arguments);$parent.find("#add_to_cart").toggleClass('disabled',!isCombinationPossible);$parent.find("#buy_now").toggleClass('disabled',!isCombinationPossible);},onChangeVariant:function(ev){var $component=$(ev.currentTarget).closest('.js_product');$component.find('input').each(function(){var $el=$(this);$el.attr('checked',$el.is(':checked'));});$component.find('select option').each(function(){var $el=$(this);$el.attr('selected',$el.is(':selected'));});this._setUrlHash($component);return VariantMixin.onChangeVariant.apply(this,arguments);},_onToggleSummary:function(){$('.toggle_summary_div').toggleClass('d-none');$('.toggle_summary_div').removeClass('d-xl-block');},});publicWidget.registry.WebsiteSaleLayout=publicWidget.Widget.extend({selector:'.oe_website_sale',disabledInEditableMode:false,events:{'change .o_wsale_apply_layout':'_onApplyShopLayoutChange',},_onApplyShopLayoutChange:function(ev){var switchToList=$(ev.currentTarget).find('.o_wsale_apply_list input').is(':checked');if(!this.editableMode){this._rpc({route:'/shop/save_shop_layout_mode',params:{'layout_mode':switchToList?'list':'grid',},});}
var $grid=this.$('#products_grid');$grid.find('*').css('transition','none');$grid.toggleClass('o_wsale_layout_list',switchToList);void $grid[0].offsetWidth;$grid.find('*').css('transition','');},});publicWidget.registry.websiteSaleCart=publicWidget.Widget.extend({selector:'.oe_website_sale .oe_cart',events:{'click .js_change_shipping':'_onClickChangeShipping','click .js_edit_address':'_onClickEditAddress','click .js_delete_product':'_onClickDeleteProduct',},_onClickChangeShipping:function(ev){var $old=$('.all_shipping').find('.card.border.border-primary');$old.find('.btn-ship').toggle();$old.addClass('js_change_shipping');$old.removeClass('border border-primary');var $new=$(ev.currentTarget).parent('div.one_kanban').find('.card');$new.find('.btn-ship').toggle();$new.removeClass('js_change_shipping');$new.addClass('border border-primary');var $form=$(ev.currentTarget).parent('div.one_kanban').find('form.d-none');$.post($form.attr('action'),$form.serialize()+'&xhr=1');},_onClickEditAddress:function(ev){ev.preventDefault();$(ev.currentTarget).closest('div.one_kanban').find('form.d-none').attr('action','/shop/address').submit();},_onClickDeleteProduct:function(ev){ev.preventDefault();$(ev.currentTarget).closest('tr').find('.js_quantity').val(0).trigger('change');},});publicWidget.registry.productsSearchBar=publicWidget.Widget.extend({selector:'.o_wsale_products_searchbar_form',xmlDependencies:['/website_sale/static/src/xml/website_sale_utils.xml'],events:{'input .search-query':'_onInput','focusout':'_onFocusOut','keydown .search-query':'_onKeydown',},autocompleteMinWidth:300,init:function(){this._super.apply(this,arguments);this._dp=new concurrency.DropPrevious();this._onInput=_.debounce(this._onInput,400);this._onFocusOut=_.debounce(this._onFocusOut,100);},start:function(){this.$input=this.$('.search-query');this.order=this.$('.o_wsale_search_order_by').val();this.limit=parseInt(this.$input.data('limit'));this.displayDescription=!!this.$input.data('displayDescription');this.displayPrice=!!this.$input.data('displayPrice');this.displayImage=!!this.$input.data('displayImage');if(this.limit){this.$input.attr('autocomplete','off');}
return this._super.apply(this,arguments);},_fetch:function(){return this._rpc({route:'/shop/products/autocomplete',params:{'term':this.$input.val(),'options':{'order':this.order,'limit':this.limit,'display_description':this.displayDescription,'display_price':this.displayPrice,'max_nb_chars':Math.round(Math.max(this.autocompleteMinWidth,parseInt(this.$el.width()))*0.22),},},});},_render:function(res){var $prevMenu=this.$menu;this.$el.toggleClass('dropdown show',!!res);if(res){var products=res['products'];this.$menu=$(qweb.render('website_sale.productsSearchBar.autocomplete',{products:products,hasMoreProducts:products.length<res['products_count'],currency:res['currency'],widget:this,}));this.$menu.css('min-width',this.autocompleteMinWidth);this.$el.append(this.$menu);}
if($prevMenu){$prevMenu.remove();}},_onInput:function(){if(!this.limit){return;}
this._dp.add(this._fetch()).then(this._render.bind(this));},_onFocusOut:function(){if(!this.$el.has(document.activeElement).length){this._render();}},_onKeydown:function(ev){switch(ev.which){case $.ui.keyCode.ESCAPE:this._render();break;case $.ui.keyCode.UP:ev.preventDefault();this.$menu.children().last().focus();break;case $.ui.keyCode.DOWN:ev.preventDefault();this.$menu.children().first().focus();break;}},});});;

/* /website_sale/static/src/js/website_sale_utils.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.utils',function(require){'use strict';function getNavBarButton(selector){var $affixedHeaderButton=$('header.affixed '+selector);if($affixedHeaderButton.length){return $affixedHeaderButton;}else{return $('header '+selector).first();}}
function animateClone($cart,$elem,offsetTop,offsetLeft){$cart.find('.o_animate_blink').addClass('o_red_highlight o_shadow_animation').delay(500).queue(function(){$(this).removeClass("o_shadow_animation").dequeue();}).delay(2000).queue(function(){$(this).removeClass("o_red_highlight").dequeue();});return new Promise(function(resolve,reject){var $imgtodrag=$elem.find('img').eq(0);if($imgtodrag.length){var $imgclone=$imgtodrag.clone().offset({top:$imgtodrag.offset().top,left:$imgtodrag.offset().left}).addClass('o_website_sale_animate').appendTo(document.body).animate({top:$cart.offset().top+offsetTop,left:$cart.offset().left+offsetLeft,width:75,height:75,},1000,'easeInOutExpo');$imgclone.animate({width:0,height:0,},function(){resolve();$(this).detach();});}else{resolve();}});}
function updateCartNavBar(data){var $qtyNavBar=$(".my_cart_quantity");_.each($qtyNavBar,function(qty){var $qty=$(qty);$qty.parents('li:first').removeClass('d-none');$qty.html(data.cart_quantity).hide().fadeIn(600);});$(".js_cart_lines").first().before(data['website_sale.cart_lines']).end().remove();$(".js_cart_summary").first().before(data['website_sale.short_cart_summary']).end().remove();}
return{animateClone:animateClone,getNavBarButton:getNavBarButton,updateCartNavBar:updateCartNavBar,};});;

/* /website_sale/static/src/js/website_sale_payment.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.payment',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.WebsiteSalePayment=publicWidget.Widget.extend({selector:'#wrapwrap:has(#checkbox_cgv)',events:{'change #checkbox_cgv':'_onCGVCheckboxClick',},start:function(){this.$checkbox=this.$('#checkbox_cgv');this.$payButton=$('button#o_payment_form_pay');this.$checkbox.trigger('change');return this._super.apply(this,arguments);},_adaptPayButton:function(){var disabledReasons=this.$payButton.data('disabled_reasons')||{};disabledReasons.cgv=!this.$checkbox.prop('checked');this.$payButton.data('disabled_reasons',disabledReasons);this.$payButton.prop('disabled',_.contains(disabledReasons,true));},_onCGVCheckboxClick:function(){this._adaptPayButton();},});});;

/* /website_sale/static/src/js/website_sale_validate.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.validate',function(require){'use strict';var publicWidget=require('web.public.widget');var core=require('web.core');var _t=core._t;publicWidget.registry.websiteSaleValidate=publicWidget.Widget.extend({selector:'div.oe_website_sale_tx_status[data-order-id]',start:function(){var def=this._super.apply(this,arguments);this._poll_nbr=0;this._paymentTransationPollStatus();return def;},_paymentTransationPollStatus:function(){var self=this;this._rpc({route:'/shop/payment/get_status/'+parseInt(this.$el.data('order-id')),}).then(function(result){self._poll_nbr+=1;if(result.recall){if(self._poll_nbr<20){setTimeout(function(){self._paymentTransationPollStatus();},Math.ceil(self._poll_nbr/3)*1000);}else{var $message=$(result.message);var $warning=$("<i class='fa fa-warning' style='margin-right:10px;'>");$warning.attr("title",_t("We are waiting the confirmation of the bank or payment provider"));$message.find('span:first').prepend($warning);result.message=$message.html();}}
self.$el.html(result.message);});},});});;

/* /website_sale/static/src/js/website_sale_recently_viewed.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.recently_viewed',function(require){var concurrency=require('web.concurrency');var config=require('web.config');var core=require('web.core');var publicWidget=require('web.public.widget');var utils=require('web.utils');var wSaleUtils=require('website_sale.utils');var qweb=core.qweb;publicWidget.registry.productsRecentlyViewedSnippet=publicWidget.Widget.extend({selector:'.s_wsale_products_recently_viewed',xmlDependencies:['/website_sale/static/src/xml/website_sale_recently_viewed.xml'],disabledInEditableMode:false,read_events:{'click .js_add_cart':'_onAddToCart','click .js_remove':'_onRemove',},init:function(){this._super.apply(this,arguments);this._dp=new concurrency.DropPrevious();this.uniqueId=_.uniqueId('o_carousel_recently_viewed_products_');this._onResizeChange=_.debounce(this._addCarousel,100);},start:function(){this._dp.add(this._fetch()).then(this._render.bind(this));$(window).resize(()=>{this._onResizeChange();});return this._super.apply(this,arguments);},destroy:function(){this._super(...arguments);this.$el.addClass('d-none');this.$el.find('.slider').html('');},_fetch:function(){return this._rpc({route:'/shop/products/recently_viewed',}).then(res=>{var products=res['products'];if(this.editableMode&&(!products||!products.length)){return{'products':[{id:0,website_url:'#',display_name:'Product 1',price:'$ <span class="oe_currency_value">750.00</span>',},{id:0,website_url:'#',display_name:'Product 2',price:'$ <span class="oe_currency_value">750.00</span>',},{id:0,website_url:'#',display_name:'Product 3',price:'$ <span class="oe_currency_value">750.00</span>',},{id:0,website_url:'#',display_name:'Product 4',price:'$ <span class="oe_currency_value">750.00</span>',}],};}
return res;});},_render:function(res){var products=res['products'];var mobileProducts=[],webProducts=[],productsTemp=[];_.each(products,function(product){if(productsTemp.length===4){webProducts.push(productsTemp);productsTemp=[];}
productsTemp.push(product);mobileProducts.push([product]);});if(productsTemp.length){webProducts.push(productsTemp);}
this.mobileCarousel=$(qweb.render('website_sale.productsRecentlyViewed',{uniqueId:this.uniqueId,productFrame:1,productsGroups:mobileProducts,}));this.webCarousel=$(qweb.render('website_sale.productsRecentlyViewed',{uniqueId:this.uniqueId,productFrame:4,productsGroups:webProducts,}));this._addCarousel();this.$el.toggleClass('d-none',!(products&&products.length));},_addCarousel:function(){var carousel=config.device.size_class<=config.device.SIZES.SM?this.mobileCarousel:this.webCarousel;this.$('.slider').html(carousel).css('display','');},_onAddToCart:function(ev){var self=this;var $card=$(ev.currentTarget).closest('.card');this._rpc({route:"/shop/cart/update_json",params:{product_id:$card.find('input[data-product-id]').data('product-id'),add_qty:1},}).then(function(data){wSaleUtils.updateCartNavBar(data);var $navButton=wSaleUtils.getNavBarButton('.o_wsale_my_cart');var fetch=self._fetch();var animation=wSaleUtils.animateClone($navButton,$(ev.currentTarget).parents('.o_carousel_product_card'),25,40);Promise.all([fetch,animation]).then(function(values){self._render(values[0]);});});},_onRemove:function(ev){var self=this;var $card=$(ev.currentTarget).closest('.card');this._rpc({route:"/shop/products/recently_viewed_delete",params:{product_id:$card.find('input[data-product-id]').data('product-id'),},}).then(function(data){self._render(data);});},});publicWidget.registry.productsRecentlyViewedUpdate=publicWidget.Widget.extend({selector:'#product_detail',events:{'change input.product_id[name="product_id"]':'_onProductChange',},debounceValue:8000,init:function(){this._super.apply(this,arguments);this._onProductChange=_.debounce(this._onProductChange,this.debounceValue);},_updateProductView:function($input){var productId=parseInt($input.val());var cookieName='seen_product_id_'+productId;if(!parseInt(this.el.dataset.viewTrack,10)){return;}
if(utils.get_cookie(cookieName)){return;}
if($(this.el).find('.js_product.css_not_available').length){return;}
this._rpc({route:'/shop/products/recently_viewed_update',params:{product_id:productId,}}).then(function(res){if(res&&res.visitor_uuid){utils.set_cookie('visitor_uuid',res.visitor_uuid);}
utils.set_cookie(cookieName,productId,30*60);});},_onProductChange:function(ev){this._updateProductView($(ev.currentTarget));},});});;

/* /website_sale/static/src/js/website_sale_tracking.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.tracking',function(require){var publicWidget=require('web.public.widget');publicWidget.registry.websiteSaleTracking=publicWidget.Widget.extend({selector:'.oe_website_sale',events:{'click form[action="/shop/cart/update"] a.a-submit':'_onAddProductIntoCart','click a[href="/shop/checkout"]':'_onCheckoutStart','click div.oe_cart a[href^="/web?redirect"][href$="/shop/checkout"]':'_onCustomerSignin','click form[action="/shop/confirm_order"] a.a-submit':'_onOrder','click form[target="_self"] button[type=submit]':'_onOrderPayment',},start:function(){var self=this;if(this.$el.is('#product_detail')){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_view/'+productID);}
if(this.$('div.oe_website_sale_tx_status').length){this._trackGA('require','ecommerce');var orderID=this.$('div.oe_website_sale_tx_status').data('order-id');this._vpv('/stats/ecom/order_confirmed/'+orderID);this._rpc({route:'/shop/tracking_last_order/',}).then(function(o){self._trackGA('ecommerce:clear');if(o.transaction&&o.lines){self._trackGA('ecommerce:addTransaction',o.transaction);_.forEach(o.lines,function(line){self._trackGA('ecommerce:addItem',line);});}
self._trackGA('ecommerce:send');});}
return this._super.apply(this,arguments);},_trackGA:function(){var websiteGA=window.ga||function(){};websiteGA.apply(this,arguments);},_vpv:function(page){this._trackGA('send','pageview',{'page':page,'title':document.title,});},_onAddProductIntoCart:function(){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_add_to_cart/'+productID);},_onCheckoutStart:function(){this._vpv('/stats/ecom/customer_checkout');},_onCustomerSignin:function(){this._vpv('/stats/ecom/customer_signin');},_onOrder:function(){if($('#top_menu [href="/web/login"]').length){this._vpv('/stats/ecom/customer_signup');}
this._vpv('/stats/ecom/order_checkout');},_onOrderPayment:function(){var method=$('#payment_method input[name=acquirer]:checked').nextAll('span:first').text();this._vpv('/stats/ecom/order_payment/'+method);},});});;

/* /website_enterprise/static/src/js/website_enterprise.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.home_menu',function(require){'use strict';var session=require('web.session');var websiteNavbarData=require('website.navbar');websiteNavbarData.WebsiteNavbar.include({events:_.extend({},websiteNavbarData.WebsiteNavbar.prototype.events||{},{'click .o_menu_toggle':'_onMenuToggleClick',}),_onMenuToggleClick:function(ev){ev.preventDefault();var $button=$(ev.currentTarget);if(!$button.hasClass('fa')){return;}
$button.removeClass('fa fa-th').append($('<span/>',{'class':'fa fa-spin fa-spinner'}));var url='/web#home';window.location.href=url;},});});;

/* /website_form/static/src/js/website_form.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_form.animation',function(require){'use strict';var core=require('web.core');var time=require('web.time');var ajax=require('web.ajax');var publicWidget=require('web.public.widget');var _t=core._t;var qweb=core.qweb;publicWidget.registry.form_builder_send=publicWidget.Widget.extend({selector:'.s_website_form',willStart:function(){var prom;if(!$.fn.datetimepicker){prom=ajax.loadJS("/web/static/lib/tempusdominus/tempusdominus.js");}
return Promise.all([this._super.apply(this,arguments),prom]);},start:function(editable_mode){if(editable_mode){this.stop();return;}
var self=this;this.templates_loaded=ajax.loadXML('/website_form/static/src/xml/website_form.xml',qweb);this.$target.find('.o_website_form_send').on('click',function(e){self.send(e);});var l10n=_t.database.parameters;var datepickers_options={minDate:moment({y:1900}),maxDate:moment({y:9999,M:11,d:31}),calendarWeeks:true,icons:{time:'fa fa-clock-o',date:'fa fa-calendar',next:'fa fa-chevron-right',previous:'fa fa-chevron-left',up:'fa fa-chevron-up',down:'fa fa-chevron-down',},locale:moment.locale(),format:time.getLangDatetimeFormat(),};this.$target.find('.o_website_form_datetime').datetimepicker(datepickers_options);datepickers_options.format=time.getLangDateFormat();this.$target.find('.o_website_form_date').datetimepicker(datepickers_options);var $values=$('[data-for='+this.$target.attr('id')+']');if($values.length){var values=JSON.parse($values.data('values').replace('False','""').replace('None','""').replace(/'/g,'"'));var fields=_.pluck(this.$target.serializeArray(),'name');_.each(fields,function(field){if(_.has(values,field)){var $field=self.$target.find('input[name="'+field+'"], textarea[name="'+field+'"]');if(!$field.val()){$field.val(values[field]);}}});}
return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$target.find('button').off('click');},send:function(e){e.preventDefault();this.$target.find('.o_website_form_send').off().addClass('disabled');var self=this;self.$target.find('#o_website_form_result').empty();if(!self.check_error_fields({})){self.update_status('invalid');return false;}
this.form_fields=this.$target.serializeArray();$.each(this.$target.find('input[type=file]'),function(outer_index,input){$.each($(input).prop('files'),function(index,file){self.form_fields.push({name:input.name+'['+outer_index+']['+index+']',value:file});});});var form_values={};_.each(this.form_fields,function(input){if(input.name in form_values){if(Array.isArray(form_values[input.name])){form_values[input.name].push(input.value);}else{form_values[input.name]=[form_values[input.name],input.value];}}else{if(input.value!==''){form_values[input.name]=input.value;}}});ajax.post(this.$target.attr('action')+(this.$target.data('force_action')||this.$target.data('model_name')),form_values).then(function(result_data){result_data=JSON.parse(result_data);if(!result_data.id){self.update_status('error');if(result_data.error_fields){self.check_error_fields(result_data.error_fields);}}else{var success_page=self.$target.attr('data-success_page');if(success_page){$(window.location).attr('href',success_page);}
else{self.update_status('success');}
self.$target[0].reset();}}).guardedCatch(function(){self.update_status('error');});},check_error_fields:function(error_fields){var self=this;var form_valid=true;this.$target.find('.form-field').each(function(k,field){var $field=$(field);var field_name=$field.find('.col-form-label').attr('for');var inputs=$field.find('.o_website_form_input:not(#editable_select)');var invalid_inputs=inputs.toArray().filter(function(input,k,inputs){if(input.required&&input.type==='checkbox'){var checkboxes=_.filter(inputs,function(input){return input.required&&input.type==='checkbox';});return!_.any(checkboxes,function(checkbox){return checkbox.checked;});}else if($(input).hasClass('o_website_form_date')){if(!self.is_datetime_valid(input.value,'date')){return true;}}else if($(input).hasClass('o_website_form_datetime')){if(!self.is_datetime_valid(input.value,'datetime')){return true;}}
return!input.checkValidity();});$field.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');if(invalid_inputs.length||error_fields[field_name]){$field.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid')
if(_.isString(error_fields[field_name])){$field.popover({content:error_fields[field_name],trigger:'hover',container:'body',placement:'top'});$field.data("bs.popover").options.content=error_fields[field_name];$field.popover('show');}
form_valid=false;}});return form_valid;},is_datetime_valid:function(value,type_of_date){if(value===""){return true;}else{try{this.parse_date(value,type_of_date);return true;}catch(e){return false;}}},parse_date:function(value,type_of_date,value_if_empty){var date_pattern=time.getLangDateFormat(),time_pattern=time.getLangTimeFormat();var date_pattern_wo_zero=date_pattern.replace('MM','M').replace('DD','D'),time_pattern_wo_zero=time_pattern.replace('HH','H').replace('mm','m').replace('ss','s');switch(type_of_date){case'datetime':var datetime=moment(value,[date_pattern+' '+time_pattern,date_pattern_wo_zero+' '+time_pattern_wo_zero],true);if(datetime.isValid())
return time.datetime_to_str(datetime.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct datetime"),value));case'date':var date=moment(value,[date_pattern,date_pattern_wo_zero],true);if(date.isValid())
return time.date_to_str(date.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct date"),value));}
return value;},update_status:function(status){var self=this;if(status!=='success'){this.$target.find('.o_website_form_send').on('click',function(e){self.send(e);}).removeClass('disabled');}
var $result=this.$('#o_website_form_result');this.templates_loaded.then(function(){$result.replaceWith(qweb.render("website_form.status_"+status));});},});});;

/* /website_mass_mailing/static/src/js/website_mass_mailing.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('mass_mailing.website_integration',function(require){"use strict";var config=require('web.config');var core=require('web.core');var Dialog=require('web.Dialog');var utils=require('web.utils');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.subscribe=publicWidget.Widget.extend({selector:".js_subscribe",disabledInEditableMode:false,read_events:{'click .js_subscribe_btn':'_onSubscribeClick',},start:function(){var self=this;var def=this._super.apply(this,arguments);this.$popup=this.$target.closest('.o_newsletter_modal');if(this.$popup.length){return def;}
var always=function(data){var isSubscriber=data.is_subscriber;self.$('.js_subscribe_btn').prop('disabled',isSubscriber);self.$('input.js_subscribe_email').val(data.email||"").prop('disabled',isSubscriber);self.$target.removeClass('d-none');self.$('.js_subscribe_btn').toggleClass('d-none',!!isSubscriber);self.$('.js_subscribed_btn').toggleClass('d-none',!isSubscriber);};return Promise.all([def,this._rpc({route:'/website_mass_mailing/is_subscriber',params:{'list_id':this.$target.data('list-id'),},}).then(always).guardedCatch(always)]);},destroy:function(){this.$target.addClass('d-none');this._super.apply(this,arguments);},_onSubscribeClick:function(){var self=this;var $email=this.$(".js_subscribe_email:visible");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control').removeClass('is-invalid');this._rpc({route:'/website_mass_mailing/subscribe',params:{'list_id':this.$target.data('list-id'),'email':$email.length?$email.val():false,},}).then(function(result){self.$(".js_subscribe_btn").addClass('d-none');self.$(".js_subscribed_btn").removeClass('d-none');self.$('input.js_subscribe_email').prop('disabled',!!result);if(self.$popup.length){self.$popup.modal('hide');}
self.displayNotification({type:'success',title:_t("Success"),message:result.toast_content,sticky:true,});});},});publicWidget.registry.newsletter_popup=publicWidget.Widget.extend({selector:".o_newsletter_popup",disabledInEditableMode:false,start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.websiteID=this._getContext().website_id;this.listID=parseInt(this.$target.attr('data-list-id'));if(!this.listID||(utils.get_cookie(_.str.sprintf("newsletter-popup-%s-%s",this.listID,this.websiteID))&&!self.editableMode)){return Promise.all(defs);}
if(this.$target.data('content')&&this.editableMode){this._dialogInit(this.$target.data('content'));this.$target.removeData('quick-open');this.massMailingPopup.open();}else{defs.push(this._rpc({route:'/website_mass_mailing/get_content',params:{newsletter_id:self.listID,},}).then(function(data){self._dialogInit(data.popup_content,data.email||'');if(!self.editableMode&&!data.is_subscriber){if(config.device.isMobile){setTimeout(function(){self._showBanner();},5000);}else{$(document).on('mouseleave.open_popup_event',self._showBanner.bind(self));}}else{$(document).off('mouseleave.open_popup_event');}
if(self.$target.data('quick-open')){self.massMailingPopup.open();self.$target.removeData('quick-open');}}));}
return Promise.all(defs);},destroy:function(){if(this.massMailingPopup){this.massMailingPopup.close();}
this._super.apply(this,arguments);},_dialogInit:function(content,email){var self=this;this.massMailingPopup=new Dialog(this,{technical:false,$content:$('<div/>').html(content),$parentNode:this.$target,backdrop:!this.editableMode,dialogClass:'p-0'+(this.editableMode?' o_editable oe_structure oe_empty':''),renderFooter:false,size:'medium',});this.massMailingPopup.opened().then(function(){var $modal=self.massMailingPopup.$modal;$modal.find('header button.close').on('mouseup',function(ev){ev.stopPropagation();});$modal.addClass('o_newsletter_modal');$modal.find('.oe_structure').attr('data-editor-message',_t('DRAG BUILDING BLOCKS HERE'));$modal.find('.modal-dialog').addClass('modal-dialog-centered');$modal.find('.js_subscribe').data('list-id',self.listID).find('input.js_subscribe_email').val(email);self.trigger_up('widgets_start_request',{editableMode:self.editableMode,$target:$modal,});});this.massMailingPopup.on('closed',this,function(){var $modal=self.massMailingPopup.$modal;if($modal){self.$el.data('content',$modal.find('.modal-body').html());}});},_showBanner:function(){this.massMailingPopup.open();utils.set_cookie(_.str.sprintf("newsletter-popup-%s-%s",this.listID,this.websiteID),true);$(document).off('mouseleave.open_popup_event');},});});;

/* /website_animate/static/src/js/o_animate.frontend.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_animate.o_animate_frontend',function(require){'use strict';var publicWidget=require('web.public.widget');var WebsiteAnimate={win:{},items:{},offsetRatio:0.3,offsetMin:10,start:function(){var self=this;self.items=$(".o_animate");self.items.each(function(){var $el=$(this);self.reset_animation($el);});setTimeout(function(){self.attach_handlers();});},attach_handlers:function(){var self=this;var lastScroll=0;$(window).on("resize.o_animate",function(){self.win.h=$(window).height();$(window).trigger("scroll");}).trigger("resize").on("scroll.o_animate, slid.bs.carousel",(_.throttle(function(){var windowTop=$(window).scrollTop();var windowBottom=windowTop+self.win.h;var direction=(windowTop<lastScroll)?-1:1;lastScroll=windowTop;self.items.each(function(){var $el=$(this);var elHeight=$el.height();var elOffset=direction*Math.max((elHeight*self.offsetRatio),self.offsetMin);var state=$el.css("animation-play-state");var transformMatrix=$el.css('transform').replace(/[^0-9\-.,]/g,'').split(',');var transformOffset=transformMatrix[13]||transformMatrix[5];var elTop=$el.offset().top-transformOffset;var visible=windowBottom>(elTop+elOffset)&&windowTop<(elTop+elHeight-elOffset);if(visible&&(state==="paused")){$el.addClass("o_visible");self.start_animation($el);}else if(!(visible)&&$el.hasClass("o_animate_both_scroll")&&(state==="running")){$el.removeClass("o_visible");self.reset_animation($el);}});},100))).trigger("scroll");},reset_animation:function($el){var anim_name=$el.css("animation-name");$el.css({"animation-name":"dummy-none","animation-play-state":""}).removeClass("o_animated o_animating");setTimeout(function(){$el.css({"animation-name":anim_name,"animation-play-state":"paused"});},0);},start_animation:function($el){if($.browser.safari){$el.toggleClass('d-none').toggleClass('d-none',1);}
setTimeout(function(){$el.css({"animation-play-state":"running"}).addClass("o_animating").one('webkitAnimationEnd oanimationend msAnimationEnd animationend',function(e){$el.addClass("o_animated").removeClass("o_animating");$(window).trigger("resize");});});},};publicWidget.registry.WebsiteAnimate=publicWidget.Widget.extend({selector:'#wrapwrap',disabledInEditableMode:false,start:function(){WebsiteAnimate.start();$(".o_animate").css("visibility","visible");return this._super.apply(this,arguments);},});publicWidget.registry.o_animate=publicWidget.Widget.extend({selector:'.o_animation',destroy:function(){this._super.apply(this,arguments);var old_animation_classes="o_animation o_displayed o_displayed_top o_displayed_middle o_displayed_bottom o_visible o_visible_top o_visible_middle o_visible_bottom";$(".o_fade_in").addClass("o_animate o_anim_fade_in").removeClass("o_fade_in");$(".o_fade_in_down").addClass("o_animate o_anim_fade_in_down").removeClass("o_fade_in_down");$(".o_fade_in_left").addClass("o_animate o_anim_fade_in_left").removeClass("o_fade_in_left");$(".o_fade_in_right").addClass("o_animate o_anim_fade_in_right").removeClass("o_fade_in_right");$(".o_fade_in_up").addClass("o_animate o_anim_fade_in_up").removeClass("o_fade_in_up");this.$target.removeClass(old_animation_classes);},});return WebsiteAnimate;});;

/* /website_forum/static/src/js/website_forum.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_forum.website_forum',function(require){'use strict';var core=require('web.core');var weDefaultOptions=require('web_editor.wysiwyg.default_options');var wysiwygLoader=require('web_editor.loader');var publicWidget=require('web.public.widget');var session=require('web.session');var qweb=core.qweb;var _t=core._t;publicWidget.registry.websiteForum=publicWidget.Widget.extend({selector:'.website_forum',xmlDependencies:['/website_forum/static/src/xml/website_forum_share_templates.xml'],events:{'click .karma_required':'_onKarmaRequiredClick','mouseenter .o_js_forum_tag_follow':'_onTagFollowBoxMouseEnter','mouseleave .o_js_forum_tag_follow':'_onTagFollowBoxMouseLeave','mouseenter .o_forum_user_info':'_onUserInfoMouseEnter','mouseleave .o_forum_user_info':'_onUserInfoMouseLeave','mouseleave .o_forum_user_bio_expand':'_onUserBioExpandMouseLeave','click .flag:not(.karma_required)':'_onFlagAlertClick','click .vote_up:not(.karma_required), .vote_down:not(.karma_required)':'_onVotePostClick','click .o_js_validation_queue a[href*="/validate"]':'_onValidationQueueClick','click .o_wforum_validate_toggler:not(.karma_required)':'_onAcceptAnswerClick','click .o_wforum_favourite_toggle':'_onFavoriteQuestionClick','click .comment_delete':'_onDeleteCommentClick','click .js_close_intro':'_onCloseIntroClick',},start:function(){var self=this;this.lastsearch=[];$('span[data-oe-model="forum.post"][data-oe-field="content"]').find('img.float-left').removeClass('float-left');var forumLogin=_.string.sprintf('%s/web?redirect=%s',window.location.origin,escape(window.location.href));$('.forum_register_url').attr('href',forumLogin);this.$('[data-toggle="tooltip"]').tooltip({delay:0});this.$('[data-toggle="popover"]').popover({offset:8});$('input.js_select2').select2({tags:true,tokenSeparators:[',',' ','_'],maximumInputLength:35,minimumInputLength:2,maximumSelectionSize:5,lastsearch:[],createSearchChoice:function(term){if(_.filter(self.lastsearch,function(s){return s.text.localeCompare(term)===0;}).length===0){if(parseInt($('#karma').val())>=parseInt($('#karma_edit_retag').val())){return{id:'_'+$.trim(term),text:$.trim(term)+' *',isNew:true,};}}},formatResult:function(term){if(term.isNew){return'<span class="badge badge-primary">New</span> '+_.escape(term.text);}else{return _.escape(term.text);}},ajax:{url:'/forum/get_tags',dataType:'json',data:function(term){return{query:term,limit:50,};},results:function(data){var ret=[];_.each(data,function(x){ret.push({id:x.id,text:x.name,isNew:false,});});self.lastsearch=ret;return{results:ret};}},initSelection:function(element,callback){var data=[];_.each(element.data('init-value'),function(x){data.push({id:x.id,text:x.name,isNew:false});});element.val('');callback(data);},});_.each($('textarea.o_wysiwyg_loader'),function(textarea){var $textarea=$(textarea);var editorKarma=$textarea.data('karma')||0;var $form=$textarea.closest('form');var hasFullEdit=parseInt($("#karma").val())>=editorKarma;var toolbar=[['style',['style']],['font',['bold','italic','underline','clear']],['para',['ul','ol','paragraph']],['table',['table']],];if(hasFullEdit){toolbar.push(['insert',['linkPlugin','mediaPlugin']]);}
toolbar.push(['history',['undo','redo']]);var options={height:200,minHeight:80,toolbar:toolbar,styleWithSpan:false,styleTags:_.without(weDefaultOptions.styleTags,'h1','h2','h3'),recordInfo:{context:self._getContext(),res_model:'forum.post',res_id:+window.location.pathname.split('-').pop(),},};if(!hasFullEdit){options.plugins={LinkPlugin:false,MediaPlugin:false,};}
wysiwygLoader.load(self,$textarea[0],options).then(wysiwyg=>{$form.find('.note-editable').find('img.float-left').removeClass('float-left');$form.on('click','button .a-submit',()=>{wysiwyg.save();});});});_.each(this.$('.o_wforum_bio_popover'),authorBox=>{$(authorBox).popover({trigger:'hover',offset:10,animation:false,html:true,});});return this._super.apply(this,arguments);},_onKarmaRequiredClick:function(ev){var $karma=$(ev.currentTarget);var karma=$karma.data('karma');var forum_id=$('#wrapwrap').data('forum_id');if(!karma){return;}
ev.preventDefault();var msg=karma+' '+_t("karma is required to perform this action. ");var title=_t("Karma Error");if(forum_id){msg+='<a class="alert-link" href="/forum/'+forum_id+'/faq">'+_t("Read the guidelines to know how to gain karma.")+'</a>';}
if(session.is_website_user){msg=_t("Sorry you must be logged in to perform this action");title=_t("Access Denied");}
this.call('crash_manager','show_warning',{message:msg,title:title,},{sticky:false,});},_onTagFollowBoxMouseEnter:function(ev){$(ev.currentTarget).find('.o_forum_tag_follow_box').stop().fadeIn().css('display','block');},_onTagFollowBoxMouseLeave:function(ev){$(ev.currentTarget).find('.o_forum_tag_follow_box').stop().fadeOut().css('display','none');},_onUserInfoMouseEnter:function(ev){$(ev.currentTarget).parent().find('.o_forum_user_bio_expand').delay(500).toggle('fast');},_onUserInfoMouseLeave:function(ev){$(ev.currentTarget).parent().find('.o_forum_user_bio_expand').clearQueue();},_onUserBioExpandMouseLeave:function(ev){$(ev.currentTarget).fadeOut('fast');},_onFlagAlertClick:function(ev){var self=this;ev.preventDefault();var $link=$(ev.currentTarget);this._rpc({route:$link.data('href')||($link.attr('href')!=='#'&&$link.attr('href'))||$link.closest('form').attr('action'),}).then(function(data){if(data.error){var message;if(data.error==='anonymous_user'){message=_t("Sorry you must be logged to flag a post");}else if(data.error==='post_already_flagged'){message=_t("This post is already flagged");}else if(data.error==='post_non_flaggable'){message=_t("This post can not be flagged");}
self.call('crash_manager','show_warning',{message:message,title:_t("Access Denied"),},{sticky:false,});}else if(data.success){var elem=$link;if(data.success==='post_flagged_moderator'){elem.data('href')&&elem.html(' Flagged');var c=parseInt($('#count_flagged_posts').html(),10);c++;$('#count_flagged_posts').html(c);}else if(data.success==='post_flagged_non_moderator'){elem.data('href')&&elem.html(' Flagged');var forumAnswer=elem.closest('.forum_answer');forumAnswer.fadeIn(1000);forumAnswer.slideUp(1000);}}});},_onVotePostClick:function(ev){var self=this;ev.preventDefault();var $btn=$(ev.currentTarget);this._rpc({route:$btn.data('href'),}).then(function(data){if(data.error){var message;if(data.error==='own_post'){message=_t('Sorry, you cannot vote for your own posts');}else if(data.error==='anonymous_user'){message=_t('Sorry you must be logged to vote');}
self.call('crash_manager','show_warning',{message:message,title:_t("Access Denied"),},{sticky:false,});}else{var $container=$btn.closest('.vote');var $items=$container.children();var $voteUp=$items.filter('.vote_up');var $voteDown=$items.filter('.vote_down');var $voteCount=$items.filter('.vote_count');var userVote=parseInt(data['user_vote']);$voteUp.prop('disabled',userVote===1);$voteDown.prop('disabled',userVote===-1);$items.removeClass('text-success text-danger text-muted o_forum_vote_animate');void $container[0].offsetWidth;if(userVote===1){$voteUp.addClass('text-success');$voteCount.addClass('text-success');}
if(userVote===-1){$voteDown.addClass('text-danger');$voteCount.addClass('text-danger');}
$voteCount.html(data['vote_count']).addClass('o_forum_vote_animate');}});},_onValidationQueueClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);$link.parents('.post_to_validate').hide();$.get($link.attr('href')).then(()=>{var left=$('.o_js_validation_queue:visible').length;var type=$('h2.o_page_header a.active').data('type');$('#count_post').text(left);$('#moderation_tools a[href*="/'+type+'_"]').find('strong').text(left);if(!left){this.$('.o_caught_up_alert').removeClass('d-none');}},function(){$link.parents('.o_js_validation_queue > div').addClass('bg-danger text-white').css('background-color','#FAA');$link.parents('.post_to_validate').show();});},_onAcceptAnswerClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var target=$link.data('target');this._rpc({route:$link.data('href'),}).then(data=>{if(data.error){if(data.error==='anonymous_user'){var message=_t("Sorry, anonymous users cannot choose correct answer.");}
this.call('crash_manager','show_warning',{message:message,title:_t("Access Denied"),},{sticky:false,});}else{_.each(this.$('.forum_answer'),answer=>{var $answer=$(answer);var isCorrect=$answer.is(target)?data:false;var $toggler=$answer.find('.o_wforum_validate_toggler');var newHelper=isCorrect?$toggler.data('helper-decline'):$toggler.data('helper-accept');$answer.toggleClass('o_wforum_answer_correct',isCorrect);$toggler.tooltip('dispose').attr('data-original-title',newHelper).tooltip({delay:0});});}});},_onFavoriteQuestionClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);this._rpc({route:$link.data('href'),}).then(function(data){$link.toggleClass('o_wforum_gold fa-star',data).toggleClass('fa-star-o text-muted',!data);});},_onDeleteCommentClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $container=$link.closest('.o_wforum_post_comments_container');this._rpc({route:$link.closest('form').attr('action'),}).then(function(){$link.closest('.o_wforum_post_comment').remove();var count=$container.find('.o_wforum_post_comment').length;if(count){$container.find('.o_wforum_comments_count').text(count);}else{$container.find('.o_wforum_comments_count_header').remove();}});},_onCloseIntroClick:function(ev){ev.preventDefault();document.cookie='forum_welcome_message = false';$('.forum_intro').slideUp();return true;},});publicWidget.registry.websiteForumSpam=publicWidget.Widget.extend({selector:'.o_wforum_moderation_queue',xmlDependencies:['/website_forum/static/src/xml/website_forum_share_templates.xml'],events:{'click .o_wforum_select_all_spam':'_onSelectallSpamClick','click .o_wforum_mark_spam':'async _onMarkSpamClick','input #spamSearch':'_onSpamSearchInput',},start:function(){this.spamIDs=this.$('.modal').data('spam-ids');return this._super.apply(this,arguments);},_onSelectallSpamClick:function(ev){var $spamInput=this.$('.modal .tab-pane.active input');$spamInput.prop('checked',true);},_onSpamSearchInput:function(ev){var self=this;var toSearch=$(ev.currentTarget).val();return this._rpc({model:'forum.post',method:'search_read',args:[[['id','in',self.spamIDs],'|',['name','ilike',toSearch],['content','ilike',toSearch]],['name','content']],kwargs:{}}).then(function(o){_.each(o,function(r){r.content=$('<p>'+$(r.content).html()+'</p>').text().substring(0,250);});self.$('div.post_spam').html(qweb.render('website_forum.spam_search_name',{posts:o,}));});},_onMarkSpamClick:function(ev){var key=this.$('.modal .tab-pane.active').data('key');var $inputs=this.$('.modal .tab-pane.active input.custom-control-input:checked');var values=_.map($inputs,function(o){return parseInt(o.value);});return this._rpc({model:'forum.post',method:'mark_as_offensive_batch',args:[this.spamIDs,key,values],}).then(function(){window.location.reload();});},});});;

/* /website_forum/static/src/js/website_forum.share.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_forum.share',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var qweb=core.qweb;var ForumShare=publicWidget.registry.socialShare.extend({selector:'',xmlDependencies:publicWidget.registry.socialShare.prototype.xmlDependencies.concat(['/website_forum/static/src/xml/website_forum_share_templates.xml']),events:{},init:function(parent,options,targetType){this._super.apply(this,arguments);this.targetType=targetType;},start:function(){var def=this._super.apply(this,arguments);this._onMouseEnter();return def;},_bindSocialEvent:function(){this._super.apply(this,arguments);$('.oe_share_bump').click($.proxy(this._postBump,this));},_render:function(){if(!this.targetType){this._super.apply(this,arguments);}else if(this.targetType==='social-alert'){$('.row .question').before(qweb.render('website.social_alert',{medias:this.socialList}));}else{$('body').append(qweb.render('website.social_modal',{medias:this.socialList,target_type:this.targetType}));$('#oe_social_share_modal').modal('show');}},_postBump:function(){this._rpc({route:'/forum/post/bump',params:{post_id:this.element.data('id'),},});},});publicWidget.registry.websiteForumShare=publicWidget.Widget.extend({selector:'.website_forum',events:{'click :not(.karma_required).oe_social_share_call':'_onShareCallClick',},start:function(){if(sessionStorage.getItem('social_share')){var socialData=JSON.parse(sessionStorage.getItem('social_share'));(new ForumShare(this,false,socialData.targetType)).attachTo($(document.body));sessionStorage.removeItem('social_share');}
var $questionContainer=$('.oe_js_bump');if($questionContainer.length){new ForumShare(this,false,'social-alert').attachTo($questionContainer);}
return this._super.apply(this,arguments);},_onShareCallClick:function(ev){sessionStorage.setItem('social_share',JSON.stringify({targetType:$(ev.currentTarget).data('social-target-type'),}));},});});;

/* /website_event/static/src/js/website_geolocation.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.geolocation',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.visitor=publicWidget.Widget.extend({selector:".oe_country_events, .country_events",disabledInEditableMode:false,start:function(){var defs=[this._super.apply(this,arguments)];var self=this;var $eventList=this.$('.country_events_list');this._originalContent=$eventList[0].outerHTML;defs.push(this._rpc({route:'/event/get_country_event_list'}).then(function(data){if(data){self._$loadedContent=$(data);self._$loadedContent.addClass('o_temp_auto_element');self._$loadedContent.attr('data-temp-auto-element-original-content',self._originalContent);$eventList.replaceWith(self._$loadedContent);}}));return Promise.all(defs);},destroy:function(){this._super.apply(this,arguments);if(this._$loadedContent){this._$loadedContent.replaceWith(this._originalContent);}},});});;

/* /website_event/static/src/js/website_event.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.website_event',function(require){var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var publicWidget=require('web.public.widget');var _t=core._t;var EventRegistrationForm=Widget.extend({events:{'click .o_wevent_registration_btn':'_onRegistrationBtnClick',},start:function(){var self=this;var res=this._super.apply(this.arguments).then(function(){$('#registration_form .a-submit').off('click').removeClass('a-submit').click(function(ev){self.on_click(ev);});});return res;},on_click:function(ev){ev.preventDefault();ev.stopPropagation();var $form=$(ev.currentTarget).closest('form');var $button=$(ev.currentTarget).closest('[type="submit"]');var post={};$('#registration_form table').siblings('.alert').remove();$('#registration_form select').each(function(){post[$(this).attr('name')]=$(this).val();});var tickets_ordered=_.some(_.map(post,function(value,key){return parseInt(value);}));if(!tickets_ordered){$('<div class="alert alert-info"/>').text(_t('Please select at least one ticket.')).insertAfter('#registration_form table');return new Promise(function(){});}else{$button.attr('disabled',true);return ajax.jsonRpc($form.attr('action'),'call',post).then(function(modal){var $modal=$(modal);$modal.modal({backdrop:'static',keyboard:false});$modal.find('.modal-body > div').removeClass('container');$modal.appendTo('body').modal();$modal.on('click','.js_goto_event',function(){$modal.modal('hide');$button.prop('disabled',false);});$modal.on('click','.close',function(){$button.prop('disabled',false);});});}},_onRegistrationBtnClick:function(ev){var $btn=$(ev.currentTarget);$btn.toggleClass('btn-primary text-left pl-0');$btn.siblings().toggleClass('d-none');},});publicWidget.registry.EventRegistrationFormInstance=publicWidget.Widget.extend({selector:'#registration_form',start:function(){var def=this._super.apply(this,arguments);var instance=new EventRegistrationForm(this);return Promise.all([def,instance.attachTo(this.$el)]);},});return EventRegistrationForm;});;

/* /website_event_track/static/src/js/website_event_track.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event_track.website_event_track',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.websiteEventTrack=publicWidget.Widget.extend({selector:'.o_wevent_event',events:{'input #event_track_search':'_onEventTrackSearchInput',},_onEventTrackSearchInput:function(ev){ev.preventDefault();var text=$(ev.currentTarget).val();var filter=_.str.sprintf(':containsLike(%s)',text);$('#search_summary').removeClass('invisible');var $tracks=$('.event_track');$('#search_number').text($tracks.filter(filter).length);$tracks.removeClass('invisible').not(filter).addClass('invisible');},});});;

/* /website_crm_partner_assign/static/src/js/crm_partner_assign.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('crm.partner_assign',function(require){'use strict';var publicWidget=require('web.public.widget');var time=require('web.time');publicWidget.registry.crmPartnerAssign=publicWidget.Widget.extend({selector:'#wrapwrap:has(.interested_partner_assign_form, .desinterested_partner_assign_form, .opp-stage-button, .new_opp_form)',events:{'click .interested_partner_assign_confirm':'_onInterestedPartnerAssignConfirm','click .desinterested_partner_assign_confirm':'_onDesinterestedPartnerAssignConfirm','click .opp-stage-button':'_onOppStageButtonClick','change .edit_contact_form .country_id':'_onEditContactFormChange','click .edit_contact_confirm':'_onEditContactConfirm','click .new_opp_confirm':'_onNewOppConfirm','click .edit_opp_confirm':'_onEditOppConfirm','change .edit_opp_form .next_activity':'_onChangeNextActivity','click div.input-group span.fa-calendar':'_onCalendarIconClick',},_buttonExec:function($btn,callback){$btn.prop('disabled',true);return callback.call(this).guardedCatch(function(){$btn.prop('disabled',false);});},_confirmInterestedPartner:function(){return this._rpc({model:'crm.lead',method:'partner_interested',args:[[parseInt($('.interested_partner_assign_form .assign_lead_id').val())],$('.interested_partner_assign_form .comment_interested').val()],}).then(function(){window.location.href='/my/leads';});},_confirmDesinterestedPartner:function(){return this._rpc({model:'crm.lead',method:'partner_desinterested',args:[[parseInt($('.desinterested_partner_assign_form .assign_lead_id').val())],$('.desinterested_partner_assign_form .comment_desinterested').val(),$('.desinterested_partner_assign_form .contacted_desinterested').prop('checked'),$('.desinterested_partner_assign_form .customer_mark_spam').prop('checked'),],}).then(function(){window.location.href='/my/leads';});},_changeOppStage:function(leadID,stageID){return this._rpc({model:'crm.lead',method:'write',args:[[leadID],{stage_id:stageID,}],context:_.extend({website_partner_assign:1}),}).then(function(){window.location.reload();});},_editContact:function(){return this._rpc({model:'crm.lead',method:'write',args:[[parseInt($('.edit_contact_form .opportunity_id').val())],{partner_name:$('.edit_contact_form .partner_name').val(),phone:$('.edit_contact_form .phone').val(),mobile:$('.edit_contact_form .mobile').val(),email_from:$('.edit_contact_form .email_from').val(),street:$('.edit_contact_form .street').val(),street2:$('.edit_contact_form .street2').val(),city:$('.edit_contact_form .city').val(),zip:$('.edit_contact_form .zip').val(),state_id:parseInt($('.edit_contact_form .state_id').find(':selected').attr('value')),country_id:parseInt($('.edit_contact_form .country_id').find(':selected').attr('value')),}],}).then(function(){window.location.reload();});},_createOpportunity:function(){return this._rpc({model:'crm.lead',method:'create_opp_portal',args:[{contact_name:$('.new_opp_form .contact_name').val(),title:$('.new_opp_form .title').val(),description:$('.new_opp_form .description').val(),}],}).then(function(response){if(response.errors){$('#new-opp-dialog .alert').remove();$('#new-opp-dialog div:first').prepend('<div class="alert alert-danger">'+response.errors+'</div>');return Promise.reject(response);}else{window.location='/my/opportunity/'+response.id;}});},_editOpportunity:function(){return this._rpc({model:'crm.lead',method:'update_lead_portal',args:[[parseInt($('.edit_opp_form .opportunity_id').val())],{date_deadline:this._parse_date($('.edit_opp_form .date_deadline').val()),planned_revenue:parseFloat($('.edit_opp_form .planned_revenue').val()),probability:parseFloat($('.edit_opp_form .probability').val()),activity_type_id:parseInt($('.edit_opp_form .next_activity').find(':selected').attr('data')),activity_summary:$('.edit_opp_form .activity_summary').val(),activity_date_deadline:this._parse_date($('.edit_opp_form .activity_date_deadline').val()),priority:$('input[name="PriorityRadioOptions"]:checked').val(),}],}).then(function(){window.location.reload();});},_onInterestedPartnerAssignConfirm:function(ev){ev.preventDefault();ev.stopPropagation();if($('.interested_partner_assign_form .comment_interested').val()&&$('.interested_partner_assign_form .contacted_interested').prop('checked')){this._buttonExec($(ev.currentTarget),this._confirmInterestedPartner);}else{$('.interested_partner_assign_form .error_partner_assign_interested').css('display','block');}},_onDesinterestedPartnerAssignConfirm:function(ev){ev.preventDefault();ev.stopPropagation();this._buttonExec($(ev.currentTarget),this._confirmDesinterestedPartner);},_onOppStageButtonClick:function(ev){var $btn=$(ev.currentTarget);this._buttonExec($btn,this._changeOppStage.bind(this,parseInt($btn.attr('opp')),parseInt($btn.attr('data'))));},_onEditContactFormChange:function(ev){var countryID=$('.edit_contact_form .country_id').find(':selected').attr('value');$('.edit_contact_form .state[country!='+countryID+']').css('display','none');$('.edit_contact_form .state[country='+countryID+']').css('display','block');},_onEditContactConfirm:function(ev){ev.preventDefault();ev.stopPropagation();this._buttonExec($(ev.currentTarget),this._editContact);},_onNewOppConfirm:function(ev){ev.preventDefault();ev.stopPropagation();this._buttonExec($(ev.currentTarget),this._createOpportunity);},_onEditOppConfirm:function(ev){ev.preventDefault();ev.stopPropagation();if($(".edit_opp_form")[0].checkValidity()){this._buttonExec($(ev.currentTarget),this._editOpportunity);}},_onChangeNextActivity:function(ev){var $selected=$('.edit_opp_form .next_activity').find(':selected');if($selected.attr('activity_summary')){$('.edit_opp_form .activity_summary').val($selected.attr('activity_summary'));}
if($selected.attr('delay_count')){var now=moment();var date=now.add(parseInt($selected.attr('delay_count')),$selected.attr('delay_unit'));$('.edit_opp_form .activity_date_deadline').val(date.format(time.getLangDateFormat()));}},_onCalendarIconClick:function(ev){$(ev.currentTarget).closest('div.date').datetimepicker({format:time.getLangDateFormat(),icons:{time:'fa fa-clock-o',date:'fa fa-calendar',up:'fa fa-chevron-up',down:'fa fa-chevron-down',},});},_parse_date:function(value){console.log(value);var date=moment(value,"YYYY-MM-DD",true);if(date.isValid()){return time.date_to_str(date.toDate());}
else{return false;}},});});;

/* /website_mail_channel/static/src/js/website_mail_channel.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_mail_channel',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.websiteMailChannel=publicWidget.Widget.extend({selector:'#wrapwrap',events:{'click .o_mg_link_hide':'_onHideLinkClick','click .o_mg_link_show':'_onShowLinkClick','click button.o_mg_read_more':'_onReadMoreClick',},_onHideLinkClick:function(ev){ev.preventDefault();ev.stopPropagation();var $link=$(ev.currentTarget);var $container=$link.parents('div').first();$container.find('.o_mg_link_hide').first().hide();$container.find('.o_mg_link_show').first().show();$container.find('.o_mg_link_content').first().show();},_onShowLinkClick:function(ev){ev.preventDefault();ev.stopPropagation();var $link=$(ev.currentTarget);var $container=$link.parents('div').first();$container.find('.o_mg_link_hide').first().show();$container.find('.o_mg_link_show').first().hide();$container.find('.o_mg_link_content').first().hide();},_onReadMoreClick:function(ev){var $link=$(ev.target);this._rpc({route:$link.data('href'),params:{last_displayed_id:$link.data('msg-id'),},}).then(function(data){if(!data){return;}
var $threadContainer=$link.parents('.o_mg_replies').first().find('ul.list-unstyled');if($threadContainer){var $lastMsg=$threadContainer.find('li.media').last();$(data).find('li.media').insertAfter($lastMsg);$(data).find('p.well').appendTo($threadContainer);}
var $showMore=$link.parents('p.well').first();$showMore.remove();return;});},});});;

/* /website_mail_channel/static/src/js/website_mail_channel.snippet.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_mail_channel.snippet',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.follow_alias=publicWidget.Widget.extend({selector:".js_follow_alias",disabledInEditableMode:false,start:function(){var self=this;this.is_user=false;var unsubscribePage=window.location.search.slice(1).split('&').indexOf("unsubscribe")>=0;var always=function(data){self.is_user=data.is_user;self.email=data.email;self.$target.find('.js_mg_link').attr('href','/groups/'+self.$target.data('id'));if(unsubscribePage&&self.is_user){self.$target.find(".js_mg_follow_form").remove();}
self.toggle_subscription(data.is_member?'on':'off',data.email);self.$target.removeClass('d-none');};this._rpc({route:'/groups/is_member',params:{model:this.$target.data('object'),channel_id:this.$target.data('id'),get_alias_info:true,},}).then(always).guardedCatch(always);if(!this.editableMode){this.$('> .alert').addClass('d-none');this.$('> .input-group-append.d-none').removeClass('d-none');this.$('.js_follow_btn, .js_unfollow_btn').on('click',function(event){event.preventDefault();self._onClick();});this.$('.js_follow_btn').on('click',function(ev){if($(ev.currentTarget).closest('.js_mg_follow_form').length){self.$('.js_follow_email').val($(ev.currentTarget).closest('.js_mg_follow_form').find('.js_follow_email').val());}});}
return this._super.apply(this,arguments);},_onClick:function(){var self=this;var $email=this.$target.find(".js_follow_email");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var subscription_action=this.$target.attr("data-follow")||"off";if(window.location.search.slice(1).split('&').indexOf("unsubscribe")>=0){subscription_action='on';}
this._rpc({route:'/groups/subscription',params:{'channel_id':+this.$target.data('id'),'object':this.$target.data('object'),'subscription':subscription_action,'email':$email.length?$email.val():false,},}).then(function(follow){self.toggle_subscription(follow,self.email);});},toggle_subscription:function(follow,email){var alias_done=this.get_alias_info();if(follow==="on"){this.$target.find(".js_mg_follow_form").addClass('d-none');this.$target.find(".js_mg_details").removeClass('d-none');this.$target.find(".js_mg_confirmation").addClass('d-none');}else if(follow==="off"){this.$target.find(".js_mg_follow_form").removeClass('d-none');this.$target.find(".js_mg_details").addClass('d-none');this.$target.find(".js_mg_confirmation").addClass('d-none');}else if(follow==="email"){this.$target.find(".js_mg_follow_form").addClass('d-none');this.$target.find(".js_mg_details").addClass('d-none');this.$target.find(".js_mg_confirmation").removeClass('d-none');}else{console.error("Unknown subscription action",follow);}
this.$target.find('input.js_follow_email').val(email?email:"").attr("disabled",follow==="on"||(email.length&&this.is_user)?"disabled":false);this.$target.attr("data-follow",follow);return Promise.resolve(alias_done);},get_alias_info:function(){var self=this;if(!this.$target.data('id')){return Promise.resolve();}
return this._rpc({route:'/groups/'+this.$target.data('id')+'/get_alias_info'}).then(function(data){if(data.alias_name){self.$target.find('.js_mg_email').attr('href','mailto:'+data.alias_name);self.$target.find('.js_mg_email').removeClass('d-none');}
else{self.$target.find('.js_mg_email').addClass('d-none');}}).guardedCatch(function(res){res.event.preventDefault();});}});});;

/* /website_sale_stock/static/src/js/variant_mixin.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale_stock.VariantMixin',function(require){'use strict';var VariantMixin=require('sale.VariantMixin');var publicWidget=require('web.public.widget');var ajax=require('web.ajax');var core=require('web.core');var QWeb=core.qweb;var xml_load=ajax.loadXML('/website_sale_stock/static/src/xml/website_sale_stock_product_availability.xml',QWeb);VariantMixin._onChangeCombinationStock=function(ev,$parent,combination){var product_id=0;if($parent.find('input.product_id:checked').length){product_id=$parent.find('input.product_id:checked').val();}else{product_id=$parent.find('.product_id').val();}
var isMainProduct=combination.product_id&&($parent.is('.js_main_product')||$parent.is('.main_product'))&&combination.product_id===parseInt(product_id);if(!this.isWebsite||!isMainProduct){return;}
var qty=$parent.find('input[name="add_qty"]').val();$parent.find('#add_to_cart').removeClass('out_of_stock');$parent.find('#buy_now').removeClass('out_of_stock');if(combination.product_type==='product'&&_.contains(['always','threshold'],combination.inventory_availability)){combination.virtual_available-=parseInt(combination.cart_qty);if(combination.virtual_available<0){combination.virtual_available=0;}
if(qty>combination.virtual_available){var $input_add_qty=$parent.find('input[name="add_qty"]');qty=combination.virtual_available||1;$input_add_qty.val(qty);}
if(qty>combination.virtual_available||combination.virtual_available<1||qty<1){$parent.find('#add_to_cart').addClass('disabled out_of_stock');$parent.find('#buy_now').addClass('disabled out_of_stock');}}
xml_load.then(function(){$('.oe_website_sale').find('.availability_message_'+combination.product_template).remove();var $message=$(QWeb.render('website_sale_stock.product_availability',combination));$('div.availability_messages').html($message);});};publicWidget.registry.WebsiteSale.include({_onChangeCombination:function(){this._super.apply(this,arguments);VariantMixin._onChangeCombinationStock.apply(this,arguments);}});return VariantMixin;});;

/* /website_profile/static/src/js/website_profile.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_profile.website_profile',function(require){'use strict';var publicWidget=require('web.public.widget');var wysiwygLoader=require('web_editor.loader');publicWidget.registry.websiteProfile=publicWidget.Widget.extend({selector:'.o_wprofile_email_validation_container',read_events:{'click .send_validation_email':'_onSendValidationEmailClick','click .validated_email_close':'_onCloseValidatedEmailClick',},_onSendValidationEmailClick:function(ev){ev.preventDefault();var self=this;var $element=$(ev.currentTarget);this._rpc({route:'/profile/send_validation_email',params:{'redirect_url':$element.data('redirect_url')},}).then(function(data){if(data){self.$('button.validation_email_close').click();}});},_onCloseValidatedEmailClick:function(){this._rpc({route:'/profile/validate_email/close',});},});publicWidget.registry.websiteProfileEditor=publicWidget.Widget.extend({selector:'.o_wprofile_editor_form',read_events:{'click .o_forum_profile_pic_edit':'_onEditProfilePicClick','change .o_forum_file_upload':'_onFileUploadChange','click .o_forum_profile_pic_clear':'_onProfilePicClearClick','click .o_wprofile_submit_btn':'_onSubmitClick',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var $textarea=this.$('textarea.o_wysiwyg_loader');var loadProm=wysiwygLoader.load(this,$textarea[0],{recordInfo:{context:this._getContext(),res_model:'res.users',res_id:parseInt(this.$('input[name=user_id]').val()),},}).then(wysiwyg=>{this._wysiwyg=wysiwyg;});return Promise.all([def,loadProm]);},_onEditProfilePicClick:function(ev){ev.preventDefault();$(ev.currentTarget).closest('form').find('.o_forum_file_upload').trigger('click');},_onFileUploadChange:function(ev){if(!ev.currentTarget.files.length){return;}
var $form=$(ev.currentTarget).closest('form');var reader=new window.FileReader();reader.readAsDataURL(ev.currentTarget.files[0]);reader.onload=function(ev){$form.find('.o_forum_avatar_img').attr('src',ev.target.result);};$form.find('#forum_clear_image').remove();},_onProfilePicClearClick:function(ev){var $form=$(ev.currentTarget).closest('form');$form.find('.o_forum_avatar_img').attr('src','/web/static/src/img/placeholder.png');$form.append($('<input/>',{name:'clear_image',id:'forum_clear_image',type:'hidden',}));},_onSubmitClick:function(){if(this._wysiwyg){this._wysiwyg.save();}},});return publicWidget.registry.websiteProfile;});;

/* /openerp_website/static/src/js/layout/animate_children.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_animate_in_children',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.o_animate_in_children=sAnimation.Class.extend({selector:'.o_animate_in_children',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var delay=0;_.each(this.$el.children(),function(el){$(el).css('transition-delay',delay+'ms');delay+=100;});return def;},destroy:function(){this._super.apply(this,arguments);this.$el.children().css('transition-delay','');},});});;

/* /openerp_website/static/src/js/layout/footer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.footer',function(require){"use strict";var config=require('web.config');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.footer_main=sAnimation.Class.extend({selector:'main + footer',start:function(){var def=this._super.apply(this,arguments);var $body=$("body");$body.on("hidden.bs.modal",function(){_.defer(function(){if($(".modal").is(":visible")){$body.addClass("modal-open");}});});var self=this;var $win=$(window);var footer_effect=!this.editableMode&&config.device.size_class>config.device.SIZES.MD&&!this.$el.find('#footer').is('.o_footer_effect_disable')&&this.$el.prev('main').outerHeight()>=$win.outerHeight();this.$el.toggleClass('o_footer_effect',footer_effect);if(!footer_effect){return def;}
var checkFooterSize=function(){self.$el.parent().css('padding-bottom',(config.device.size_class<=config.device.SIZES.MD)?0:self.$el.outerHeight());};checkFooterSize();$win.on('resize.footer_main',_.debounce(checkFooterSize,250));this.checkIfSearch=function(e){if((e.ctrlKey||e.metaKey)&&String.fromCharCode(e.which).toLowerCase()==='f'){self.destroy();}};$win.on('keydown.footer_main',this.checkIfSearch);return def;},destroy:function(){this._super.apply(this,arguments);this.$el.removeClass('o_footer_effect');this.$el.parent().css('padding-bottom',0);$(window).off('.footer_main');},});});;

/* /openerp_website/static/src/js/layout/top_menu.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.top_menu',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');var config=require('web.config');if(config.device.size_class<=config.device.SIZES.VSM){sAnimation.registry.o_mobile_sub_nav=sAnimation.Class.extend({selector:'.o_sub_nav',events:{'click ul [data-toggle=dropdown]':'_onToggleClick',},_onToggleClick:function(ev){ev.preventDefault();ev.stopPropagation();$(ev.currentTarget).parent().toggleClass('show').siblings().removeClass('show');},});}
sAnimation.registry.top_menu_init=sAnimation.Class.extend({selector:'#wrapwrap',start:function(){var $win=$(window);var $body=$('#wrapwrap');var $header=$body.find('.o_main_header');var $ctaContainer=$header.find('.call-to-action');var ctaOuterWidth=$ctaContainer.find('>.btn').outerWidth(true)+2;var headerHeight=$header.outerHeight();var isDesktop=undefined;checkMindowMedia();$win.on('resize',_.throttle(checkMindowMedia,250));function checkMindowMedia(){var old=isDesktop;isDesktop=($win.outerWidth(true)>=576);if(old!==isDesktop){onScrollWindow();}}
$win.on('scroll',_.throttle(onScrollWindow,25));function onScrollWindow(e){var isScrolled=$win.scrollTop()>headerHeight;$header.toggleClass('o_scrolled',isScrolled);$ctaContainer.css('max-width',(isScrolled&&isDesktop?ctaOuterWidth:0));}
var timer;$header.on('click','.o_primary_nav .dropdown-toggle',function(e){e.preventDefault();var $a=$(this);clearTimeout(timer);$a.parent().toggleClass('show');$a.closest('ul').toggleClass('o_sub_opened',$a.parent().hasClass('show'));if($a.closest('.o_primary_nav').children('.show').length>0){$header.addClass('o_sub_opened');}else{timer=setTimeout(function(){$header.removeClass('o_sub_opened');},200);}});$header.on('click','.o_primary_nav .o_secondary_nav',function(e){if(e.target===e.currentTarget){$header.find('.show').removeClass('show');$header.find('.o_sub_opened').addBack().removeClass('o_sub_opened');}});$header.on('click','.o_mobile_menu_toggle',function(e){e.preventDefault();$(this).find('i').toggleClass('fa-bars fa-times');$header.toggleClass('o_mobile_menu_opened');});return this._super.apply(this,arguments);},});});;

/* /openerp_website/static/src/js/layout/top_banner.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.js_top_banner',function(require){'use strict';var config=require('web.config');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.js_top_banner=sAnimation.Class.extend({selector:'.js_top_banner',innerSelector1:'.row, .blog_title',innerSelector2:'[style*="background-image"]',start:function(){this._super.apply(this,arguments);if(this.editableMode||config.device.size_class<=config.device.SIZES.VSM){return;}
var $win=$(window);this.$inner=this.$(this.innerSelector1);this.$inner_bg=this.$(this.innerSelector2).addBack().filter(this.innerSelector2).last();var bgSize=(this.$inner_bg.css('background-size')||'');if(bgSize.indexOf('%')<0){this.$inner_bg=$();}else{bgSize=bgSize.split(' ');var bgStart='';var bgEnd='%';if(bgSize[0]!=='auto'){bgEnd+=' auto';}else{bgStart='auto ';}}
var bannerHeight=Math.max(450,this.$el.outerHeight(true));var bannerMarginBottom=parseFloat(this.$el.css('margin-bottom'));var scrollFactor=1.6;var initialOpacity=(this.$inner_bg.length>0?this.$inner_bg:this.$inner).css('opacity');var updateCallback=_.throttle(_.bind(this.$inner_bg.length>0?_updateBannerBg:_updateBanner,this),10);updateCallback();$win.scrollTop($win.scrollTop()-(bannerMarginBottom-parseFloat(this.$el.css('margin-bottom'))));$win.on('scroll.js_top_banner',updateCallback);function _updateBanner(){var top=Math.min($win.scrollTop(),bannerHeight/scrollFactor);var percentageHidden=top/bannerHeight*scrollFactor;this.el.style.setProperty('margin-bottom',(bannerMarginBottom-top*(scrollFactor-1))+'px','important');this.$inner.css('opacity',initialOpacity*(1-percentageHidden));}
function _updateBannerBg(){var top=Math.min($win.scrollTop(),bannerHeight);var percentageHidden=top/bannerHeight;this.$inner_bg.css({backgroundSize:bgStart+(100+15*percentageHidden)+bgEnd,opacity:initialOpacity*(1-percentageHidden),});}},destroy:function(){this._super.apply(this,arguments);$(window).off('.js_top_banner');this.el.style.removeProperty('margin-bottom');if(this.$inner){this.$inner.css('opacity','');}
if(this.$inner_bg){this.$inner_bg.css({backgroundSize:'',opacity:''});}},});});;

/* /openerp_website/static/src/js/layout/ripple.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.ripple',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.ripple=sAnimation.Class.extend({selector:".btn:not(.o_no_ripple), .dropdown-item:not(.o_no_ripple), .o_main_header a:not(.o_store_link):not(.o_no_ripple)",read_events:{'mousedown':'_onMouseDown',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
if(this.$el.css('position')==='static'){this.$el.css('position','relative');}
this.$el.css('overflow','hidden');return def;},destroy:function(){this._super.apply(this,arguments);this.$el.css('overflow','').css('position','');this.$('.o_ripple').remove();},_onMouseDown:function(ev){var $ripple=this.$('.o_ripple');if($ripple.length===0){$ripple=$('<span/>',{'class':'o_ripple d-block position-absolute rounded-circle'});this.$el.prepend($ripple);}
$ripple.removeClass('o_ripple_animated');if(!$ripple.height()&&!$ripple.width()){var diameter=Math.max(this.$el.outerWidth(),this.$el.outerHeight());$ripple.css({height:diameter,width:diameter});}
var x=ev.pageX-this.$el.offset().left-$ripple.width()/2;var y=ev.pageY-this.$el.offset().top-$ripple.height()/2;$ripple.css({top:y+'px',left:x+'px'}).addClass('o_ripple_animated');setTimeout(function(){$ripple.removeClass('o_ripple_animated');},350);},});});;

/* /openerp_website/static/src/js/layout/blog.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.odoo_blog',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.odoo_blog=sAnimation.Class.extend({selector:'.website_blog .o_cover_footer',read_events:{'click':'_onClick',},_onClick:function(){var cover_foo_gap=this.$el.offset().top;var newLocation=this.$('.js_next')[0].href;var $header=$('#wrapwrap > header');var $main=$('#wrapwrap > main');var $footer=$('#wrapwrap > footer');var $navbar=$('#oe_main_menu_navbar');if($navbar.length>0){cover_foo_gap=cover_foo_gap-$navbar.height();}
$header.addClass('o_transparent_blocked');$main.css({'box-shadow':'none','margin-bottom':2000,});$footer.fadeOut(300);this.$el.animate({height:$('#js_blogcover').height()+'px',},300);this.$('.o_cover_author').fadeIn(300);this.$('.o_cover_link').fadeOut(200);$('html, body').animate({scrollTop:cover_foo_gap},300,'swing',function(){window.location.href=newLocation;});}});});;

/* /openerp_website/static/src/js/layout/sale.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.cart',function(require){"use strict";require('web.dom_ready');var core=require('web.core');var _t=core._t;var shopping_cart_link=$('header a.o_my_cart');var shopping_cart_link_counter;shopping_cart_link.popover({trigger:'manual',animation:true,html:true,title:function(){return _t("My Cart");},container:'body',placement:'auto',template:'<div class="popover mycart-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}).on("mouseenter",function(ev){var $target=$(ev.target);clearTimeout(shopping_cart_link_counter);shopping_cart_link.not($target).popover('hide');shopping_cart_link_counter=setTimeout(function(){if($target.is(':hover')&&!$(".mycart-popover:visible").length){$.get("/shop/cart",{'type':'popover'}).then(function(data){$target.data("bs.popover").options.content=data;$target.popover("show");$(".popover").on("mouseleave",function(){$target.trigger('mouseleave');});});}},100);}).on("mouseleave",function(ev){setTimeout(function(){var $target=$(ev.target);if(!$(".popover:hover").length&&!$target.is(':hover')){$target.popover('hide');}},1000);});});;

/* /openerp_website/static/src/js/layout/forum.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('odoo.odoo_forum',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.odoo_forum=sAnimation.Class.extend({selector:'.website_forum',read_events:{'click #o_forum_search_trigger':'_onSearchTriggerClick',},_onSearchTriggerClick:function(ev){$(ev.currentTarget).toggleClass('active');this.$el.toggleClass('show');this.$('.oe_search_box').last()[this.$el.hasClass('show')?'focus':'blur']();},});});;

/* /openerp_website/static/src/js/snippets/o_play_visible.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_play_visible',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.o_play_visible=sAnimation.Class.extend({selector:'.o-play-visible',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var self=this;this.video=this.$el[0];this._pause();this.$w=$(window);this.$h=$('header.o_main_header');this._updateData();this.$w.on('resize.o_play_visible',_.debounce(this._updateData.bind(this),250));this.$w.on('scroll.o_play_visible',_.debounce(function(){var offset_top=self.$w.scrollTop();var trigger=(self.$w_height+offset_top);if(trigger>=(self.$t_offset+self.$t_limit)&&(offset_top<(self.$t_height+self.$t_offset+self.$h_height))){self._play();}else{self._pause();}},250));return def;},destroy:function(){this._super.apply(this,arguments);if(this.video){this._pause();}
$(window).off('.o_play_visible');},_pause:function(){if(!this.video.paused){this.video.pause();}},_play:function(){if(this.video.paused){this.video.play();}},_updateData:function(){this.$t_offset=this.$el.offset().top;this.$t_height=this.$el.height();this.$w_height=this.$w.height();this.$h_height=this.$h.height();this.$t_limit=this.$w_height>this.$t_height?(this.$t_height*3/4):0;},});sAnimation.registry.mediaVideo.include({start:function(){var def=this._super.apply(this,arguments);if(this.$el.attr('src')){this.$('iframe').attr('src',this.$target.attr('src'));}
return def;},});});;

/* /openerp_website/static/src/js/snippets/s_affix.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.s_affix',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.s_affix=sAnimation.Class.extend({selector:'.s_affix',start:function(){this._super.apply(this,arguments);if(this.editableMode){return;}
var $nav=this.$('#features_affix');var $nav_parent=$nav.parent();var $page_content=this.$('[role="main"]');var $body=$(document.body);var $wrapwrap=$('#wrapwrap');$nav.addClass('list-group');_.each($page_content.find('h1, h2').not('.o_not_in_affix_menu'),function(el){var $title=$(el);var id=_.uniqueId('part_');$('<a>').addClass('list-group-item list-group-item-action py-2 border-0 rounded-0').text($title.text()).attr('href',"#"+id).appendTo($nav);$title.before($('<div/>',{id:id,class:'anchor'}));});var odoo_header_height=$('#oe_main_menu_navbar').outerHeight()||0;var header_height=$('.o_main_header',$wrapwrap).first().outerHeight()||0;var real_top=odoo_header_height+header_height;if(real_top){this.$('.anchor').css({'margin-top':-real_top+'px','padding-top':real_top+'px'});}
var checkAffix=function(){$nav.toggleClass('o_js_affix_active',$nav_parent.is(':visible'));if($nav_parent.is(':hidden')){return;}
$nav.width($nav_parent.width());};checkAffix();$(window).on('resize.s_affix',_.debounce(checkAffix,250));$body.scrollspy({target:'.o_js_affix_active',offset:header_height,});},destroy:function(){this._super.apply(this,arguments);this.$('#features_affix').empty();this.$('.anchor').remove();$(window).off('.s_affix');},});});;

/* /openerp_website/static/src/js/snippets/s_panel_video.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.s_panel_video',function(require){'use strict';var core=require('web.core');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.s_panel_video=sAnimation.Class.extend({selector:".s_panel_video",xmlDependencies:(sAnimation.Class.prototype.xmlDependencies||[]).concat(['/openerp_website/static/src/xml/odoo_website.xml']),read_events:{'click .s_figure_link, .s_panel_video_play, .btn_video_play':'_onClick',},start:function(){this.videoID=this.$target.data('video-id');return this._super.apply(this,arguments);},_onClick:function(){var self=this;this.$modal=$(core.qweb.render('openerp_website.s_panel_video_modal',{video_id:this.videoID}));this.$modal.appendTo('body');this.$modal.modal();this.$modal.on('hidden.bs.modal',function(){self.$modal.remove();});},});});;

/* /openerp_website/static/src/js/snippets/s_ribbon_video.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.s_ribbon_video',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.s_ribbon_video=sAnimation.Class.extend({selector:'.s_ribbon_video',read_events:{'mouseenter .o_col_video':'_onMouseEnter',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
$(document).on('click.s_ribbon_video',this._toggleVideo.bind(this,false));return def;},destroy:function(){this._super.apply(this,arguments);$(document).off('.s_ribbon_video');this.$target.removeClass('js_video_hover js_prepend_video');},_toggleVideo:function(toggle){var self=this;this.$target.toggleClass('js_video_hover',toggle);setTimeout(function(){self.$target.toggleClass('js_prepend_video',toggle);},300);},_onMouseEnter:function(){this._toggleVideo(true);},});});;

/* /openerp_website/static/src/js/snippets/s_users_mosaic.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.s_users_mosaic',function(require){'use strict';var config=require('web.config');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.s_users_mosaic=sAnimation.Class.extend({selector:".s_users_mosaic",start:function(){var def=this._super.apply(this,arguments);if(this.editableMode||config.device.size_class<=config.device.SIZES.MD){return def;}
var self=this;var $win=$(window);this.$mosaic=this.$('#mosaic');var horizontal_pieces=18;var vertical_pieces=8;var total_pieces=horizontal_pieces*vertical_pieces;var count=0;var userImgs=[];var percentageH=100/(horizontal_pieces-1);var percentageV=100/(vertical_pieces-1);for(var i=0;i<total_pieces;i++){var horizontal_position=(i%horizontal_pieces);var vertical_position=Math.floor(i/horizontal_pieces);var $userImg=$('<span/>');$userImg.css('background-position',(percentageH*horizontal_position)+'% '+(percentageV*vertical_position)+'%').css('background-image','url(/openerp_website/static/src/img/2016/mosaic_1.jpg)');this.$mosaic.append($userImg);userImgs.push($userImg);}
var visible=false;checkVisibility();$win.on('scroll.s_users_mosaic',_.debounce(checkVisibility,200));return def;function checkVisibility(){var winScroll=$win.scrollTop();var mosaicTop=self.$mosaic.offset().top;var newVisible=(winScroll+$win.outerHeight()>mosaicTop&&winScroll<mosaicTop+self.$mosaic.outerHeight());if(newVisible!==visible){visible=newVisible;if(visible){toggleDisplay();}else{clearTimeout(self.animation_timer);}}}
function toggleDisplay(){if(count===0){shuffleArray(userImgs);}
userImgs[count].toggleClass('o_fade');count=(count+1)%total_pieces;self.animation_timer=setTimeout(toggleDisplay,250);}
function shuffleArray(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var temp=array[i];array[i]=array[j];array[j]=temp;}}},destroy:function(){this._super.apply(this,arguments);clearTimeout(this.animation_timer);$(window).off('.s_users_mosaic');if(this.$mosaic){this.$mosaic.empty();}},});});;

/* /openerp_website/static/src/js/snippets/s_tooltips_tabs.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.s_tooltips_tabs',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.s_tooltips_tabs=sAnimation.Class.extend({selector:'.s_tooltips_tabs',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){_.each(this.$('.js_noscript_img'),function(el){var $noscriptImg=$(el);$noscriptImg.replaceWith($noscriptImg.text());});return def;}
_.each(this.$('.tab-pane'),function(el){var $tab=$(el);var $tooltips=$tab.find('.s_tooltip_tabs_tooltip');var $img=$tab.find('.s_tooltip_tabs_tooltip_image');$tab.on('click.s_tooltip_tabs_tooltip_link','.s_tooltip_tabs_tooltip_link',function(e){e.preventDefault();var $tooltip=$(e.currentTarget).closest('.s_tooltip_tabs_tooltip');$tooltips.not($tooltip).removeClass('s_tooltip_tabs_tooltip_active');$tooltip.toggleClass('s_tooltip_tabs_tooltip_active');$tab.toggleClass('s_tooltip_tabs_tooltip_is_open',$tooltip.hasClass('s_tooltip_tabs_tooltip_active'));});$img.on('click.s_tooltip_tabs_tooltip_image',getImageHandler($tab,$tooltips));});this.image_loading_callback=function(e){var $tab=$($(e.target).attr('href'));var $tooltips=$tab.find('.s_tooltip_tabs_tooltip');var $noscriptImg=$tab.find('.js_noscript_img');var $img=$($noscriptImg.text());$noscriptImg.replaceWith($img);$img.on('click.s_tooltip_tabs_tooltip_image',getImageHandler($tab,$tooltips));};this.$el.closest('ul + *').prev().on('mouseover','a[href^="#"]',this.image_loading_callback);function getImageHandler($tab,$tooltips){return function(){$tab.removeClass('s_tooltip_tabs_tooltip_is_open');$tooltips.removeClass('s_tooltip_tabs_tooltip_active');};}
return def;},destroy:function(){this._super.apply(this,arguments);_.each(this.$target.find('.tab-pane'),function(el){var $tab=$(el);var $img=$tab.find('.s_tooltip_tabs_tooltip_image');$tab.off('click.s_tooltip_tabs_tooltip_link','.s_tooltip_tabs_tooltip_link');$img.off('click.s_tooltip_tabs_tooltip_image');});this.$target.closest('ul + *').prev().off('mouseover','a[href^="#"]',this.image_loading_callback);},});});;

/* /openerp_website/static/src/js/snippets/s_animated_headline.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.s_animated_headline',function(require){'use strict';var utils=require('web.concurrency');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.s_animated_headline=sAnimation.Class.extend({selector:'.s_animated_headline_content',animationDelay:2500,typeLettersDelay:150,selectionDuration:500,typeAnimationDelay:800,start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this._stopped=false;this.$('b').each(function(){var $word=$(this),letters=$word.text().split(''),selected=$word.hasClass('s_animated_headline_visible');for(var i in letters){letters[i]=(selected)?'<i class="in">'+letters[i]+'</i>':'<i>'+letters[i]+'</i>';}
var newLetters=letters.join('');$word.html(newLetters).css('opacity',1);});var self=this;utils.delay(this.animationDelay).then(function(){self._hideWord(self.$target.find('.s_animated_headline_visible').eq(0));});return def;},destroy:function(){this._super.apply(this,arguments);this._stopped=true;},_hideWord:function($word){if(this._stopped)return;var self=this;var nextWord=(!$word.is(':last-child'))?$word.next():$word.parent().children().eq(0);var $parentSpan=$word.parent('.s_animated_headline_content');$parentSpan.addClass('s_animated_headline_selected').removeClass('s_animated_headline_waiting');utils.delay(this.selectionDuration).then(function(){$parentSpan.removeClass('s_animated_headline_selected');$word.removeClass('s_animated_headline_visible').addClass('s_animated_headline_hidden').children('i').removeClass('in').addClass('out');utils.delay(self.typeAnimationDelay).then(function(){self._showWord(nextWord,self.typeLettersDelay);});});},_showWord:function($word,duration){if(this._stopped)return;this._showLetter($word.find('i').eq(0),$word,duration);$word.addClass('s_animated_headline_visible').removeClass('s_animated_headline_hidden');},_showLetter:function($letter,$word,duration){if(this._stopped)return;var self=this;$letter.addClass('in').removeClass('out');if(!$letter.is(':last-child')){utils.delay(duration).then(function(){self._showLetter($letter.next(),$word,duration);});}else{var delay=200;utils.delay(delay).then(function(){$word.parents('.s_animated_headline_content').addClass('s_animated_headline_waiting');utils.delay(Math.max(0,self.animationDelay-delay)).then(function(){self._hideWord($word);});});}},});});;

/* /openerp_website/static/src/js/oe_event_track.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.odoo_experience_track',function(require){"use strict";require('web.dom_ready');var Widget=require('web.Widget');var $form=$('#o_xp_track_proposal');if(!$form.length){return null;}
var OdooExperienceTrackWidget=Widget.extend({events:{"keyup textarea[name='description']":"validate_description","click .o_more_attachments":"add_attachment","click .o_less_attachments":"remove_attachment",},start:function(){this.$el.off('submit');this.$el[0].addEventListener('submit',this.validate_submit.bind(this),true);},validate_submit:function(ev){ev.preventDefault();var $btn=this.$('button[type="submit"]');var init_html=$btn.html();$btn.prop('disabled','disabled');$btn.html('<i class="fa fa-spinner fa-spin mr-2"/>'+init_html);var valid=this.validate_description(ev);if(valid){this.$el.submit();}else{$('.o_xp_wcount').addClass('bg-danger');$btn.removeProp('disabled');$btn.html(init_html);}},validate_description:function(ev){var self=this;var $description=self.$("textarea[name='description']");var $btn=self.$("button[type='submit']");var $wcount=$description.parent().parent().find('.o_xp_wcount');var num_words=$description.val().split(/\s+/g).length;if(num_words<150){$description.parent().addClass('has-error');$wcount.removeClass('d-none');$wcount.find('#o_xp_wcount').text(num_words);return false;}else{$wcount.addClass('d-none');$description.parent().removeClass('has-error');return true;}},add_attachment:function(ev){ev.preventDefault();var attachment_fields=this.$('input[type=file]');attachment_fields.first().parent().children('a').removeClass('d-none');var new_attachment_field=attachment_fields.first().parent().clone();new_attachment_field.children('input').val('').attr('name','attachment'+attachment_fields.length);attachment_fields.last().parent().after(new_attachment_field);},remove_attachment:function(ev){ev.preventDefault();$(ev.target).closest('div').remove();var attachment_fields=$('input[type=file]');attachment_fields.each(function(index){$(this).attr('name','attachment'+index);});if(attachment_fields.length==1){attachment_fields.parent().children('a').addClass('d-none');}},});var oe_track_widget=new OdooExperienceTrackWidget();oe_track_widget.setElement($('#o_xp_track_proposal'));oe_track_widget.start();});;

/* /openerp_website/static/src/js/snippets/oe_country_events.ext.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.oe_country_events',function(require){'use strict';var core=require('web.core');var sAnimation=require('website.content.snippets.animation');require('website_event.geolocation');sAnimation.registry.visitor.include({xmlDependencies:(sAnimation.registry.visitor.prototype.xmlDependencies||[]).concat(['/openerp_website/static/src/xml/odoo_website.xml']),start:function(){return this._super.apply(this,arguments).then(function(){var $data=$('.country_events_list');_.each($data.find('.oe_website_overflow_ellipsis'),function(el){var $el=$(el);var $a=$el.find('a');var date=$el.find('b > span:first-child').text();var index=date.indexOf(' ');var time_class='';if(index<0){index=date.length;}else if(date.substring(index,date.length).indexOf('-')>=0){time_class='days-range';}
$el.replaceWith(core.qweb.render('openerp_website.oe_country_events_item',{url:$a.attr('href'),desc:$a.text(),icoC:$el.find('i.fa').attr('class'),icoT:$el.find('i.fa').attr('title'),day:date.substring(index,date.length),month:date.substring(0,index),time_class:time_class,}));});});},});});;

/* /openerp_website/static/src/js/components/o_internal_tooltip_links.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_internal_tooltip_link',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.o_internal_tooltip_link=sAnimation.Class.extend({selector:'.o_internal_tooltip_link',start:function(){this.$el.tooltip();return this._super.apply(this,arguments);},});sAnimation.registry.o_popover=sAnimation.Class.extend({selector:'[data-toggle="popover"]',start:function(){this.$el.popover();return this._super.apply(this,arguments);},});});;

/* /openerp_website/static/src/js/components/country_selector.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_country_selector',function(require){'use strict';var core=require('web.core');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.o_country_selector=sAnimation.Class.extend({selector:'.o_country_selector',xmlDependencies:(sAnimation.Class.prototype.xmlDependencies||[]).concat(['/openerp_website/static/src/xml/odoo_website.xml']),read_events:{'click':'_onClick',},destroy:function(){this._super.apply(this,arguments);if(this.$modal){this.$modal.modal('hide');}},_onClick:function(ev){var self=this;ev.preventDefault();this._rpc({model:'res.country',method:'search_read',domain:[],fields:['id','name','code'],}).then(function(countries){self.$modal=$(core.qweb.render('openerp_website.o_country_selector_modal',{countries:countries}));self.$modal.appendTo('body');self.$modal.modal();self.$modal.on('shown.bs.modal',function(){var $input=self.$modal.find('#filter');var $countries=self.$modal.find('.row > div');$input.on('change paste keyup',function(){var query=$input.val().toLowerCase();_.each($countries,function(el){var $c=$(el);var txt=$c.data('country').toLowerCase();$c.toggleClass('d-none',(txt.indexOf(query)<0));});});_.each($countries,function(el){var $c=$(el);$c.on('click',function(e){e.preventDefault();var hash=$.deparam(window.location.hash);if(hash.force_country){delete hash.force_country;window.location.hash=$.param(hash);}
window.location=_.str.sprintf('/localization?country=%s&redirect=%s',$c.data('country_code'),encodeURIComponent(window.location.pathname+window.location.search+window.location.hash));});});$input.focus();});self.$modal.on('hidden.bs.modal',function(){self.$modal.remove();});});},});});;

/* /openerp_website/static/src/js/components/o_device_detection.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_device_detection',function(require){'use strict';require('web.dom_ready');var userAgent=navigator.userAgent||navigator.vendor||window.opera;$('html').toggleClass('o_ios_device',/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream);$('html').toggleClass('o_android_device',/android/i.test(userAgent));$('html').toggleClass('o_win_phone_device',/windows phone/i.test(userAgent));});;

/* /openerp_website/static/src/js/components/apps_assets.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_apps_assets',function(require){"use strict";var sAnimation=require('website.content.snippets.animation');sAnimation.registry.o_apps_assets=sAnimation.Class.extend({selector:'.o_apps_icons',read_events:{'change .o_apps_search':'_onInputChange','paste  .o_apps_search':'_onInputChange','keyup  .o_apps_search':'_onInputChange','click  .o_apps_search_clear':'_onResetInput'},_checkGroups:function(groups){var tot=this.$(".o_app_icon_entry").length;var hidden=this.$(".o_app_icon_entry.d-none").length;this.$('.o_no_results').toggleClass('d-none',tot!==hidden);this.$('.o_results_number').toggleClass('d-none',hidden===0||tot===hidden).find('b').text(tot-hidden);_.each(groups,function(el){var $el=$(el);$el.toggleClass('d-none',$el.find('.o_app_icon_entry:not(.d-none)').length===0);});},_onInputChange:function(ev){var self=this;var query=$(ev.target).val().toLowerCase();_.each(self.$('.o_app_icon_entry'),function(el){var $el=$(el);var txt=$el.text().toLowerCase();$el.toggleClass('d-none',(txt.indexOf(query)<0));self._checkGroups(self.$('.o_apps_group'));});},_onResetInput:function(ev){this.$(".o_apps_search").val('').trigger('change').focus();ev.preventDefault();},});});;

/* /openerp_website/static/src/js/OneSignal/odoo.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('odoo.odoo_onesignal',function(require){'use strict';var utils=require('web.utils');var sAnimation=require('website.content.snippets.animation');if(window.location.search.indexOf('no_push')>=0){return $.Deferred().reject("OneSignal ask no_push");}
if(window.location.hostname.indexOf('www.odoo.com')!==0){return $.Deferred().reject("OneSignal for www.odoo.com only");}
if(utils.get_cookie('odoo_no_push')==='1'){return;}
window.OneSignal=window.OneSignal||[];sAnimation.registry.o_push_modal=sAnimation.Class.extend({selector:'#wrapwrap',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode||$('.o_no_onesignal').length){return def;}
var self=this;OneSignal.push(function(){if(!OneSignal.isPushNotificationsSupported()){return;}
var pAllowNotif=OneSignal.getNotificationPermission();var pIsSubscribed=OneSignal.isPushNotificationsEnabled();Promise.all([pAllowNotif,pIsSubscribed]).then(function(values){var isAllow=values[0];var isSubscribed=values[1];if(isAllow==='default'){$.get('/openerp_website/push/pushbox.xml').done(function(content){$('body').append(content);setTimeout(function(){$('#push-notif').show();$('body').on('click','#push-notif .push_accept',self.registerPush);$('body').on('click','#push-notif .push_refuse',self.noPush);$('body').on('click','#push-notif .push_close',self.closePush);},8000);});}else if(isAllow==='granted'&&(!isSubscribed)){OneSignal.registerForPushNotifications();}});});return def;},destroy:function(){this._super.apply(this,arguments);$('#push-notif').remove();},registerPush:function(){utils.set_cookie('odoo_no_push',0);OneSignal.push(["registerForPushNotifications"]);$('#push-notif').remove();},noPush:function(){utils.set_cookie('odoo_no_push',1,24*60*60*30);$('#push-notif').remove();},closePush:function(){utils.set_cookie('odoo_no_push',1,2*60*60);$('#push-notif').remove();},});});;

/* /openerp_website/static/src/js/components/db_activation_steps.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_db_activation',function(require){"use strict";var ajax=require('web.ajax');var core=require('web.core');var s_animation=require('website.content.snippets.animation');var constants=require('saas_worker.const');var utils=require('web.utils');var _t=core._t;s_animation.registry.o_db_activation=s_animation.Class.extend({selector:'.o_db_activation_container',pos:0,xmlDependencies:['/openerp_website/static/src/xml/db_activation_steps.xml'],_secret_user_signature:null,_dbUuid:null,_dbName:null,_dbUserLogin:null,_dbUserId:null,_initialStep:null,_hasInviteDeal:null,_invitedUsersCount:null,_loggedUsersCount:null,_invitedEmails:null,_dbCountry:null,_acceptedCountries:null,_orderId:null,_orderStatus:null,_trackingUrl:null,start:function(editable_mode){this._super.apply(this,arguments);if(editable_mode)return;var $dataset=$("div[name='o_db_activation_dataset']");var data=$dataset.data();for(var k in data){this['_'+k]=data[k];}
this._retrieve_user_secret_signature();if(this._initialStep>0){this.pos=this._initialStep-1;}
this.$el.find('.o_db_activation_steps').fadeIn(500);this._next();},_next:function(){var self=this;var pos=this.pos;var pos_next=parseInt(pos+1);var $new_content=$(core.qweb.render("openerp_website.o_db_activation_step_"+pos_next,this._get_render_values(pos_next)));this._updateContent($new_content,pos,pos_next);},_skip:function(){var pos=this.pos;var $new_content=$(core.qweb.render("openerp_website.o_db_activation_step_4",this._get_render_values(4)));this.$el.find('.o_db_activation_steps').fadeOut(200);this._updateContent($new_content,pos,4);},_get_render_values:function(step){if(step==4){return{'database_url_simple':this._dbName+'.'+constants.SAAS_BASE_URL,'invitation_sent':this._invitedUsersCount||0,'invitation_success':this._loggedUsersCount||0,'has_invitation_deal':this._hasInviteDeal==="True"||0,};}
else if(step==5){return{'email':this._dbUserLogin,'country':this._dbCountry,'accepted_countries':this._acceptedCountries,};}
else if(step==6){return{'database_url_simple':this._dbName+'.'+constants.SAAS_BASE_URL,'follow_order_url':constants.WEBSITE+'/odoo-enterprise/track-order?orderid='+encodeURIComponent(this._orderId),};}
else if(step==7){return{'order_status':(this._orderStatus||'error').toLowerCase(),'tracking_url':this._trackingUrl||false,'database_url_simple':this._dbName+'.'+constants.SAAS_BASE_URL,};}
return{};},_updateContent:function($new_content,pos,pos_next){var self=this;var $steps=this.$el.find('.o_db_activation_steps');this.$el.find('.o_db_activation_content').fadeOut(200,function(){$(this).replaceWith($new_content);self.$el.removeClass('step_'+pos).addClass('step_'+pos_next);self.$el.find('input[autofocus="true"]').focus();self._bind_events();});var next_image=pos_next>=4?4:pos_next;self.$el.find('.o_db_activation_img:not(.o_current)').css('background-image','url("/openerp_website/static/src/img/db_activation/db_activation_bg_'+next_image+'.jpg")');self.$el.find('.o_db_activation_img').toggleClass('o_current');if(pos_next>=4){$steps.fadeOut(200);}else{$steps.find('.progress-bar').width(function(){switch(pos_next){case 1:return 0;case 2:return"50%";case 3:return"100%";}});$steps.find('.o_db_activation_steps_group > div:nth-child('+pos_next+')').addClass('o_current');$steps.find('.o_db_activation_steps_group > div:nth-child('+parseInt(pos_next-1)+')').addClass('o_done');}
this.pos=pos_next;},_retrieve_user_secret_signature:function(){var def=$.Deferred();if(this._secret_user_signature){return def.resolve();}
var self=this;var dbname=this._dbName;var signature_url=constants.SCHEME+'://'+dbname+'.'+constants.SAAS_BASE_URL+'/saas_trial/signature';var settings={xhrFields:{withCredentials:true}};ajax.jsonRpc(signature_url,'call','',settings).then(function(res){if(res){self._secret_user_signature=res;def.resolve();}
else{def.reject();}}).guardedCatch(function(){def.reject();});return def;},_displayError:function(message,selector){var $error_html=$(core.qweb.render("openerp_website.o_db_action_error",{'message':message}));var $field=this.$el.find(selector);$field.find('div.oe_db_activation_error_msg').remove();$field.prepend($error_html);},_invite_users:function(def){var self=this;var invitee=[];var db_user_id=parseInt(this._dbUserId);for(var i=0;i<3;i++){var $invitee_mail=this.$el.find('input[id="oe_invitee_email_'+i+'"]');var $invitee_name=this.$el.find('input[id="oe_invitee_name_'+i+'"]');if($invitee_mail.val().length>0){invitee.push({'name':$invitee_name.val(),'mail':$invitee_mail.val(),});}}
this._retrieve_user_secret_signature().then(function(){ajax.jsonRpc('/odoo-enterprise/invite-users-submit','call',{'db_uuid':self._dbUuid,'login':self._dbUserLogin,'user_id':db_user_id,'secret_signature':self._secret_user_signature,'invitee':invitee,}).then(function(data){if(data&&data.result){self._invitedUsersCount=invitee.length;def.resolve();}
else{var message=_t("There was a server error, please retry");switch(data.error_code){case"failed_invitation":break;case"user_exists":message=_.str.sprintf(_t("The email(s) %s are already invited in this database."),data.error_data.join(', '));break;case"db_not_found":message=_t("Unknown database !");break;case"no_mails":message=_t("Please set a at least one email address");break;}
self._displayError(message,"form");def.reject();}}).guardedCatch(function(){self._displayError(_t("Server error, please retry"),"form");def.reject();});}).fail(function(){self._displayError(_.str.sprintf(_t("You have to be connected to your database %s to invite colleagues."),self._dbName),"form");def.reject();});},_get_input_value:function(input_id,required){var value=this.$el.find('input[id="'+input_id+'"]').val();if(!value&&required)
{this._displayInfoError(input_id,_t('This field is required.'));return false;}
return value;},_redeem_gift:function(def){var self=this;var firstName=self._get_input_value('oe_redeem_first_name',true)||def.reject();var lastName=self._get_input_value('oe_redeem_last_name',true)||def.reject();var addrLine1=self._get_input_value('oe_redeem_addr_line_1',true)||def.reject();var addrLine2=self._get_input_value('oe_redeem_addr_line_2',false);var addrCity=self._get_input_value('oe_redeem_addr_city',true)||def.reject();var addrState=self._get_input_value('oe_redeem_addr_state',false);var addrPostalCode=self._get_input_value('oe_redeem_addr_postalcode',true)||def.reject();var addrCountryCode=self.$el.find('select[id="oe_redeem_addr_country"]').val();var phone=self._get_input_value('oe_redeem_phone',true)||def.reject();var email=self._get_input_value('oe_redeem_email',true)||def.reject();if(!utils.is_email(email))
{self._displayInfoError('oe_redeem_email',_t('Invalid email address'));def.reject();}
if(addrState&&addrState.length!=2){self._displayInfoError('oe_redeem_addr_state',_t('The country state code must be 2 characters long'));def.reject();}
if(def.state()!=='rejected')
{ajax.jsonRpc('/odoo-enterprise/redeem-invitation-gift-submit','call',{'login':self._dbUserLogin,'db_uuid':self._dbUuid,'firstName':firstName,'lastName':lastName,'addrLine1':addrLine1,'addrLine2':addrLine2,'addrCity':addrCity,'addrState':addrState,'addrPostalCode':addrPostalCode,'addrCountryCode':addrCountryCode,'phone':phone,'email':email,}).then(function(data){if(data&&data.result){self._orderId=data.order_id;def.resolve();}
else{var message=_t("There was a server error, please retry");switch(data.error_code){case"cannot_order":break;case"unsupported_country":message=_t('The country you selected is not supported by our invitation gift plan.');break;case"already_redeemed":message=_t("The gift for this invitation has already been redeemed.");break;case"not_found":message=_t("This invitation doesn't exist");break;}
self._displayError(message,"form");def.reject();}}).guardedCatch(function(){self._displayError(_t("There was a server error, please retry"),"form");def.reject();});}},_validate_before_next:function(){var def=$.Deferred();if(!this._validateFields()){return def.reject();}
if(this.pos==3){this._invite_users(def);}
else if(this.pos==5){this._redeem_gift(def);}
else{def.resolve();}
return def;},_validate_before_skip:function(){return true;},_displayInfoError:function(field_id,message){var $tooltip=$(core.qweb.render("openerp_website.o_db_activation_tooltip",{'message':message}));var $input_field=this.$el.find('input[id="'+field_id+'"]');$input_field.next('div.tooltip').remove();var $parent_div=$input_field.parent();$parent_div.append($tooltip);setTimeout(function(){$parent_div.addClass('o_has_warning').on('click',function(e){$(e.target).closest('div.o_has_warning').removeClass('o_has_warning');$(e.target).next('div.tooltip').remove();});},200);},_validateInviteeInfo:function(){var success=true;var at_least_one_mail=false;for(var i=0;i<3&&success;i++)
{var invitee_name=this.$el.find('input[id="oe_invitee_name_'+i+'"]').val();var invitee_email=this.$el.find('input[id="oe_invitee_email_'+i+'"]').val();if(invitee_email.length){at_least_one_mail=true;if(!utils.is_email(invitee_email)){this._displayInfoError('oe_invitee_email_'+i,_t('Invalid email address'));success=false;}
if(invitee_name.length===0){this._displayInfoError('oe_invitee_name_'+i,_t('Please insert your colleague name'));success=false;}}}
if(at_least_one_mail===false){this._displayInfoError('oe_invitee_email_0',_t('Please insert your colleague email'));this._displayInfoError('oe_invitee_name_0',_t('Please insert your colleague name'));}
return success&&at_least_one_mail;},_validateFields:function(){if(this.pos==3)
{return this._validateInviteeInfo();}
return true;},_bind_events:function(){var self=this;this.$el.find('.o_db_activation_next').on('click',function(e){var $target=$(e.target);$target.prepend('<span class="oe_db_activation_spinner"><i class="fa fa-spinner fa-spin"></i>&nbsp;</span>');self._validate_before_next().then(function(){self._next();$target.find('span[class="oe_db_activation_spinner"]').remove();},function(){$target.find('span[class="oe_db_activation_spinner"]').remove();});});this.$el.find('.o_db_activation_skip').on('click',function(){if(self._validate_before_skip()){self._skip();}});},});});;

/* /openerp_website/static/src/js/components/documents_calculator.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_documents_calculator',function(require){"use strict";var sAnimation=require('website.content.snippets.animation');var core=require('web.core');var _t=core._t;sAnimation.registry.o_documents_calculator=sAnimation.Class.extend({selector:'.o_dc',save_list:[],read_events:{'change .o_dc_range':'_getResults','input .o_dc_range':'_updateLabel',},start:function(){var self=this;_.each(this.$el.find('.tab-pane'),function(tab){var $tab=$(tab);var before=0,after=0;_.each($tab.find('.o_dc_before [data-sec]'),function(step){before=before+$(step).data('sec');});_.each($tab.find('.o_dc_after [data-sec]'),function(step){after=after+$(step).data('sec');});self.save_list.push({'tab':$tab.attr('id'),'before':before,'after':after,});});this._getResults();},_getResults:function(){var self=this;var tot_before_seconds=0,tot_after_seconds=0,tot_saved_seconds=0;_.each(this.$('.o_dc_range'),function(input){var $input=$(input);var value=$input.val();$input.siblings('label').text(value);_.each(self.save_list,function(task){if(task.tab==$input.data('for')){tot_before_seconds=tot_before_seconds+(task.before*value);tot_after_seconds=tot_after_seconds+(task.after*value);}});});tot_saved_seconds=tot_before_seconds-tot_after_seconds;this._formatTime(tot_before_seconds,this.$('.o_before'));this._formatTime(tot_after_seconds,this.$('.o_after'));this._formatTime(tot_saved_seconds,this.$('.s_o_number'));var percentage=100-(((tot_before_seconds-tot_saved_seconds)/tot_before_seconds)*100)||0;this.$('.o_dc_result figcaption span').text(percentage.toFixed(1).replace('.0','')+'%');var normalized_result=percentage/100*314||0;this.$('circle').css('stroke-dasharray',normalized_result+", 200, 0, 200");},_formatTime:function(seconds,$el){var timin=(seconds>=3600)?3600:60;var scale=(seconds>=3600)?_t("hours"):_t("minutes");var $value=$el.find('.o_value');$value.fadeTo(200,0,function(){$value.text((seconds/timin).toFixed(1).replace('.0',''));$el.find('.o_measure').text(scale);$value.fadeTo(300,1);});},_updateLabel:function(ev){var $input=$(ev.target);$input.siblings('label').text($input.val());},});});;

/* /openerp_website/static/src/js/components/o_images_viewer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.o_images_viewer',function(require){'use strict';var core=require('web.core');var sAnimation=require('website.content.snippets.animation');var Dialog=require('web.Dialog');var oImagesViewerDialog=Dialog.extend({template:'openerp_website.o_images_viewer_modal',init:function(parent,options,imgs){this._super(parent,_.extend({technical:false,},options||{}));this.imgs=imgs;},start:function(){var self=this;this.$modal.attr('id','o_images_viewer_modal');this.$modal.find('.close').appendTo(this.$modal);this.$modal.find('.modal-header, .modal-footer').remove();this.$modal.on('click',function(ev){if($(ev.target).is('.modal-body, .modal-content, .modal-dialog, .modal')){self.close();}});},});sAnimation.registry.o_images_viewer=sAnimation.Class.extend({selector:'.o_images_viewer',xmlDependencies:['/openerp_website/static/src/xml/odoo_website.xml'],read_events:{'click':'_onClick',},_getFullsizeImgs:function(){return _.map(this.$('[data-fullsize-src]'),function(el){var $el=$(el);return{src:$el.data('fullsize-src')||$el.attr('src'),alt:$el.data('fullsize-alt')||$el.attr('alt'),};});},_onClick:function(){var imgs=this._getFullsizeImgs();if(!imgs.length){return;}
new oImagesViewerDialog(this,{},imgs).open();},});});;

/* /openerp_website/static/src/js/saloon.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.saloon',function(require){'use strict';var core=require('web.core');var sAnimation=require('website.content.snippets.animation');var qweb=core.qweb;sAnimation.registry.websiteSaloon=sAnimation.Class.extend({selector:'#saloonWidget',xmlDependencies:(sAnimation.Class.prototype.xmlDependencies||[]).concat(['/openerp_website/static/src/xml/saloon.xml']),read_events:{'click .inline-YTPlayer':'_onPlayerClick','click [data-job-id]':'_onChooseJob','click [data-action]':'_onChooseAction',},start:function(){var self=this;this._doAction('GO_HOME');var timeout;document.onmousemove=function(){clearTimeout(timeout);timeout=setTimeout(function(){if(self.currentAction!=='VIDEO'&&self.currentAction!=='OPEN_JOB'){self._doAction('VIDEO');}},120*1000);};},_computeSalary:function(jobid,exp,data){return data.cost_grid[jobid][exp<=20?exp:20]*data.factor;},_doAction:function(action,data){this.currentAction=action;switch(action){case'GO_HOME':this.$el.html(qweb.render('openerp_website.saloon-home'));break;case'SALARY':this.$el.html(qweb.render('openerp_website.saloon-joblist'));break;case'VIDEO':this.$el.html(qweb.render('openerp_website.saloon-video'));break;case'OPEN_JOB':this.$el.html(qweb.render('openerp_website.saloon-iframe',data));break;}},_getContractByJobId:function(job_id,data){var contracts=_.where(data.jobs,{job_id:job_id});return contracts&&contracts[0]||false;},_showModal:function(jobid){var self=this;var response="{'controller': '/salary_package/simulation/contract/%d?final_yearly_costs=%d&job_id=%s&customer_relation=1', 'cost_grid': {'612': {'20': 110435, '21': 112084, '1': 59718, '0': 56013, '3': 67126, '2': 63422, '5': 73357, '4': 70831, '7': 78410, '6': 75884, '9': 83463, '8': 80937, '11': 89231, '10': 85990, '13': 95712, '12': 92471, '15': 102193, '14': 98953, '17': 105490, '16': 103842, '19': 108787, '18': 107138}, '613': {'20': 124700, '21': 128730, '1': 58530, '0': 54370, '3': 66850, '2': 62690, '5': 73588, '4': 71010, '7': 78745, '6': 76166, '9': 83901, '8': 81323, '11': 90094, '10': 86480, '13': 97322, '12': 93708, '15': 104550, '14': 100936, '17': 112610, '16': 108580, '19': 120670, '18': 116640}, '614': {'20': 149429, '21': 154625, '1': 67897, '0': 64610, '3': 74470, '2': 71183, '5': 81043, '4': 77756, '7': 87616, '6': 84330, '9': 94189, '8': 90903, '11': 102671, '10': 97476, '13': 113062, '12': 107867, '15': 123453, '14': 118257, '17': 133843, '16': 128648, '19': 144234, '18': 139039}}, 'jobs': [{'job_name': 'Python & Javascript Developer', 'id': 612, 'job_id': 1, 'name': 'Developer'}, {'job_name': 'Customer Service Representative', 'id': 613, 'job_id': 363, 'name': 'Business Analyst/Marketing'}, {'job_name': 'International Sales Representative', 'id': 614, 'job_id': 3, 'name': 'Direct Sale'}], 'factor': 1.0}";var data=$.parseJSON(response.split("'").join('"'));self.$modal=$(core.qweb.render('openerp_website.o_saloon_salary_modal'));self.$modal.appendTo('body');self.$modal.modal();self.$modal.on('shown.bs.modal',function(){var $exp=self.$modal.find('#experience');var $form=self.$modal.find('form');$exp.focus();$form.on('submit',function(e){e.preventDefault();var contract=self._getContractByJobId(jobid,data);var contract_id=contract&&contract.id;var url=_.str.sprintf(data.controller,contract_id,self._computeSalary(contract_id,parseInt($exp.val(),10)||0,data),jobid);url='https://www.odoo.com'+url+'&nopush=1&embed=1';self.$modal.modal('hide');self._doAction('OPEN_JOB',{url:url});});});self.$modal.on('hidden.bs.modal',function(){self.$modal.remove();});},_onChooseAction:function(ev){ev.preventDefault();this._doAction($(ev.currentTarget).data('action'));},_onChooseJob:function(ev){ev.preventDefault();this._showModal($(ev.currentTarget).data('job-id'));},_onPlayerClick:function(ev){ev.preventDefault();this._doAction('GO_HOME');},});});;

/* /openerp_website/static/src/js/enterprise_download.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.enterprise_download',function(require){'use strict';require('web.dom_ready');var Widget=require('web.Widget');if($('#oe_download_modal').length!=1){return $.Deferred().reject("DOM doesn't contain `#oe_download_modal`");}
var DownloadWidget=Widget.extend({_dataset:null,events:{'click .oe_download_button':'download',},start:function(){var self=this;this.$el.on('show.bs.modal',function(e){self.onShowModal(e);});return this._super.apply(this,arguments);},clearErrors:function(){this.$el.find('.oe_download_invalid_code').addClass('d-none');this.$el.find('.oe_download_server_error').addClass('d-none');},onShowModal:function(e){this._dataset=e.relatedTarget.dataset;this.clearErrors();},download:function(){var self=this;var code=this.$el.find('.oe_download_code').val();this.clearErrors();ajax.jsonRpc('/download/check_subscription','call',{code:code}).then(function(result){if(result){var download_url=_.str.sprintf('/thanks/download?code=%s&platform_version=%s',encodeURIComponent(code),encodeURIComponent(self._dataset.platformVersion));window.location=download_url;}
else{self.$el.find('.oe_download_invalid_code').removeClass('d-none');}}).guardedCatch(function(){self.$el.find('.oe_download_server_error').removeClass('d-none');});}});var downloadWidget=new DownloadWidget();downloadWidget.setElement($('#oe_download_modal'));downloadWidget.start();});;

/* /openerp_website/static/src/js/yodlee.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('openerp_website.yodlee',function(require){require('web.dom_ready');$('.parent_bank_list').html('<div class="bank_list mb8" style="width:100%"></div>');$('.bank_list').select2({placeholder:"Type your bank name here...",minimumInputLength:2,multiple:true,ajax:{url:"/openerp_website/yodlee_supported_bank",dataType:'json',quietMillis:250,data:function(term,page){return{q:term,};},results:function(data,page){var ret=[];_.each(data,function(x){ret.push({id:x,text:x});});return{results:ret};},cache:true},});});;

/* /loempia/static/src/js/loempia.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('loempia.embed',function(require){'use strict';var core=require('web.core');var ajax=require('web.ajax');var session=require('web.session');var Widget=require('web.Widget');var loempia={embed:{_prefix:null},client:null};var QWeb=core.qweb;var omit=function(obj){var copy={};var keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key];}
return copy;};var embedded=window!==window.parent;var R={};if(embedded){var defs={};window.addEventListener('message',function(e){if(!loempia.embed._prefix){loempia.embed._prefix=e.origin;}
if(!_.isUndefined(e.data.result)){var d=defs[e.data.id];if(d){delete defs[e.data.id];d.resolve(e.data.result);}}
if(e.data.type==='action'){loempia.client.do_action(e.data.action.tag);}});var post=function(m,nodef){var d;if(!nodef){m.id=_.uniqueId('apps');d=defs[m.id]=$.Deferred();}
window.parent.postMessage(m,'*');return d?d.promise():null;};var LocalModel=function(model){return{call:function(){return post({type:'Model',method:'call',model:model,args:_.toArray(arguments)});},call_button:function(){return post({type:'Model',method:'call_button',model:model,args:_.toArray(arguments)});}};};R={rpc:function(){return post({type:'rpc',args:_.toArray(arguments)});},Model:LocalModel,do_action:function(action){return post({type:'action',action:action});},blockUI:function(){post({type:'event',event:'blockUI'},true);},unblockUI:function(){post({type:'event',event:'unblockUI'},true);},event:function(event,data){post(_.extend(data||{},{type:'event',event:event}),true);},};}
loempia.embed.get_version_info=function(){var self=loempia.embed;if(_.isUndefined(self._version_info)){return R.rpc("/web/webclient/version_info",{}).then(function(version_info){self._version_info=version_info;return self._version_info;});}else{return $.Deferred().resolve(self._version_info).promise();}};loempia.embed.get_local_modules=function(){var self=loempia.embed;if(_.isEmpty(self._local_modules)){return self.get_version_info().then(function(version_info){var M=R.Model('ir.module.module');self._local_modules={};self._local_modules.modules={};self._local_modules.version=version_info;var fields=['name','installed_version','latest_version','state'];return M.call('search_read',[[['state','=','installed']],fields]).then(function(result){_.each(result,function(m){self._local_modules.modules[m.name]=m;});return self._local_modules;});});}else{return $.Deferred().resolve(self._local_modules).promise();}};loempia.embed.local_module_exec=function(method){var M=R.Model('ir.module.module');var context={};var args=Array.prototype.slice.call(arguments,1);args.push(context);return M.call_button(method,args).always(function(){R.unblockUI();}).done(function(action){if(!action){action={type:'ir.actions.client',tag:'home',params:{wait:true,},};}else if(_.isObject(action)&&action.type==='ir.actions.act_url'&&action.url==='/web'){window.location.reload();return;}else if(_.isObject(action)&&action.type==='ir.actions.client'&&action.tag==='reload'){action.tag='home';}
R.do_action(action);});};loempia.embed.appstore_updates=Widget.extend({template:'loempia.embed.updates',willStart:function(){var self=this;var def=this._super.apply(this,arguments);return this._fetchLocal(loempia.embed.get_local_modules()).then(function(){return $.when(def,ajax.loadXML('/loempia/static/src/xml/loempia.xml',core.qweb),self._fetchUpdate());});},start:function(){this.$('button[name="download"]').click(function(){});this.$('a[name="update"]').click(function(){var module=$(this).data('module');loempia.embed.get_local_modules().then(function(o){loempia.embed.local_module_exec('button_immediate_upgrade',o.modules[module].id);});});this.$el.popover({selector:'[data-toggle="popover"]'});this.$el.on('show.bs.popover',function(e){$('[data-toggle="popover"]').not($(e.target)).popover('hide');});return this._super.apply(this,arguments);},_fetchLocal:function(modules){var self=this;return modules.then(function(o){self.local_version=o;});},_fetchUpdate:function(){var self=this;return ajax.jsonRpc('/apps/embed/update','call',self.local_version).then(function(res){self.modules_to_update=res;});},});loempia.embed.appstore=Widget.extend({template:'loempia.embed',willStart:function(){return $.when(this._super.apply(this,arguments),ajax.loadXML('/loempia/static/src/xml/loempia.xml',core.qweb),this._fetchLink(loempia.embed.get_version_info()));},_fetchLink:function(version){var self=this;return version.then(function(o){self.link=o.server_serie;});},});loempia.AppsClient=Widget.extend({do_action:function(){var widget=false;if(arguments[0]==='loempia.embed.updates'){widget=new loempia.embed.appstore_updates(this);}
else if(arguments[0]==='loempia.embed'){widget=new loempia.embed.appstore(this);}
else{}
if(widget){widget.appendTo($('.openerp_webclient_container'));}},init:function(){loempia.client=this;return this._super.apply(this,arguments);},start:function(){return $.when(this._super()).then(function(){if(embedded){R.event('set_height',{height:'calc(100vh - 60px)'});R.event('ready');}});},getVersion:function(){return loempia.embed.get_version_info();}});return{'AppsClient':loempia.AppsClient,};});;

/* /loempia/static/src/js/appsweb.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('loempia.frontend',function(require){ajax=require('web.ajax');Session=require('web.Session');$(document).ready(function(){if($('.js_apps').length){var loempia_cart=[];var $url_cart=$("#url_cart");var $buy_button=$("#buy_button");var $bundled_deps=$("#js_bundled_deps");var module_ids=JSON.parse($("input[name=modules]").val()||0)
if($buy_button.length){function displayCart(quantities){var sign_in=$(".o_header_buttons a").first();var a=document.createElement('a');a.setAttribute('href',$url_cart.val()+'/shop/cart/');var icon=document.createElement("i");icon.className="fa fa-shopping-cart";var text=document.createTextNode(" My cart ");var n=document.createElement("sup");n.setAttribute("id","loempia_cart");n.className="my_cart_quantity badge badge-primary";n.innerHTML=quantities.reduce(function(a,b){return a+b;});a.appendChild(icon);a.appendChild(text);a.appendChild(n);sign_in.before(a);}
var settings={xhrFields:{withCredentials:true}};ajax.jsonRpc($url_cart.val()+'/shop/loempia_cart_info','call',{},settings).then(function(result){var modules=result.modules;var current_module=module_ids[0];if(modules.length>0){displayCart(result.quantities);if(_.contains(modules,parseInt(current_module,10))){$buy_button.attr('href',$url_cart.val()+'/shop/cart/');$buy_button.html($buy_button.html().replace('Add to Cart','Already In Cart'));}}});}
$("#more_deps").click(function(){$("#more_deps").text($("#more_deps").text()==="Show"?"Hide":"Show")});$('[data-toggle="popover"]').popover({trigger:'hover click'});$('[data-toggle="tooltip"]').popover({trigger:'hover click'});}
var validate_repo=function(ev){ev.preventDefault();url=$(this).closest(".apps_repo_input").find("input[name=url]").val();repo_id=$(this).closest(".apps_repo_input").find("input[name=repo_id]").val();help_error=$(this).closest(".apps_repo_input").find("#help_error");help_error.removeClass();help_error.text('');url_data=url.split('#');if(url_data.length!=2){help_error.addClass("alert alert-danger text-center mt16");help_error.text("Don't forget to specify your branch by adding #your_branch_name after the url.");}else{ajax.jsonRpc('/apps/upload_repo','call',{'url':url,'repo_id':repo_id}).then(function(result){var error=result.error
if(error){help_error.addClass("alert alert-danger text-center mt16");help_error.text(error);}else{window.location.href='/apps/dashboard/repos';}});}};if($("input[name=auto_scan]").length){$("input[name=auto_scan]").on("change",this,function(ev){var repo_id=$(this).closest(".apps_repo_input").find("input[name=repo_id]").val();ajax.jsonRpc('/apps/repo_auto_scan','call',{'repo_id':repo_id,'auto_scan':this.checked});});}
if($('.js_apps_submit_repo').length){$("#apps_submit_repo_button").on("click",this,validate_repo);}
if($('.js_repo_edit').length){$(".js_repo_edit").on("click",this,function(ev){ev.preventDefault();$(this).closest('.apps_repo_input').find('.js_repo_scan').attr('disabled',true);var $repo_span=$(this).closest('.apps_repo_input').find('#repo_url');var $repo_edit_input=$("<input type='text' name='url' id='repo_edit_input' value='"+$repo_span.text()+"'/>");$repo_span.replaceWith($repo_edit_input);$(this).off();$(this).removeClass('js_repo_edit').addClass('js_repo_save').html('<span class="fa fa-check"/> Save');var $repo_save_button=$(".js_repo_save");$repo_save_button.on("click",this,validate_repo);});}
if($('.js_repo_scan').length){$(".js_repo_scan").on("click",this,function(ev){self=this;ev.preventDefault();$('.js_repo_scan').attr('disabled',true);$('.js_repo_scan').addClass('o_apps_scan_disabled');$('.js_repo_scan').off();$(this).closest('.apps_repo_input').find('.js_repo_scan').addClass('o_apps_scan_running');$(this).find('i').addClass('fa-spin');help_error=$(this).closest(".apps_repo_input").find("#help_error");help_error.removeClass();help_error.addClass("alert alert-warning text-center mt16");help_error.text('text-warning').text('Scan requested, the page will refresh automatically when done.');repo_id=$(this).closest(".apps_repo_input").find("input[name=repo_id]").val();ajax.jsonRpc('/apps/scan_repo','call',{'repo_id':repo_id}).then(function(){window.location.reload();});});}
$('#report_comment_modal').on('show.bs.modal',function(ev){var button=$(ev.relatedTarget)
var rating_id=button.attr('data-val');$(this).find('input[name=rating_id]').val(rating_id)});$('#comment_report_form').on('submit',function(ev){ev.preventDefault();ajax.jsonRpc('/apps/report-rating','call',{'rating_id':$(this).find("input[name=rating_id]").val(),'reason':$(this).find("input[name=reason]:checked").val(),}).then(function(result){$("#report_comment_modal").modal("hide");var $banner=$("#report_banneer_state")
if(result===true){$banner.addClass("alert alert-success").text("Comments successfully reported!").fadeIn('slow');setTimeout(function(){$banner.fadeOut();},5000);}
else{$banner.addClass("alert alert-danger").text("Comments reporting failed!").fadeIn('slow');setTimeout(function(){$banner.fadeOut();},5000);}});});if($('.js_repo_publish').length){$('.js_repo_publish').on("click",this,function(ev){ev.preventDefault();repo_id=$(this).closest(".apps_repo_input").find("input[name=repo_id]").val();ajax.jsonRpc('/apps/publish_repo','call',{'repo_id':repo_id}).then(function(){window.location.reload();});});}
if($('.js_repo_unpublish').length){$('.js_repo_unpublish').on("click",this,function(ev){ev.preventDefault();repo_id=$(this).closest(".apps_repo_input").find("input[name=repo_id]").val();ajax.jsonRpc('/apps/unpublish_repo','call',{'repo_id':repo_id}).then(function(){window.location.href='/apps/dashboard/repos';});});}
if($('.js_module_toggle_publish').length){$('.js_module_toggle_publish').on("click",this,function(ev){ev.preventDefault();module_id=parseInt($(".js_module_id").val());ajax.jsonRpc('/apps/toggle_module_publish','call',{'module_id':module_id}).then(function(){window.location.reload();});});}
if($('.js_apps_faq').length){if(window.location.hash){var $id=$(window.location.hash.replace('heading_',''))
$id.collapse('show')
$('body,html').animate({scrollTop:$id.parent().offset().top});}}});});;

/* /loempia/static/src/js/loempia_comments.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('loempia.loempia_comment',function(require){"use strict";var websiteRootData=require('website.root');var core=require('web.core');var session=require('web.session');var Widget=require('web.Widget');var Dialog=require("web.Dialog");var _t=core._t;var QWeb=core.qweb;var EditWidget=Widget.extend({events:{'click .o_reply_button':'_reply','click .o_cancel_reply_button':'_cancel_reply',},willStart:function(){return $.when(this._super.apply(this,arguments),ajax.loadXML('/loempia/static/src/xml/loempia_comments.xml',core.qweb));},_cancel_reply:function(event){event.stopPropagation();event.preventDefault();var parent_message_id=$(event.currentTarget).data('parent-id');var $parent_div=$('div[data-parent-id="'+parent_message_id+'"]');$parent_div.after($(QWeb.render("loempia.ReplyButton",{parent_message_id:parent_message_id,})));$parent_div.remove();},_display_new_reply:function(parent_node,parent_message_id,subject){var new_div=$(QWeb.render("loempia.ReplyForm",{subject:subject,parent_message_id:parent_message_id,csrf_token:odoo.csrf_token,})).hide();parent_node.after(new_div);new_div.show("slow");},_reply:function(event){event.stopPropagation();event.preventDefault();var parent_message_id=$(event.currentTarget).data('parent-id');var $parent_div=$('div[data-id="'+parent_message_id+'"]');var subject=$parent_div.find('.discussion_scroll_title');var subject_content="Re: "+subject.text();this._display_new_reply($(event.currentTarget),parent_message_id,subject_content);$(event.currentTarget).remove();},});websiteRootData.websiteRootRegistry.add(EditWidget,'.o_loempia_comment');});;

/* /loempia/static/src/js/apps_stats.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('loempia.loempia_stats',function(require){"use strict";var websiteRootData=require('website.root');var Widget=require('web.Widget');var ajax=require('web.ajax');var AppsStatsWidget=Widget.extend({jsLibs:['/web/static/lib/Chart/Chart.js',],willStart:function(){var self=this;return this._super().then(function(){return Promise.resolve(self.fetch_data());});},fetch_data:function(){var self=this;var user_id=this.getUrlVars().user_id||$('input[name="user_id"]').val();var module_type=$('.js_stats_apps input[name="module_type"]').val();var category_id=$('.js_stats_apps input[name="category_id"]').val();var settings={xhrFields:{withCredentials:true}};ajax.jsonRpc('/apps/statistics/graphs','call',{'module_type':module_type,'category_id':category_id,'user_id':user_id,},settings).then(function(result){var keys=[]
var names=[]
var values=[]
for(var i=0;i<result.length;i++){var key=result[i].key;keys.push(key);names.push(result[i].name);values.push(result[i].values);}
self.keys=keys;self.names=names;self.values=values;self.render_graphes();});},render_graphes:function(){for(var i=0;i<this.keys.length;i++){if(this.keys[i]==='trends'||this.keys[i]==='cumulative_sales'){this.load_multilineschart('#o_graph_'+this.keys[i],this.names[i],this.values[i]);}else{this.load_barchart('#o_graph_'+this.keys[i],this.names[i],this.values[i]);}}},load_multilineschart:function(div_to_display,name,result){var colors_mulitline=['rgb(31, 119, 180)','rgb(174, 199, 232)','rgb(255, 127, 14)','rgb(255, 187, 120)','rgb(44, 160, 44)','rgb(152, 223, 138)','rgb(214, 39, 40)','rgb(255, 152, 150)','rgb(148, 103, 189)','rgb(197, 176, 213)'];var linesChartData={labels:[],datasets:[]};var not_label=false;for(var i=0;i<result.length;i++){var values=result[i].values;var rgb=colors_mulitline[i]
var dataset={label:result[i].key,data:[],borderColor:rgb,backgroundColor:rgb,fill:false}
for(var j=0;j<values.length;j++){if(!not_label){linesChartData['labels'].push(values[j][0])}
dataset['data'].push(values[j][1]);}
dataset.cubicInterpolationMode='monotone'
linesChartData['datasets'].push(dataset);not_label=true;}
var $div_to_display=$(div_to_display).css({position:'relative',height:'30em'});$div_to_display.empty();var $canvas=$('<canvas/>');$div_to_display.append($canvas);var ctx=$canvas.get(0).getContext('2d');new Chart(ctx,{type:'line',data:linesChartData,options:{responsive:true,title:{display:false,},layout:{padding:{bottom:15},},legend:{align:'start',},scales:{yAxes:[{scaleLabel:{display:true,labelString:name,},ticks:{beginAtZero:true,}}]},maintainAspectRatio:false,tooltips:{intersect:false,},elements:{point:{radius:0}},animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0}});},load_barchart:function(div_to_display,name,result){var data=[]
var label=[]
for(var i=0;i<result.length;i++){label.push(result[i][0])
data.push(result[i][1])}
var datasets=[{data:data,backgroundColor:'rgba(117, 130, 155,0.75)',strokeColor:'rgba(117, 130, 155,0.75)',}];var $div_to_display=$(div_to_display).css({position:'relative',height:'20em'});$div_to_display.empty();var $canvas=$('<canvas/>');$div_to_display.append($canvas);var ctx=$canvas.get(0).getContext('2d');new Chart(ctx,{type:'bar',data:{labels:label,datasets:datasets,},options:{layout:{},legend:{display:false,},tooltips:{mode:'index',intersect:false,callbacks:{title:function(tooltipItems,data){var idx=tooltipItems[0].index;return data.labels[idx];;},}},responsive:true,scales:{xAxes:[{ticks:{callback:function(value){return value.length>15?value.substr(0,15)+'[...]':value;},}}],yAxes:[{scaleLabel:{display:true,labelString:name,},ticks:{maxTicksLimit:8,beginAtZero:true,}}]},maintainAspectRatio:false,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0}});},getUrlVars:function(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++)
{hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars;},});websiteRootData.websiteRootRegistry.add(AppsStatsWidget,'.js_stats_apps');});;

/* /website_rating/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('rating.portal.chatter',function(require){'use strict';var core=require('web.core');var portalChatter=require('portal.chatter');var utils=require('web.utils');var time=require('web.time');var _t=core._t;var PortalChatter=portalChatter.PortalChatter;var qweb=core.qweb;var STAR_RATING_RATIO=2;PortalChatter.include({events:_.extend({},PortalChatter.prototype.events,{'click .o_website_rating_select':'_onClickStarDomain','click .o_website_rating_select_text':'_onClickStarDomainReset','click .o_wrating_js_publisher_comment_btn':'_onClickPublisherComment','click .o_wrating_js_publisher_comment_edit':'_onClickPublisherComment','click .o_wrating_js_publisher_comment_delete':'_onClickPublisherCommentDelete','click .o_wrating_js_publisher_comment_submit':'_onClickPublisherCommentSubmit','click .o_wrating_js_publisher_comment_cancel':'_onClickPublisherCommentCancel',}),xmlDependencies:(PortalChatter.prototype.xmlDependencies||[]).concat(['/website_rating/static/src/xml/portal_tools.xml','/website_rating/static/src/xml/portal_chatter.xml']),init:function(parent,options){this._super.apply(this,arguments);if(!_.contains(this.options,'display_rating')){this.options=_.defaults(this.options,{'display_rating':false,'rating_default_value':0.0,});}
this.set('rating_card_values',{});this.set('rating_value',false);this.on("change:rating_value",this,this._onChangeRatingDomain);},preprocessMessages:function(messages){var self=this;messages=this._super.apply(this,arguments);if(this.options['display_rating']){_.each(messages,function(m,i){m.rating_value=self.roundToHalf(m['rating_value']/STAR_RATING_RATIO);m.rating=self._preprocessCommentData(m.rating,i);});}
this.messages=messages;return messages;},roundToHalf:function(value){var converted=parseFloat(value);var decimal=(converted-parseInt(converted,10));decimal=Math.round(decimal*10);if(decimal===5){return(parseInt(converted,10)+0.5);}
if((decimal<3)||(decimal>7)){return Math.round(converted);}else{return(parseInt(converted,10)+0.5);}},_chatterInit:function(){var self=this;return this._super.apply(this,arguments).then(function(result){if(!result['rating_stats']){return;}
var ratingData={'avg':Math.round(result['rating_stats']['avg']/STAR_RATING_RATIO*100)/100,'percent':[],};_.each(_.keys(result['rating_stats']['percent']).reverse(),function(rating){if(rating%2===0){ratingData['percent'].push({'num':rating/STAR_RATING_RATIO,'percent':utils.round_precision(result['rating_stats']['percent'][rating],0.01),});}});self.set('rating_card_values',ratingData);});},_messageFetchPrepareParams:function(){var params=this._super.apply(this,arguments);if(this.options['display_rating']){params['rating_include']=true;}
return params;},_newPublisherCommentData:function(messageIndex){return{mes_index:messageIndex,publisher_id:this.options.partner_id,publisher_avatar:_.str.sprintf('/web/image/%s/%s/image_128/50x50','res.partner',this.options.partner_id),publisher_name:_t("Write your comment"),publisher_datetime:'',publisher_comment:'',};},_preprocessCommentData:function(rawRating,messageIndex){var ratingData={id:rawRating.id,mes_index:messageIndex,publisher_datetime:rawRating.publisher_datetime?moment(time.str_to_datetime(rawRating.publisher_datetime)).format('MMMM Do YYYY, h:mm:ss a'):"",publisher_comment:rawRating.publisher_comment?rawRating.publisher_comment:'',};if(rawRating.publisher_id&&rawRating.publisher_id.length>=2){ratingData.publisher_id=rawRating.publisher_id[0];ratingData.publisher_name=rawRating.publisher_id[1];ratingData.publisher_avatar=_.str.sprintf('/web/image/%s/%s/image_128/50x50','res.partner',ratingData.publisher_id);}
var commentData=_.extend(this._newPublisherCommentData(messageIndex),ratingData);return commentData;},_getCommentContainer:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_wrating_publisher_comment").first();},_getCommentButton:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_wrating_js_publisher_comment_btn").first();},_getCommentTextarea:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_portal_rating_comment_input").first();},_focusTextComment:function($source){this._getCommentTextarea($source).focus();},_onClickStarDomain:function(ev){var $tr=this.$(ev.currentTarget);var num=$tr.data('star');if($tr.css('opacity')==='1'){this.set('rating_value',num);this.$('.o_website_rating_select').css({'opacity':0.5,});this.$('.o_website_rating_select_text[data-star="'+num+'"]').css({'visibility':'visible','opacity':1,});this.$('.o_website_rating_select[data-star="'+num+'"]').css({'opacity':1,});}},_onClickStarDomainReset:function(ev){ev.stopPropagation();ev.preventDefault();this.set('rating_value',false);this.$('.o_website_rating_select_text').css('visibility','hidden');this.$('.o_website_rating_select').css({'opacity':1,});},_onClickPublisherComment:function(ev){var $source=this.$(ev.currentTarget);if(this._getCommentTextarea($source).length===1){this._getCommentContainer($source).empty();return;}
var messageIndex=$source.data("mes_index");var data={is_publisher:this.options['is_user_publisher']};data.rating=this._newPublisherCommentData(messageIndex);var oldRating=this.messages[messageIndex].rating;data.rating.publisher_comment=oldRating.publisher_comment?oldRating.publisher_comment:'';this._getCommentContainer($source).html($(qweb.render("website_rating.chatter_rating_publisher_form",data)));this._focusTextComment($source);},_onClickPublisherCommentDelete:function(ev){var self=this;var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var ratingId=this.messages[messageIndex].rating.id;this._rpc({route:'/website/rating/comment',params:{"rating_id":ratingId,"publisher_comment":''}}).then(function(res){self.messages[messageIndex].rating=self._preprocessCommentData(res,messageIndex);self._getCommentButton($source).removeClass("d-none");self._getCommentContainer($source).empty();});},_onClickPublisherCommentSubmit:function(ev){var self=this;var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var comment=this._getCommentTextarea($source).val();var ratingId=this.messages[messageIndex].rating.id;this._rpc({route:'/website/rating/comment',params:{"rating_id":ratingId,"publisher_comment":comment}}).then(function(res){self.messages[messageIndex].rating=self._preprocessCommentData(res,messageIndex);if(self.messages[messageIndex].rating.publisher_comment!==''){self._getCommentButton($source).addClass('d-none');self._getCommentContainer($source).html($(qweb.render("website_rating.chatter_rating_publisher_comment",{rating:self.messages[messageIndex].rating,is_publisher:self.options.is_user_publisher})));}else{self._getCommentButton($source).removeClass("d-none");self._getCommentContainer($source).empty();}});},_onClickPublisherCommentCancel:function(ev){var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var comment=this.messages[messageIndex].rating.publisher_comment;if(comment){var data={rating:this.messages[messageIndex].rating,is_publisher:this.options.is_user_publisher};this._getCommentContainer($source).html($(qweb.render("website_rating.chatter_rating_publisher_comment",data)));}else{this._getCommentContainer($source).empty();}},_onChangeRatingDomain:function(){var domain=[];if(this.get('rating_value')){domain=[['rating_value','=',this.get('rating_value')*STAR_RATING_RATIO]];}
this._changeCurrentPage(1,domain);},});});;

/* /website_rating/static/src/js/portal_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('rating.portal.composer',function(require){'use strict';var core=require('web.core');var portalComposer=require('portal.composer');var _t=core._t;var PortalComposer=portalComposer.PortalComposer;var STAR_RATING_RATIO=2;PortalComposer.include({events:_.extend({},PortalComposer.prototype.events,{'click .stars i':'_onClickStar','mouseleave .stars':'_onMouseleaveStarBlock','mousemove .stars i':'_onMoveStar','mouseleave .stars i':'_onMoveLeaveStar',}),init:function(parent,options){this._super.apply(this,arguments);if(options.default_rating_value){options.default_rating_value=parseFloat(options.default_rating_value)/STAR_RATING_RATIO;}
this.options=_.defaults(this.options,{'default_message':false,'default_message_id':false,'default_rating_value':false,'force_submit_url':false,});this.labels={'0':"",'1':_t("I hate it"),'2':_t("I don't like it"),'3':_t("It's okay"),'4':_t("I like it"),'5':_t("I love it"),};this.user_click=false;this.set("star_value",this.options.default_rating_value);this.on("change:star_value",this,this._onChangeStarValue);},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.$input=self.$('input[name="rating_value"]');self.$star_list=self.$('.stars').find('i');self.set("star_value",self.options.default_rating_value);self.$input.val(self.options.default_rating_value*STAR_RATING_RATIO);});},_onChangeStarValue:function(){var val=this.get("star_value");var index=Math.floor(val);var decimal=val-index;this.$star_list.removeClass('fa-star fa-star-half-o').addClass('fa-star-o');this.$('.stars').find("i:lt("+index+")").removeClass('fa-star-o fa-star-half-o').addClass('fa-star');if(decimal){this.$('.stars').find("i:eq("+index+")").removeClass('fa-star-o fa-star fa-star-half-o').addClass('fa-star-half-o');}
this.$('.rate_text .badge').text(this.labels[index]);},_onClickStar:function(ev){var index=this.$('.stars i').index(ev.currentTarget);this.set("star_value",index+1);this.user_click=true;this.$input.val(this.get("star_value")*STAR_RATING_RATIO);},_onMouseleaveStarBlock:function(){this.$('.rate_text').hide();},_onMoveStar:function(ev){var index=this.$('.stars i').index(ev.currentTarget);this.$('.rate_text').show();this.set("star_value",index+1);},_onMoveLeaveStar:function(){if(!this.user_click){this.set("star_value",parseInt(this.$input.val()));}
this.user_click=false;},});});;

/* /website_rating/static/src/js/portal_rating_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.rating.composer',function(require){'use strict';var publicWidget=require('web.public.widget');var session=require('web.session');var portalComposer=require('portal.composer');var PortalComposer=portalComposer.PortalComposer;var STAR_RATING_RATIO=2;var RatingPopupComposer=publicWidget.Widget.extend({template:'website_rating.PopupComposer',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml','/website_rating/static/src/xml/portal_tools.xml','/website_rating/static/src/xml/portal_rating_composer.xml',],init:function(parent,options){this._super.apply(this,arguments);this.rating_avg=Math.round(options['ratingAvg']/STAR_RATING_RATIO*100)/100||0.0;this.rating_total=options['ratingTotal']||0.0;this.options=_.defaults({},options,{'token':false,'res_model':false,'res_id':false,'pid':0,'display_composer':options['disable_composer']?false:!session.is_website_user,'display_rating':true,'csrf_token':odoo.csrf_token,'user_id':session.user_id,});},start:function(){var defs=[];defs.push(this._super.apply(this,arguments));this._composer=new PortalComposer(this,this.options);defs.push(this._composer.replace(this.$('.o_portal_chatter_composer')));return Promise.all(defs);},});publicWidget.registry.RatingPopupComposer=publicWidget.Widget.extend({selector:'.o_rating_popup_composer',start:function(){var ratingPopupData=this.$el.data();var ratingPopup=new RatingPopupComposer(this,ratingPopupData);return Promise.all([this._super.apply(this,arguments),ratingPopup.appendTo(this.$el)]);},});});;

/* /sale_subscription/static/src/js/portal_subscription.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale_subscription.portal_subscription',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.ContractSubmit=publicWidget.Widget.extend({selector:'.contract-submit',events:{'click':'_onClick',},_onClick:function(){this.$el.attr('disabled',true);this.$el.prepend('<i class="fa fa-refresh fa-spin"></i> ');this.$el.closest('form').submit();},});});;

/* /auth_signup/static/src/js/signup.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('auth_signup.signup',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.SignUpForm=publicWidget.Widget.extend({selector:'.oe_signup_form',events:{'submit':'_onSubmit',},_onSubmit:function(){var $btn=this.$('.oe_login_buttons > button[type="submit"]');$btn.attr('disabled','disabled');$btn.prepend('<i class="fa fa-refresh fa-spin"/> ');},});});;

/* /payment/static/lib/jquery.payment/jquery.payment.js defined in bundle 'web.assets_frontend_lazy' */
(function(){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlashAndSpace,hasTextSelected,luhnCheck,reFormatCVC,reFormatCardNumber,reFormatExpiry,reFormatNumeric,replaceFullWidthChars,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,safeVal,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};$=window.jQuery||window.Zepto||window.$;$.payment={};$.payment.fn={};$.fn.payment=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];return $.payment.fn[method].apply(this,args);};defaultFormat=/(\d{1,4})/g;$.payment.cards=cards=[{type:'maestro',patterns:[5018,502,503,506,56,58,639,6220,67],format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:'forbrugsforeningen',patterns:[600],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'dankort',patterns:[5019],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'visa',patterns:[4],format:defaultFormat,length:[13,16],cvcLength:[3],luhn:true},{type:'mastercard',patterns:[51,52,53,54,55,22,23,24,25,26,27],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'amex',patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:'dinersclub',patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:true},{type:'discover',patterns:[60,64,65,622],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'unionpay',patterns:[62,88],format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:'jcb',patterns:[35],format:defaultFormat,length:[16],cvcLength:[3],luhn:true}];cardFromNumber=function(num){var card,p,pattern,_i,_j,_len,_len1,_ref;num=(num+'').replace(/\D/g,'');for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_ref=card.patterns;for(_j=0,_len1=_ref.length;_j<_len1;_j++){pattern=_ref[_j];p=pattern+'';if(num.substr(0,p.length)===p){return card;}}}};cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.type===type){return card;}}};luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;odd=true;sum=0;digits=(num+'').split('').reverse();for(_i=0,_len=digits.length;_i<_len;_i++){digit=digits[_i];digit=parseInt(digit,10);if((odd=!odd)){digit*=2;}
if(digit>9){digit-=9;}
sum+=digit;}
return sum%10===0;};hasTextSelected=function($target){var _ref;if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==$target.prop('selectionEnd')){return true;}
if((typeof document!=="undefined"&&document!==null?(_ref=document.selection)!=null?_ref.createRange:void 0:void 0)!=null){if(document.selection.createRange().text){return true;}}
return false;};safeVal=function(value,$target){var currPair,cursor,digit,error,last,prevPair;try{cursor=$target.prop('selectionStart');}catch(_error){error=_error;cursor=null;}
last=$target.val();$target.val(value);if(cursor!==null&&$target.is(":focus")){if(cursor===last.length){cursor=value.length;}
if(last!==value){prevPair=last.slice(cursor-1,+cursor+1||9e9);currPair=value.slice(cursor-1,+cursor+1||9e9);digit=value[cursor];if(/\d/.test(digit)&&prevPair===(""+digit+" ")&&currPair===(" "+digit)){cursor=cursor+1;}}
$target.prop('selectionStart',cursor);return $target.prop('selectionEnd',cursor);}};replaceFullWidthChars=function(str){var chars,chr,fullWidth,halfWidth,idx,value,_i,_len;if(str==null){str='';}
fullWidth='\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19';halfWidth='0123456789';value='';chars=str.split('');for(_i=0,_len=chars.length;_i<_len;_i++){chr=chars[_i];idx=fullWidth.indexOf(chr);if(idx>-1){chr=halfWidth[idx];}
value+=chr;}
return value;};reFormatNumeric=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=value.replace(/\D/g,'');return safeVal(value,$target);});};reFormatCardNumber=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=$.payment.formatCardNumber(value);return safeVal(value,$target);});};formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);value=$target.val();card=cardFromNumber(value+digit);length=(value.replace(/\D/g,'')+digit).length;upperLength=16;if(card){upperLength=card.length[card.length.length-1];}
if(length>=upperLength){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(card&&card.type==='amex'){re=/^(\d{4}|\d{4}\s\d{6})$/;}else{re=/(?:^|\s)(\d{4})$/;}
if(re.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value+' '+digit);});}else if(re.test(value+digit)){e.preventDefault();return setTimeout(function(){return $target.val(value+digit+' ');});}};formatBackCardNumber=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s$/,''));});}else if(/\s\d?$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d$/,''));});}};reFormatExpiry=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=$.payment.formatExpiry(value);return safeVal(value,$target);});};formatExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val()+digit;if(/^\d$/.test(val)&&(val!=='0'&&val!=='1')){e.preventDefault();return setTimeout(function(){return $target.val("0"+val+" / ");});}else if(/^\d\d$/.test(val)){e.preventDefault();return setTimeout(function(){var m1,m2;m1=parseInt(val[0],10);m2=parseInt(val[1],10);if(m2>2&&m1!==0){return $target.val("0"+m1+" / "+m2);}else{return $target.val(""+val+" / ");}});}};formatForwardExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d\d$/.test(val)){return $target.val(""+val+" / ");}};formatForwardSlashAndSpace=function(e){var $target,val,which;which=String.fromCharCode(e.which);if(!(which==='/'||which===' ')){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d$/.test(val)&&val!=='0'){return $target.val("0"+val+" / ");}};formatBackExpiry=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s\/\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s\/\s$/,''));});}};reFormatCVC=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=value.replace(/\D/g,'').slice(0,4);return safeVal(value,$target);});};restrictNumeric=function(e){var input;if(e.metaKey||e.ctrlKey){return true;}
if(e.which===32){return false;}
if(e.which===0){return true;}
if(e.which<33){return true;}
input=String.fromCharCode(e.which);return!!/[\d\s]/.test(input);};restrictCardNumber=function(e){var $target,card,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=($target.val()+digit).replace(/\D/g,'');card=cardFromNumber(value);if(card){return value.length<=card.length[card.length.length-1];}else{return value.length<=16;}};restrictExpiry=function(e){var $target,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=$target.val()+digit;value=value.replace(/\D/g,'');if(value.length>6){return false;}};restrictCVC=function(e){var $target,digit,val;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
val=$target.val()+digit;return val.length<=4;};setCardType=function(e){var $target,allTypes,card,cardType,val;$target=$(e.currentTarget);val=$target.val();cardType=$.payment.cardType(val)||'unknown';if(!$target.hasClass(cardType)){allTypes=(function(){var _i,_len,_results;_results=[];for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_results.push(card.type);}
return _results;})();$target.removeClass('unknown');$target.removeClass(allTypes.join(' '));$target.addClass(cardType);$target.toggleClass('identified',cardType!=='unknown');return $target.trigger('payment.cardType',cardType);}};$.payment.fn.formatCardCVC=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictCVC);this.on('paste',reFormatCVC);this.on('change',reFormatCVC);this.on('input',reFormatCVC);return this;};$.payment.fn.formatCardExpiry=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictExpiry);this.on('keypress',formatExpiry);this.on('keypress',formatForwardSlashAndSpace);this.on('keypress',formatForwardExpiry);this.on('keydown',formatBackExpiry);this.on('change',reFormatExpiry);this.on('input',reFormatExpiry);return this;};$.payment.fn.formatCardNumber=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictCardNumber);this.on('keypress',formatCardNumber);this.on('keydown',formatBackCardNumber);this.on('keyup',setCardType);this.on('paste',reFormatCardNumber);this.on('change',reFormatCardNumber);this.on('input',reFormatCardNumber);this.on('input',setCardType);return this;};$.payment.fn.restrictNumeric=function(){this.on('keypress',restrictNumeric);this.on('paste',reFormatNumeric);this.on('change',reFormatNumeric);this.on('input',reFormatNumeric);return this;};$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val());};$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;_ref=value.split(/[\s\/]+/,2),month=_ref[0],year=_ref[1];if((year!=null?year.length:void 0)===2&&/^\d+$/.test(year)){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year;}
month=parseInt(month,10);year=parseInt(year,10);return{month:month,year:year};};$.payment.validateCardNumber=function(num){var card,_ref;num=(num+'').replace(/\s+|-/g,'');if(!/^\d+$/.test(num)){return false;}
card=cardFromNumber(num);if(!card){return false;}
return(_ref=num.length,__indexOf.call(card.length,_ref)>=0)&&(card.luhn===false||luhnCheck(num));};$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,_ref;if(typeof month==='object'&&'month'in month){_ref=month,month=_ref.month,year=_ref.year;}
if(!(month&&year)){return false;}
month=$.trim(month);year=$.trim(year);if(!/^\d+$/.test(month)){return false;}
if(!/^\d+$/.test(year)){return false;}
if(!((1<=month&&month<=12))){return false;}
if(year.length===2){if(year<70){year="20"+year;}else{year="19"+year;}}
if(year.length!==4){return false;}
expiry=new Date(year,month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry>currentTime;};$.payment.validateCardCVC=function(cvc,type){var card,_ref;cvc=$.trim(cvc);if(!/^\d+$/.test(cvc)){return false;}
card=cardFromType(type);if(card!=null){return _ref=cvc.length,__indexOf.call(card.cvcLength,_ref)>=0;}else{return cvc.length>=3&&cvc.length<=4;}};$.payment.cardType=function(num){var _ref;if(!num){return null;}
return((_ref=cardFromNumber(num))!=null?_ref.type:void 0)||null;};$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;num=num.replace(/\D/g,'');card=cardFromNumber(num);if(!card){return num;}
upperLength=card.length[card.length.length-1];num=num.slice(0,upperLength);if(card.format.global){return(_ref=num.match(card.format))!=null?_ref.join(' '):void 0;}else{groups=card.format.exec(num);if(groups==null){return;}
groups.shift();groups=$.grep(groups,function(n){return n;});return groups.join(' ');}};$.payment.formatExpiry=function(expiry){var mon,parts,sep,year;parts=expiry.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!parts){return'';}
mon=parts[1]||'';sep=parts[2]||'';year=parts[3]||'';if(year.length>0){sep=' / ';}else if(sep===' /'){mon=mon.substring(0,1);sep='';}else if(mon.length===2||sep.length>0){sep=' / ';}else if(mon.length===1&&(mon!=='0'&&mon!=='1')){mon="0"+mon;sep=' / ';}
return mon+sep+year;};}).call(this);;

/* /payment/static/src/js/payment_portal.js defined in bundle 'web.assets_frontend_lazy' */
$(function(){$('input#cc_number').payment('formatCardNumber');$('input#cc_cvc').payment('formatCardCVC');$('input#cc_expiry').payment('formatCardExpiry')
$('input#cc_number').on('focusout',function(e){var valid_value=$.payment.validateCardNumber(this.value);var card_type=$.payment.cardType(this.value);if(card_type){$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder '+card_type);$(this).parent('.form-group').children('input[name="cc_brand"]').val(card_type)}
else{$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder');}
if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_cvc').on('focusout',function(e){var cc_nbr=$(this).parents('.oe_cc').find('#cc_number').val();var card_type=$.payment.cardType(cc_nbr);var valid_value=$.payment.validateCardCVC(this.value,card_type);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_expiry').on('focusout',function(e){var expiry_value=$.payment.cardExpiryVal(this.value);var month=expiry_value.month||'';var year=expiry_value.year||'';var valid_value=$.payment.validateCardExpiry(month,year);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('select[name="pm_acquirer_id"]').on('change',function(){var acquirer_id=$(this).val();$('.acquirer').addClass('d-none');$('.acquirer[data-acquirer-id="'+acquirer_id+'"]').removeClass('d-none');});});;

/* /payment/static/src/js/payment_transaction_portal.js defined in bundle 'web.assets_frontend_lazy' */
;

/* /payment/static/src/js/payment_form.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('payment.payment_form',function(require){"use strict";var core=require('web.core');var Dialog=require('web.Dialog');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.PaymentForm=publicWidget.Widget.extend({selector:'.o_payment_form',events:{'submit':'onSubmit','click #o_payment_form_pay':'payEvent','click #o_payment_form_add_pm':'addPmEvent','click button[name="delete_pm"]':'deletePmEvent','click .o_payment_form_pay_icon_more':'onClickMorePaymentIcon','click .o_payment_acquirer_select':'radioClickEvent',},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.options=_.extend(self.$el.data(),self.options);self.updateNewPaymentDisplayStatus();$('[data-toggle="tooltip"]').tooltip();});},displayError:function(title,message){var $checkedRadio=this.$('input[type="radio"]:checked'),acquirerID=this.getAcquirerIdFromRadio($checkedRadio[0]);var $acquirerForm;if(this.isNewPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_add_token_acq_'+acquirerID);}
else if(this.isFormPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_form_acq_'+acquirerID);}
if($checkedRadio.length===0){return new Dialog(null,{title:_t('Error: ')+_.str.escapeHTML(title),size:'medium',$content:"<p>"+(_.str.escapeHTML(message)||"")+"</p>",buttons:[{text:_t('Ok'),close:true}]}).open();}else{this.$('#payment_error').remove();var messageResult='<div class="alert alert-danger mb4" id="payment_error">';if(title!=''){messageResult=messageResult+'<b>'+_.str.escapeHTML(title)+':</b></br>';}
messageResult=messageResult+_.str.escapeHTML(message)+'</div>';$acquirerForm.append(messageResult);}},hideError:function(){this.$('#payment_error').remove();},getAcquirerIdFromRadio:function(element){return $(element).data('acquirer-id');},getFormData:function($form){var unindexed_array=$form.serializeArray();var indexed_array={};$.map(unindexed_array,function(n,i){indexed_array[n.name]=n.value;});return indexed_array;},isFormPaymentRadio:function(element){return $(element).data('form-payment')==='True';},isNewPaymentRadio:function(element){return $(element).data('s2s-payment')==='True';},updateNewPaymentDisplayStatus:function(){var checked_radio=this.$('input[type="radio"]:checked');this.$('[id*="o_payment_add_token_acq_"]').addClass('d-none');this.$('[id*="o_payment_form_acq_"]').addClass('d-none');if(checked_radio.length!==1){return;}
checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);if(this.isNewPaymentRadio(checked_radio)){this.$('#o_payment_add_token_acq_'+acquirer_id).removeClass('d-none');}
else if(this.isFormPaymentRadio(checked_radio)){this.$('#o_payment_form_acq_'+acquirer_id).removeClass('d-none');}},disableButton:function(button){$(button).attr('disabled',true);$(button).children('.fa-lock').removeClass('fa-lock');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');},enableButton:function(button){$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-lock');$(button).find('span.o_loader').remove();},_parseError:function(e){if(e.message.data.arguments[1]){return e.message.data.arguments[0]+e.message.data.arguments[1];}
return e.message.data.arguments[0];},payEvent:function(ev){ev.preventDefault();var form=this.el;var checked_radio=this.$('input[type="radio"]:checked');var self=this;if(ev.type==='submit'){var button=$(ev.target).find('*[type="submit"]')[0]}else{var button=ev.target;}
if(checked_radio.length===1){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=false;if(this.isNewPaymentRadio(checked_radio)){acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);}else{acquirer_form=this.$('#o_payment_form_acq_'+acquirer_id);}
var inputs_form=$('input',acquirer_form);var ds=$('input[name="data_set"]',acquirer_form)[0];if(this.isNewPaymentRadio(checked_radio)){if(this.options.partnerId===undefined){console.warn('payment_form: unset partner_id when adding new token; things could go wrong');}
var form_data=this.getFormData(inputs_form);var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');}});if(wrong_input){return;}
this.disableButton(button);return this._rpc({route:ds.dataset.createRoute,params:form_data,}).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{checked_radio.value=data.id;form.submit();return new Promise(function(){});}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
self.enableButton(button);}).guardedCatch(function(error){error.event.preventDefault();self.enableButton(button);self.displayError(_t('Server Error'),_t("We are not able to add your payment method at the moment.")+
self._parseError(error));});}
else if(this.isFormPaymentRadio(checked_radio)){this.disableButton(button);var $tx_url=this.$el.find('input[name="prepare_tx_url"]');if($tx_url.length===1){var form_save_token=acquirer_form.find('input[name="o_payment_form_save_token"]').prop('checked');return this._rpc({route:$tx_url[0].value,params:{'acquirer_id':parseInt(acquirer_id),'save_token':form_save_token,'access_token':self.options.accessToken,'success_url':self.options.successUrl,'error_url':self.options.errorUrl,'callback_method':self.options.callbackMethod,'order_id':self.options.orderId,},}).then(function(result){if(result){var newForm=document.createElement('form');newForm.setAttribute("method","post");newForm.setAttribute("provider",checked_radio.dataset.provider);newForm.hidden=true;newForm.innerHTML=result;var action_url=$(newForm).find('input[name="data_set"]').data('actionUrl');newForm.setAttribute("action",action_url);$(document.getElementsByTagName('body')[0]).append(newForm);$(newForm).find('input[data-remove-me]').remove();if(action_url){newForm.submit();return new Promise(function(){});}}
else{self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form."));self.enableButton(button);}}).guardedCatch(function(error){error.event.preventDefault();self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form.")+" "+
self._parseError(error));});}
else{this.displayError(_t("Cannot setup the payment"),_t("We're unable to process your payment."));self.enableButton(button);}}
else{this.disableButton(button);form.submit();return new Promise(function(){});}}
else{this.displayError(_t('No payment method selected'),_t('Please select a payment method.'));this.enableButton(button);}},addPmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var checked_radio=this.$('input[type="radio"]:checked');var self=this;if(ev.type==='submit'){var button=$(ev.target).find('*[type="submit"]')[0]}else{var button=ev.target;}
if(checked_radio.length===1&&this.isNewPaymentRadio(checked_radio[0])){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);var inputs_form=$('input',acquirer_form);var form_data=this.getFormData(inputs_form);var ds=$('input[name="data_set"]',acquirer_form)[0];var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);}});if(wrong_input){return;}
$(button).attr('disabled',true);$(button).children('.fa-plus-circle').removeClass('fa-plus-circle');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');this._rpc({route:ds.dataset.createRoute,params:form_data,}).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{if(form_data.return_url){window.location=form_data.return_url;}
else{window.location.reload();}}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle');$(button).find('span.o_loader').remove();}).guardedCatch(function(error){error.event.preventDefault();$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle');$(button).find('span.o_loader').remove();self.displayError(_t('Server error'),_t("We are not able to add your payment method at the moment.</p>")+
self._parseError(error));});}
else{this.displayError(_t('No payment method selected'),_t('Please select the option to add a new payment method.'));}},onSubmit:function(ev){ev.stopPropagation();ev.preventDefault();var button=$(ev.target).find('*[type="submit"]')[0]
if(button.id==='o_payment_form_pay'){return this.payEvent(ev);}else if(button.id==='o_payment_form_add_pm'){return this.addPmEvent(ev);}
return;},deletePmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var self=this;var pm_id=parseInt(ev.target.value);var tokenDelete=function(){self._rpc({model:'payment.token',method:'unlink',args:[pm_id],}).then(function(result){if(result===true){ev.target.closest('div').remove();}},function(){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment."));});};this._rpc({model:'payment.token',method:'get_linked_records',args:[pm_id],}).then(function(result){if(result[pm_id].length>0){var content='';result[pm_id].forEach(function(sub){content+='<p><a href="'+sub.url+'" title="'+sub.description+'">'+sub.name+'</a><p/>';});content=$('<div>').html(_t('<p>This card is currently linked to the following records:<p/>')+content);new Dialog(self,{title:_t('Warning!'),size:'medium',$content:content,buttons:[{text:_t('Confirm Deletion'),classes:'btn-primary',close:true,click:tokenDelete},{text:_t('Cancel'),close:true}]}).open();}
else{tokenDelete();}},function(err,event){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment.")+err.data.message);});},onClickMorePaymentIcon:function(ev){ev.preventDefault();ev.stopPropagation();var $listItems=$(ev.currentTarget).parents('ul').children('li');var $moreItem=$(ev.currentTarget).parents('li');$listItems.removeClass('d-none');$moreItem.addClass('d-none');},radioClickEvent:function(ev){$(ev.currentTarget).find('input[type="radio"]').prop("checked",true);this.updateNewPaymentDisplayStatus();},});return publicWidget.registry.PaymentForm;});;

/* /payment/static/src/js/payment_processing.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('payment.processing',function(require){'use strict';var publicWidget=require('web.public.widget');var ajax=require('web.ajax');var core=require('web.core');var _t=core._t;$.blockUI.defaults.css.border='0';$.blockUI.defaults.css["background-color"]='';$.blockUI.defaults.overlayCSS["opacity"]='0.9';publicWidget.registry.PaymentProcessing=publicWidget.Widget.extend({selector:'.o_payment_processing',xmlDependencies:['/payment/static/src/xml/payment_processing.xml'],_pollCount:0,start:function(){this.displayLoading();this.poll();return this._super.apply(this,arguments);},startPolling:function(){var timeout=3000;if(this._pollCount>=10&&this._pollCount<20){timeout=10000;}
else if(this._pollCount>=20){timeout=30000;}
setTimeout(this.poll.bind(this),timeout);this._pollCount++;},poll:function(){var self=this;ajax.jsonRpc('/payment/process/poll','call',{}).then(function(data){if(data.success===true){self.processPolledData(data.transactions);}
else{switch(data.error){case"tx_process_retry":break;case"no_tx_found":self.displayContent("payment.no_tx_found",{});break;default:self.displayContent("payment.exception",{exception_msg:data.error});break;}}
self.startPolling();}).guardedCatch(function(){self.displayContent("payment.rpc_error",{});self.startPolling();});},processPolledData:function(transactions){var render_values={'tx_draft':[],'tx_pending':[],'tx_authorized':[],'tx_done':[],'tx_cancel':[],'tx_error':[],};if(transactions.length>0&&['transfer','sepa_direct_debit'].indexOf(transactions[0].acquirer_provider)>=0){window.location=transactions[0].return_url;return;}
transactions.forEach(function(tx){var key='tx_'+tx.state;if(key in render_values){render_values[key].push(tx);}});function countTxInState(states){var nbTx=0;for(var prop in render_values){if(states.indexOf(prop)>-1&&render_values.hasOwnProperty(prop)){nbTx+=render_values[prop].length;}}
return nbTx;}
if(countTxInState(['tx_done','tx_error','tx_pending','tx_authorized'])===1){var tx=render_values['tx_done'][0]||render_values['tx_authorized'][0]||render_values['tx_error'][0];if(tx){window.location=tx.return_url;return;}}
this.displayContent("payment.display_tx_list",render_values);},displayContent:function(xmlid,render_values){var html=core.qweb.render(xmlid,render_values);$.unblockUI();this.$el.find('.o_payment_processing_content').html(html);},displayLoading:function(){var msg=_t("We are processing your payment, please wait ...");$.blockUI({'message':'<h2 class="text-white"><img src="/web/static/src/img/spin.png" class="fa-pulse"/>'+'    <br />'+msg+'</h2>'});},});});;

/* /web_unsplash/static/src/js/unsplash_beacon.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_unsplash.beacon',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.UnsplashBeacon=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(){var unsplashImages=_.map(this.$('img[src*="/unsplash/"]'),function(img){return img.src.split('/unsplash/')[1].split('/')[0];});if(unsplashImages.length){this._rpc({route:'/web_unsplash/get_app_id',}).then(function(appID){if(!appID){return;}
$.get('https://views.unsplash.com/v',{'photo_id':unsplashImages.join(','),'app_id':appID,});});}
return this._super.apply(this,arguments);},});});;

/* /account/static/src/js/account_portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('account.AccountPortalSidebar',function(require){'use strict';var publicWidget=require('web.public.widget');var PortalSidebar=require('portal.PortalSidebar');var utils=require('web.utils');publicWidget.registry.AccountPortalSidebar=PortalSidebar.extend({selector:'.o_portal_invoice_sidebar',events:{'click .o_portal_invoice_print':'_onPrintInvoice',},start:function(){var def=this._super.apply(this,arguments);var $invoiceHtml=this.$el.find('iframe#invoice_html');var updateIframeSize=this._updateIframeSize.bind(this,$invoiceHtml);$(window).on('resize',updateIframeSize);var iframeDoc=$invoiceHtml[0].contentDocument||$invoiceHtml[0].contentWindow.document;if(iframeDoc.readyState==='complete'){updateIframeSize();}else{$invoiceHtml.on('load',updateIframeSize);}
return def;},_updateIframeSize:function($el){var $wrapwrap=$el.contents().find('div#wrapwrap');$el.height(0);$el.height($wrapwrap[0].scrollHeight);if(!utils.isValidAnchor(window.location.hash)){return;}
var $target=$(window.location.hash);if(!$target.length){return;}
$('html, body').scrollTop($target.offset().top);},_onPrintInvoice:function(ev){ev.preventDefault();var href=$(ev.currentTarget).attr('href');this._printIframeContent(href);},});});;

/* /project/static/src/js/portal_rating.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_rating_project.rating',function(require){'use strict';var time=require('web.time');var publicWidget=require('web.public.widget');publicWidget.registry.ProjectRatingImage=publicWidget.Widget.extend({selector:'.o_portal_project_rating .o_rating_image',start:function(){this.$el.popover({placement:'bottom',trigger:'hover',html:true,content:function(){var $elem=$(this);var id=$elem.data('id');var ratingDate=$elem.data('rating-date');var baseDate=time.auto_str_to_date(ratingDate);var duration=moment(baseDate).fromNow();var $rating=$('#rating_'+id);$rating.find('.rating_timeduration').text(duration);return $rating.html();},});return this._super.apply(this,arguments);},});});;

/* /sale/static/src/js/sale_portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale.SalePortalSidebar',function(require){'use strict';var publicWidget=require('web.public.widget');var PortalSidebar=require('portal.PortalSidebar');publicWidget.registry.SalePortalSidebar=PortalSidebar.extend({selector:'.o_portal_sale_sidebar',init:function(parent,options){this._super.apply(this,arguments);this.authorizedTextTag=['em','b','i','u'];this.spyWatched=$('body[data-target=".navspy"]');},start:function(){var def=this._super.apply(this,arguments);var $spyWatcheElement=this.$el.find('[data-id="portal_sidebar"]');this._setElementId($spyWatcheElement);this._generateMenu();if($.bbq.getState('allow_payment')==='yes'&&this.$('#o_sale_portal_paynow').length){this.$('#o_sale_portal_paynow').trigger('click');$.bbq.removeState('allow_payment');}
return def;},_setElementId:function(prefix,$el){var id=_.uniqueId(prefix);this.spyWatched.find($el).attr('id',id);return id;},_generateMenu:function(){var self=this,lastLI=false,lastUL=null,$bsSidenav=this.$el.find('.bs-sidenav');$("#quote_content [id^=quote_header_], #quote_content [id^=quote_]",this.spyWatched).attr("id","");_.each(this.spyWatched.find("#quote_content h2, #quote_content h3"),function(el){var id,text;switch(el.tagName.toLowerCase()){case"h2":id=self._setElementId('quote_header_',el);text=self._extractText($(el));if(!text){break;}
lastLI=$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo($bsSidenav);lastUL=false;break;case"h3":id=self._setElementId('quote_',el);text=self._extractText($(el));if(!text){break;}
if(lastLI){if(!lastUL){lastUL=$("<ul class='nav flex-column'>").appendTo(lastLI);}
$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo(lastUL);}
break;}});},_extractText:function($node){var self=this;var rawText=[];_.each($node.contents(),function(el){var current=$(el);if($.trim(current.text())){var tagName=current.prop("tagName");if(_.isUndefined(tagName)||(!_.isUndefined(tagName)&&_.contains(self.authorizedTextTag,tagName.toLowerCase()))){rawText.push($.trim(current.text()));}}});return rawText.join(' ');},});});;

/* /sale_management/static/src/js/sale_management.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale_management.sale_management',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.SaleUpdateLineButton=publicWidget.Widget.extend({selector:'.o_portal_sale_sidebar a.js_update_line_json',events:{'click':'_onClick',},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.elems=self._getUpdatableElements();self.elems.$lineQuantity.change(function(ev){var quantity=parseInt(this.value);self._onChangeQuantity(quantity);});});},_onChangeQuantity:function(quantity){var href=this.$el.attr("href");var orderID=href.match(/my\/orders\/([0-9]+)/);var lineID=href.match(/update_line\/([0-9]+)/);var params={'line_id':parseInt(lineID[1]),'remove':this.$el.is('[href*="remove"]'),'unlink':this.$el.is('[href*="unlink"]'),'input_quantity':quantity>=0?quantity:false,};var token=href.match(/token=([\w\d-]*)/)[1];if(token){params['access_token']=token;}
orderID=parseInt(orderID[1]);this._callUpdateLineRoute(orderID,params).then(this._updateOrderValues.bind(this));},_onClick:function(ev){ev.preventDefault();return this._onChangeQuantity();},_callUpdateLineRoute:function(order_id,params){var url="/my/orders/"+order_id+"/update_line_dict";return this._rpc({route:url,params:params,});},_updateOrderValues:function(data){if(!data){window.location.reload();}
var orderAmountTotal=data.order_amount_total;var orderAmountUntaxed=data.order_amount_untaxed;var orderAmountTax=data.order_amount_tax;var orderAmountUndiscounted=data.order_amount_undiscounted;var orderTotalsTable=$(data.order_totals_table);var lineProductUomQty=data.order_line_product_uom_qty;var linePriceTotal=data.order_line_price_total;var linePriceSubTotal=data.order_line_price_subtotal;this.elems.$lineQuantity.val(lineProductUomQty);if(this.elems.$linePriceTotal.length&&linePriceTotal!==undefined){this.elems.$linePriceTotal.text(linePriceTotal);}
if(this.elems.$linePriceSubTotal.length&&linePriceSubTotal!==undefined){this.elems.$linePriceSubTotal.text(linePriceSubTotal);}
if(orderAmountUntaxed!==undefined){this.elems.$orderAmountUntaxed.text(orderAmountUntaxed);}
if(orderAmountTotal!==undefined){this.elems.$orderAmountTotal.text(orderAmountTotal);}
if(orderAmountUndiscounted!==undefined){this.elems.$orderAmountUndiscounted.text(orderAmountUndiscounted);}
if(orderTotalsTable){this.elems.$orderTotalsTable.find('table').replaceWith(orderTotalsTable);}},_getUpdatableElements:function(){var $parentTr=this.$el.parents('tr:first');var $linePriceTotal=$parentTr.find('.oe_order_line_price_total .oe_currency_value');var $linePriceSubTotal=$parentTr.find('.oe_order_line_price_subtotal .oe_currency_value');if(!$linePriceTotal.length&&!$linePriceSubTotal.length){$linePriceTotal=$linePriceSubTotal=$parentTr.find('.oe_currency_value').last();}
var $orderAmountUntaxed=$('[data-id="total_untaxed"]').find('span, b');var $orderAmountTotal=$('[data-id="total_amount"]').find('span, b');var $orderAmountUndiscounted=$('[data-id="amount_undiscounted"]').find('span, b');if(!$orderAmountUntaxed.length){$orderAmountUntaxed=$orderAmountTotal.eq(1);$orderAmountTotal=$orderAmountTotal.eq(0).add($orderAmountTotal.eq(2));}
return{$lineQuantity:this.$el.closest('.input-group').find('.js_quantity'),$linePriceSubTotal:$linePriceSubTotal,$linePriceTotal:$linePriceTotal,$orderAmountUntaxed:$orderAmountUntaxed,$orderAmountTotal:$orderAmountTotal,$orderTotalsTable:$('#total'),$orderAmountUndiscounted:$orderAmountUndiscounted,};}});});;

/* /web_tour/static/src/js/public/tour_manager.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_tour.public.TourManager',function(require){'use strict';var TourManager=require('web_tour.TourManager');var lazyloader=require('web.public.lazyloader');TourManager.include({_waitBeforeTourStart:function(){return this._super.apply(this,arguments).then(function(){return lazyloader.allScriptsLoaded;}).then(function(){return new Promise(function(resolve){setTimeout(resolve);});});},});});